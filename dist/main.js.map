{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/xterm/lib/common/Lifecycle.js","webpack:///./node_modules/xterm/lib/core/buffer/BufferLine.js","webpack:///./node_modules/xterm/lib/common/EventEmitter2.js","webpack:///./node_modules/xterm/lib/renderer/atlas/Types.js","webpack:///./node_modules/xterm/lib/ui/Lifecycle.js","webpack:///./node_modules/xterm/lib/common/Platform.js","webpack:///./node_modules/xterm/lib/common/Types.js","webpack:///./node_modules/xterm/lib/common/data/EscapeSequences.js","webpack:///./node_modules/xterm/lib/renderer/BaseRenderLayer.js","webpack:///./node_modules/xterm/lib/public/Terminal.js","webpack:///./node_modules/xterm/lib/core/input/TextDecoder.js","webpack:///./node_modules/xterm/lib/renderer/atlas/CharAtlasUtils.js","webpack:///./node_modules/xterm/lib/renderer/atlas/BaseCharAtlas.js","webpack:///./node_modules/xterm/lib/Strings.js","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./node_modules/xterm/lib/Buffer.js","webpack:///./node_modules/xterm/lib/CharWidth.js","webpack:///./node_modules/xterm/lib/common/TypedArrayUtils.js","webpack:///./node_modules/xterm/lib/renderer/atlas/CharAtlasCache.js","webpack:///./node_modules/xterm/lib/ui/ColorManager.js","webpack:///./node_modules/xterm/lib/renderer/atlas/CharAtlasGenerator.js","webpack:///./node_modules/xterm/lib/renderer/CharacterJoinerRegistry.js","webpack:///./node_modules/xterm/lib/MouseZoneManager.js","webpack:///./node_modules/xterm/lib/MouseHelper.js","webpack:///./node_modules/xterm/lib/ui/RenderDebouncer.js","webpack:///./node_modules/xterm/lib/ui/ScreenDprMonitor.js","webpack:///./node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:///./node_modules/xterm/lib/addons/fit/fit.js","webpack:///./node_modules/xterm/lib/addons/attach/attach.js","webpack:///external \"OSjs\"","webpack:///./node_modules/regenerator-runtime/runtime.js","webpack:///./node_modules/xterm/lib/Terminal.js","webpack:///./node_modules/xterm/lib/BufferSet.js","webpack:///./node_modules/xterm/lib/common/CircularList.js","webpack:///./node_modules/xterm/lib/core/buffer/BufferReflow.js","webpack:///./node_modules/xterm/lib/core/buffer/Marker.js","webpack:///./node_modules/xterm/lib/CompositionHelper.js","webpack:///./node_modules/xterm/lib/common/EventEmitter.js","webpack:///./node_modules/xterm/lib/Viewport.js","webpack:///./node_modules/xterm/lib/Clipboard.js","webpack:///./node_modules/xterm/lib/InputHandler.js","webpack:///./node_modules/xterm/lib/core/data/Charsets.js","webpack:///./node_modules/xterm/lib/EscapeSequenceParser.js","webpack:///./node_modules/xterm/lib/renderer/Renderer.js","webpack:///./node_modules/xterm/lib/renderer/TextRenderLayer.js","webpack:///./node_modules/xterm/lib/renderer/GridCache.js","webpack:///./node_modules/xterm/lib/renderer/atlas/DynamicCharAtlas.js","webpack:///./node_modules/xterm/lib/renderer/atlas/LRUMap.js","webpack:///./node_modules/xterm/lib/renderer/atlas/NoneCharAtlas.js","webpack:///./node_modules/xterm/lib/renderer/atlas/StaticCharAtlas.js","webpack:///./node_modules/xterm/lib/renderer/SelectionRenderLayer.js","webpack:///./node_modules/xterm/lib/renderer/CursorRenderLayer.js","webpack:///./node_modules/xterm/lib/renderer/LinkRenderLayer.js","webpack:///./node_modules/xterm/lib/Linkifier.js","webpack:///./node_modules/xterm/lib/SelectionManager.js","webpack:///./node_modules/xterm/lib/SelectionModel.js","webpack:///./node_modules/xterm/lib/handlers/AltClickHandler.js","webpack:///./node_modules/xterm/lib/CharMeasure.js","webpack:///./node_modules/xterm/lib/SoundManager.js","webpack:///./node_modules/xterm/lib/AccessibilityManager.js","webpack:///./node_modules/xterm/lib/renderer/dom/DomRenderer.js","webpack:///./node_modules/xterm/lib/renderer/dom/DomRendererRowFactory.js","webpack:///./node_modules/xterm/lib/core/input/Keyboard.js","webpack:///./node_modules/xterm/lib/common/Clone.js","webpack:///./node_modules/xterm/lib/WindowsMode.js","webpack:///./node_modules/xterm/lib/renderer/RenderCoordinator.js","webpack:///./node_modules/xterm/lib/public/AddonManager.js","webpack:///./node_modules/clipboard-polyfill/dist/clipboard-polyfill.esm.js","webpack:///./index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Disposable","this","_disposables","_isDisposed","dispose","forEach","length","register","push","unregister","index","indexOf","splice","extendStatics","__extends","b","setPrototypeOf","__proto__","Array","__","constructor","TextDecoder_1","Types_1","DEFAULT_ATTR","DEFAULT_COLOR","CHAR_DATA_ATTR_INDEX","CHAR_DATA_CHAR_INDEX","CHAR_DATA_WIDTH_INDEX","CHAR_DATA_CODE_INDEX","NULL_CELL_CHAR","NULL_CELL_WIDTH","NULL_CELL_CODE","WHITESPACE_CELL_CHAR","WHITESPACE_CELL_WIDTH","WHITESPACE_CELL_CODE","CELL_SIZE","AttributeData","fg","bg","toColorRGB","fromColorRGB","clone","newObj","isInverse","isBold","isUnderline","isBlink","isInvisible","isItalic","isDim","getFgColorMode","getBgColorMode","isFgRGB","isBgRGB","isFgPalette","isBgPalette","isFgDefault","isBgDefault","getFgColor","getBgColor","DEFAULT_ATTR_DATA","freeze","CellData","_super","_this","apply","arguments","content","combinedData","fromCharData","obj","setFromCharData","isCombined","getWidth","getChars","stringFromCodePoint","getCode","charCodeAt","combined","code","second","getAsCharData","BufferLine","cols","fillCellData","isWrapped","_combined","_data","Uint32Array","cell","setCell","cp","set","hasWidth","getFg","getBg","hasContent","getCodePoint","getString","loadCell","startIndex","setCellFromCodePoint","codePoint","width","addCodepointToCell","insertCells","pos","deleteCells","replaceCells","start","end","resize","data","subarray","keys","parseInt","fill","copyFrom","line","el","newLine","getTrimmedLength","copyCellsFrom","src","srcCol","destCol","applyInReverse","srcData","srcCombinedKeys","translateToString","trimRight","startCol","endCol","Math","min","result","EventEmitter2","_listeners","_event","listener","configurable","fire","queue","undefined","INVERTED_DEFAULT_COLOR","DIM_OPACITY","CHAR_ATLAS_CELL_SPACING","addDisposableDomListener","node","type","handler","useCapture","addEventListener","removeEventListener","isNode","navigator","userAgent","platform","contains","arr","isFirefox","isSafari","test","isMSIE","isMac","isIpad","isIphone","isMSWindows","isLinux","C0","NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SP","DEL","C1","PAD","HOP","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","SGCI","SCI","CSI","ST","OSC","PM","APC","Types_2","CharAtlasCache_1","BufferLine_1","BaseRenderLayer","_container","id","zIndex","_alpha","_colors","_scaledCharWidth","_scaledCharHeight","_scaledCellWidth","_scaledCellHeight","_scaledCharLeft","_scaledCharTop","_currentGlyphIdentifier","chars","bold","dim","italic","_canvas","document","createElement","classList","add","style","toString","_initCanvas","appendChild","removeChild","_charAtlas","_ctx","getContext","alpha","clearAll","onOptionsChanged","terminal","onBlur","onFocus","onCursorMove","onGridChanged","startRow","endRow","onSelectionChanged","columnSelectMode","setColors","colorSet","_refreshCharAtlas","setTransparency","oldCanvas","cloneNode","replaceChild","rows","acquireCharAtlas","warmUp","scaledCellWidth","scaledCellHeight","scaledCharWidth","scaledCharHeight","scaledCharLeft","scaledCharTop","scaledCanvasWidth","height","scaledCanvasHeight","canvasWidth","canvasHeight","fillCells","x","y","fillRect","fillBottomLineAtCells","window","devicePixelRatio","fillLeftLineAtCell","strokeRectAtCell","lineWidth","strokeRect","clearRect","fillStyle","background","css","clearCells","fillCharTrueColor","font","_getFont","textBaseline","_clipRow","fillText","drawChars","_drawUncachedChars","options","drawBoldTextInBrightColors","enableBold","draw","save","join","ansi","foreground","globalAlpha","restore","beginPath","rect","clip","fontWeightBold","fontWeight","fontSize","fontFamily","Terminal_1","Strings","AddonManager_1","Terminal","_core","_addonManager","AddonManager","onLineFeed","onSelectionChange","onData","onTitleChange","onScroll","onKey","onRender","onResize","element","textarea","BufferApiView","buffer","markers","blur","focus","on","off","emit","addDisposableListener","columns","writeln","open","parent","attachCustomKeyEventHandler","customKeyEventHandler","addCsiHandler","flag","callback","addOscHandler","ident","registerLinkMatcher","regex","deregisterLinkMatcher","matcherId","registerCharacterJoiner","deregisterCharacterJoiner","joinerId","addMarker","cursorYOffset","hasSelection","select","column","row","getSelection","getSelectionPosition","clearSelection","selectAll","selectLines","destroy","scrollLines","amount","scrollPages","pageCount","scrollToTop","scrollToBottom","scrollToLine","clear","write","writeUtf8","getOption","setOption","refresh","reset","applyAddon","addon","loadAddon","_buffer","ydisp","ybase","lines","getLine","BufferLineApiView","_line","getCell","BufferCellApiView","startColumn","endColumn","_x","String","fromCharCode","utf32ToString","codepoint","StringToUtf32","_interim","decode","input","target","size","startPos","Utf8ToUtf32","interim","Uint8Array","byte1","byte2","byte3","byte4","discardInterim","tmp","missing","fourStop","generateConfig","colors","clonedColors","cursor","cursorAccent","selection","slice","experimentalCharAtlas","allowTransparency","configEquals","a","rgba","is256Color","colorCode","BaseCharAtlas","_didWarmUp","_doWarmUp","beginFrame","default","blankLine","promptLabel","tooMuchOutput","CircularList_1","BufferReflow_1","Marker_1","MAX_BUFFER_SIZE","Buffer","_terminal","_hasScrollback","savedCurAttrData","_nullCell","_whitespaceCell","_cols","_rows","getNullCell","attr","getWhitespaceCell","getBlankLine","maxLength","relativeY","_getCorrectBufferLength","correctBufferLength","scrollback","fillViewportRows","fillAttr","CircularList","scrollTop","scrollBottom","setupTabStops","newCols","newRows","nullCell","newMaxLength","addToY","pop","amountToTrim","trimStart","max","savedY","savedX","_isReflowEnabled","_reflow","windowsMode","_reflowLarger","_reflowSmaller","toRemove","reflowLargerGetLinesToRemove","newLayoutResult","reflowLargerCreateNewLayout","reflowLargerApplyNewLayout","layout","_reflowLargerAdjustViewport","countRemoved","viewportAdjustments","toInsert","countToInsert","nextLine","wrappedLines","unshift","absoluteY","lastLineLength","destLineLengths","reflowSmallerGetNewLineLengths","linesToAdd","trimmedLines","newLines","destLineIndex","srcLineIndex","cellsToCopy","wrappedLinesIndex","getWrappedLineTrimmedLength","insertEvents","originalLines","originalLinesLength","originalLineIndex","nextToInsertIndex","nextToInsert","countInsertedSoFar","nextI","insertCountEmitted","onInsertEmitter","onTrimEmitter","stringIndexToBufferIndex","lineIndex","stringIndex","length_1","translateBufferLineToString","getWrappedRangeForLine","first","last","tabs","prevStop","tabStopWidth","nextStop","marker","Marker","onTrim","onInsert","event","onDelete","onDispose","_removeMarker","iterator","endIndex","startOverscan","endOverscan","BufferStringIterator","_trimRight","_startIndex","_endIndex","_startOverscan","_endOverscan","_current","hasNext","next","range","TypedArrayUtils_1","wcwidth","opts","COMBINING_BMP","COMBINING_HIGH","control","table","nul","num","ucs","mid","bisearch","getStringCellWidth","fillFallback","array","concat","CharAtlasUtils_1","DynamicCharAtlas_1","NoneCharAtlas_1","StaticCharAtlas_1","charAtlasImplementations","charAtlasCache","newConfig","ownedByIndex","entry","ownedBy","config","atlas","newEntry","removeTerminalFromCache","DEFAULT_FOREGROUND","fromHex","DEFAULT_BACKGROUND","DEFAULT_CURSOR","DEFAULT_CURSOR_ACCENT","DEFAULT_SELECTION","toPaddedHex","DEFAULT_ANSI_COLORS","v","g","ch","ColorManager","canvas","ctx","Error","globalCompositeOperation","_litmusColor","createLinearGradient","setTheme","theme","_parseColor","black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite","fallback","console","warn","getImageData","Platform_1","clearColor","imageData","color","isEmpty","offset","getFont","generateStaticCharAtlasTexture","context","canvasFactory","cellWidth","cellHeight","colorIndex","charAtlasImageData","createImageBitmap","JoinedCellData","firstCell","_width","CharacterJoinerRegistry","_characterJoiners","_nextCharacterJoinerId","_workCell","joiner","getJoinedCharacters","ranges","lineStr","rangeStartColumn","currentStringIndex","rangeStartStringIndex","rangeAttrFG","rangeAttrBG","joinedRanges","_getJoinedRanges","lineData","text","substring","joinerRanges","j","_mergeRanges","_stringRangesToCellRanges","currentRangeIndex","currentRangeStarted","currentRange","newRange","inRange","Lifecycle_1","Lifecycle_2","MouseZoneManager","_zones","_areZonesActive","_tooltipTimeout","_currentZone","_lastHoverCoords","e","_onMouseDown","_mouseMoveListener","_onMouseMove","_mouseLeaveListener","_onMouseLeave","_clickListener","_onClick","_deactivate","zone","_activate","y1","y2","leaveCallback","pageX","pageY","_onHover","_findZoneEventAt","clearTimeout","hoverCallback","setTimeout","_onTooltip","tooltipCallback","_initialSelectionLength","willLinkActivate","preventDefault","stopImmediatePropagation","currentSelectionLength","clickCallback","coords","mouseHelper","getCoords","screenElement","charMeasure","x1","x2","MouseZone","MouseHelper","_renderCoordinator","getCoordsRelativeToElement","getBoundingClientRect","clientX","left","clientY","top","colCount","rowCount","isSelection","ceil","dimensions","actualCellWidth","actualCellHeight","getRawByteCoords","RenderDebouncer","_renderCallback","_animationFrame","cancelAnimationFrame","rowStart","rowEnd","_rowCount","_rowStart","_rowEnd","requestAnimationFrame","_innerRefresh","ScreenDprMonitor","_currentDevicePixelRatio","setListener","_listener","clearListener","_outerListener","_updateDpr","_resolutionMediaMatchList","removeListener","matchMedia","addListener","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","fn","self","args","err","proposeGeometry","term","parentElement","parentElementStyle","getComputedStyle","parentElementHeight","getPropertyValue","parentElementWidth","elementStyle","availableHeight","availableWidth","viewport","scrollBarWidth","floor","fit","geometry","terminalConstructor","attach","socket","bidirectional","buffered","myTextDecoder","addonTerminal","displayData","str","__pushToBuffer","__socket","__flushBuffer","__attachSocketBuffer","__getMessage","ev","TextDecoder","ArrayBuffer","fileReader_1","FileReader","readAsArrayBuffer","__sendData","readyState","send","addSocketListener","__dataListener","detach","OSjs","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","state","GenStateSuspendedStart","method","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","invoke","__await","unwrapped","TypeError","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","iter","reverse","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","BufferSet_1","Buffer_1","CompositionHelper_1","EventEmitter_1","Viewport_1","Clipboard_1","EscapeSequences_1","InputHandler_1","Renderer_1","Linkifier_1","SelectionManager_1","CharMeasure_1","Browser","MouseHelper_1","SoundManager_1","MouseZoneManager_1","AccessibilityManager_1","DomRenderer_1","Keyboard_1","Clone_1","EventEmitter2_1","WindowsMode_1","ColorManager_1","RenderCoordinator_1","CONSTRUCTOR_ONLY_OPTIONS","DEFAULT_OPTIONS","convertEol","termName","cursorBlink","cursorStyle","bellSound","DEFAULT_BELL_SOUND","bellStyle","lineHeight","letterSpacing","screenKeys","screenReaderMode","debug","macOptionIsMeta","macOptionClickForcesSelection","cancelEvents","disableStdin","useFlowControl","rightClickSelectsWord","rendererType","browser","_blankLine","_onCursorMove","_onData","_onKey","_onLineFeed","_onRender","_onResize","_onScroll","_onSelectionChange","_onTitleChange","_setup","domEvent","_windowsMode","_customKeyEventHandler","parentNode","_parent","body","cursorState","cursorHidden","applicationKeypad","applicationCursor","originMode","insertMode","wraparoundMode","bracketedPasteMode","charset","gcharset","glevel","charsets","curAttrData","_eraseAttrData","params","currentParam","writeBuffer","writeBufferUtf8","_writeInProgress","_xoffSentToCatchUp","_userScrolling","_inputHandler","InputHandler","selectionManager","linkifier","Linkifier","_mouseZoneManager","soundManager","SoundManager","buffers","BufferSet","initBuffersListeners","applyWindowsMode","active","eraseAttrData","preventScroll","activeElement","hasFocus","_setTheme","newBufferLength","needsRefresh","measure","setRenderer","_createRenderer","syncScrollArea","_accessibilityManager","AccessibilityManager","_onTextAreaFocus","sendFocus","updateCursorStyle","showCursor","_onTextAreaBlur","remove","_initGlobal","_bindKeys","copyHandler","pasteHandlerWrapper","pasteHandler","button","rightClickHandler","moveTextAreaUnderMouseCursor","_keyDown","_keyPress","keyCode","wasModifierKeyOnlyEvent","_keyUp","_compositionHelper","compositionstart","compositionupdate","compositionend","updateCompositionElements","_queueLinkification","_context","ownerDocument","defaultView","_document","dir","setAttribute","fragment","createDocumentFragment","_viewportElement","_viewportScrollArea","_helperContainer","attachToDom","tabIndex","_compositionView","CompositionHelper","CharMeasure","_theme","_colorManager","renderer","RenderCoordinator","Viewport","onThemeChange","onCharSizeChanged","onDimensionsChange","SelectionManager","onMouseDown","onRedrawRequest","onLinuxMouseSelection","toggle","mouseEvents","disable","enable","setDimensions","bindMouse","Renderer","DomRenderer","pressed","sendButton","shift","meta","ctrl","mod","overrideType","which","detail","deltaY","shiftKey","metaKey","ctrlKey","vt200Mouse","normalMouse","getButton","sendEvent","encode","utfMouse","_vt300Mouse","data_1","_decLocator","page","urxvtMouse","sgrMouse","shouldForceSelection","cancel","moveHandler","sendMove","x10Mouse","hasScrollback","getLinesScrolled","sequence","abs","onWheel","onTouchStart","onTouchMove","refreshRows","linkifyRows","shouldColumnSelect","scroll","eraseAttr","topRow","bottomRow","willBufferBeTrimmed","isFull","recycle","scrollRegionHeight","shiftElements","updateRange","disp","suppressScrollEvent","oldYdisp","scrollAmount","_innerWriteUtf8","bufferOffset","startTime","Date","now","_refreshStart","_refreshEnd","parseUtf8","_innerWrite","parse","normal","setSelection","selectionText","selectionStart","selectionEnd","keydown","evaluateKeyboardEvent","scrollCount","_isThirdLevelShift","thirdLevelKey","altKey","setgLevel","setgCharset","charCode","bell","_soundBell","playBellSound","_visualBell","_visualBellTimer","log","maxRange","is","handleTitle","title","reverseIndex","inputHandler","writeInProgress","xoffSentToCatchUp","userScrolling","tabSet","force","stopPropagation","EventEmitter","_onBufferActivate","_normal","_alt","_activeBuffer","activateNormalBuffer","activeBuffer","inactiveBuffer","activateAltBuffer","_maxLength","onDeleteEmitter","_array","_length","newArray","_getCyclicIndex","newLength","deleteCount","items","_i","countToTrim","count","expandListBy","endsInNull","followingLineStartsWithWide","oldCols","bufferAbsoluteY","srcTrimmedTineLength","srcRemainingCells","destRemainingCells","countToRemove","i_1","nextToRemoveIndex","nextToRemoveStart","countRemovedSoFar","newLayout","newLayoutLines","newLineLengths","cellsNeeded","map","reduce","srcLine","cellsAvailable","oldTrimmedLength","endsWithWide","lineLength","_id","_nextId","isDisposed","_onDispose","_textarea","_isComposing","_isSendingComposition","_compositionPosition","textContent","_finalizeComposition","_handleAnyTextareaChanges","waitForPropagation","_clearTextareaPosition","currentCompositionPosition_1","oldValue","diff","replace","dontRecurse","isCursorInViewport","cursorTop","cursorLeft","compositionViewBounds","_events","disposed","removeAllListeners","emitMayRemoveListeners","listeners","FALLBACK_SCROLL_BAR_WIDTH","_scrollArea","_charMeasure","_dimensions","_currentRowHeight","_lastRecordedBufferLength","_lastRecordedViewportHeight","_lastRecordedBufferHeight","_lastScrollTop","_wheelPartialScroll","_refreshAnimationFrame","_ignoreNextScrollEvent","offsetWidth","onDimensionsChance","backgroundColor","_refresh","offsetHeight","newBufferHeight","round","newScrollTop","offsetParent","_getPixelsScrolled","deltaMode","WheelEvent","DOM_DELTA_LINE","DOM_DELTA_PAGE","DOM_DELTA_PIXEL","_lastTouchY","touches","prepareTextForTerminal","bracketTextForPaste","position","clipboardData","setData","dispatchPaste","getData","shouldSelectWord","isClickInSelection","selectWordAtCursor","Charsets_1","CharWidth_1","EscapeSequenceParser_1","GLEVEL","DECRQSS","hook","collect","put","unhook","pt","_parser","EscapeSequenceParser","_parseBuffer","_stringDecoder","_utf8Decoder","setCsiHandlerFallback","setEscHandlerFallback","setExecuteHandlerFallback","setOscHandlerFallback","identifier","setPrintHandler","print","setCsiHandler","insertChars","cursorUp","cursorDown","cursorForward","cursorBackward","cursorNextLine","cursorPrecedingLine","cursorCharAbsolute","cursorPosition","cursorForwardTab","eraseInDisplay","eraseInLine","insertLines","deleteLines","deleteChars","scrollUp","scrollDown","eraseChars","cursorBackwardTab","charPosAbsolute","hPositionRelative","repeatPrecedingCharacter","sendDeviceAttributes","linePosAbsolute","vPositionRelative","hVPosition","tabClear","setMode","resetMode","charAttributes","deviceStatus","softReset","setCursorStyle","setScrollRegion","saveCursor","restoreCursor","setExecuteHandler","lineFeed","carriageReturn","backspace","tab","shiftOut","shiftIn","setOscHandler","setTitle","setEscHandler","keypadApplicationMode","keypadNumericMode","selectDefaultCharset","_loop_1","this_1","selectCharset","CHARSETS","setErrorHandler","setDcsHandler","cursorStartX","cursorStartY","chWidth","curAttr","bufferRow","originalX","param","col","_eraseInBufferLine","clearWrap","_resetBufferLine","scrollBackSize","scrollBottomRowsOffset","scrollBottomAbsolute","DEFAULT_CHARSET","savedCols","isBlinking","collectAndFlag","level","low","high","TransitionTable","action","addMany","codes","PRINTABLES","EXECUTABLES","VT500_TRANSITION_TABLE","states","DcsDummy","TRANSITIONS","initialState","currentState","_osc","_params","_collect","_printHandlerFb","_executeHandlerFb","_csiHandlerFb","_escHandlerFb","_oscHandlerFb","_dcsHandlerFb","_errorHandlerFb","_printHandler","_executeHandlers","_csiHandlers","_escHandlers","_oscHandlers","_dcsHandlers","_activeDcsHandler","_errorHandler","clearPrintHandler","clearExecuteHandler","handlerList","handlerIndex","clearCsiHandler","clearEscHandler","clearOscHandler","clearDcsHandler","setDcsHandlerFallback","clearErrorHandler","transition","dcs","osc","dcsHandler","abort","handlers","j_1","idx","handlers_1","j_2","TextRenderLayer_1","SelectionRenderLayer_1","CursorRenderLayer_1","LinkRenderLayer_1","CharacterJoinerRegistry_1","_characterJoinerRegistry","_renderLayers","TextRenderLayer","SelectionRenderLayer","LinkRenderLayer","CursorRenderLayer","_devicePixelRatio","_updateDimensions","onDevicePixelRatioChange","_runOperation","operation","renderRows","GridCache_1","BaseRenderLayer_1","container","characterJoinerRegistry","_characterOverlapCache","_state","GridCache","terminalFont","_characterWidth","_characterFont","_forEachCell","firstRow","lastRow","joinerRegistry","isJoined","lastCharX","_isOverlapping","_drawBackground","startX","startY","prevFillStyle","nextFillStyle","_drawForeground","cache","overlaps","measureText","BaseCharAtlas_1","CharAtlasGenerator_1","LRUMap_1","TEXTURE_WIDTH","TEXTURE_HEIGHT","TRANSPARENT_COLOR","getGlyphCacheKey","glyph","DynamicCharAtlas","_config","_drawToCacheCount","_glyphsWaitingOnBitmap","_bitmapCommitTimeout","_bitmap","_cacheCanvas","_cacheCtx","tmpCanvas","_tmpCtx","_height","capacity","_cacheMap","prealloc","_canCache","glyphKey","cacheValue","_drawFromCache","peek","cacheValue_1","_drawToCache","_toCoordinateX","_toCoordinateY","cacheX","cacheY","drawImage","inBitmap","_getColorFromAnsiIndex","_getBackgroundColor","_getForegroundColor","fontStyle","putImageData","_addGlyphToBitmap","_generateBitmap","glyphsMovingToBitmap","bitmap","LRUMap","_map","_head","_tail","_nodePool","_unlinkNode","_appendNode","tail","nodePool","peekValue","head","NoneCharAtlas","StaticCharAtlas","_canvasFactory","HTMLCanvasElement","_texture","texture","_isCached","isAscii","isBasicColor","isDefaultColor","isDefaultBackground","charAtlasCellWidth","charAtlasCellHeight","_clearState","_didStateChange","viewportStartRow","viewportEndRow","viewportCappedStartRow","viewportCappedEndRow","startRowEndCol","middleRowsCount","_areCoordinatesEqual","coord1","coord2","_cell","isFocused","_cursorRenderers","_renderBarCursor","_renderBlockCursor","_renderUnderlineCursor","_clearCursor","_cursorBlinkStateManager","pause","resume","CursorBlinkStateManager","_render","restartBlinkAnimation","isPaused","triggeredByAnimationFrame","cursorY","viewportRelativeCursorY","_renderBlurCursor","isCursorVisible","strokeStyle","_restartInterval","_blinkStartTimeout","_blinkInterval","clearInterval","_animationTimeRestarted","timeToStart","time","setInterval","onLinkHover","_onLinkHover","onLinkLeave","_onLinkLeave","_clearCurrentLink","middleRowCount","_linkMatchers","_nextLinkMatcherId","_onLinkTooltip","_rowsToLinkify","mouseZoneManager","_rowsTimeoutId","_linkifyRows","TIME_BEFORE_LINKIFY","absoluteRowIndexStart","absoluteRowIndexEnd","overscanLineLimit","OVERSCAN_CHAR_LIMIT","_doLinkifyRow","matcher","matchIndex","validationCallback","hoverTooltipCallback","hoverLeaveCallback","priority","_addLinkMatcherToList","rowIndex","match","rex","RegExp","source","flags","uri","lastIndex","bufferIndex","isValid","_addLink","exec","_createLinkHoverEvent","SelectionModel_1","AltClickHandler_1","NON_BREAKING_SPACE_CHAR","ALL_NON_BREAKING_SPACE_REGEX","_enabled","_onLinuxMouseSelection","_onRedrawRequest","_initListeners","_model","SelectionModel","_activeSelectionMode","_removeMouseDownListeners","_mouseUpListener","_onMouseUp","_trimListener","_onTrim","onBufferActivate","finalSelectionStart","finalSelectionEnd","lineText","bufferLine","isLinuxMouseSelection","_getMouseBufferCoords","_areCoordsInSelection","_selectWordAt","isSelectAllActive","_getMouseEventScrollAmount","terminalHeight","_mouseDownTimeStamp","timeStamp","_dragScrollAmount","_onIncrementalClick","_onSingleClick","_onDoubleClick","_onTripleClick","_addMouseDownListeners","_dragScrollIntervalTimer","_dragScroll","selectionStartLength","_selectLineAt","previousSelectionEnd","_selectToWordAt","timeElapsed","AltClickHandler","move","_convertViewportColToCharacterIndex","charIndex","_getWordAt","allowWhitespaceOnlySelection","followWrappedLinesAbove","followWrappedLinesBelow","charOffset","leftWideCharCount","rightWideCharCount","leftLongCharOffset","rightLongCharOffset","length_2","_isCharWordSeparator","length_3","length_4","trim","previousBufferLine","previousLineWordPosition","nextBufferLine","nextLineWordPosition","wordPosition","areSelectionValuesReversed","wrappedRange","startPlusLength","_mouseEvent","_a","_lines","_startCol","_startRow","coordinates","coordinate","_endCol","_endRow","_arrowSequences","_moveHorizontallyOnly","_resetStartingRow","_moveToRequestedRow","_moveToRequestedCol","repeat","_bufferLine","_wrappedRowsForRow","_sequence","_wrappedRowsCount","_verticalDirection","direction","_horizontalDirection","wrappedRows","currentRow","lineWraps","forward","currentCol","bufferStr","rpt","_onCharSizeChanged","_parentElement","_measureElement","adjustedHeight","_audioContext","audioContextCtor","AudioContext","webkitAudioContext","audioContext","bellAudioSource","createBufferSource","decodeAudioData","_base64ToArrayBuffer","_removeMimeType","connect","destination","base64","binaryString","atob","len","bytes","dataURI","split","RenderDebouncer_1","ScreenDprMonitor_1","_liveRegionLineCount","_charsToConsume","_charsToAnnounce","_accessibilityTreeRoot","_rowContainer","_rowElements","_createAccessibilityTreeNode","_topBoundaryFocusListener","_onBoundaryFocus","_bottomBoundaryFocusListener","_refreshRowsDimensions","_renderRowsDebouncer","_renderRows","_refreshRows","_liveRegion","insertAdjacentElement","char","_onChar","spaceCount","_onTab","_clearLiveRegion","_screenDprMonitor","boundaryElement","beforeBoundaryElement","getAttribute","relatedTarget","topBoundaryElement","bottomBoundaryElement","newElement","children","_refreshRowDimensions","MAX_ROWS_TO_READ","keyChar","setSize","posInSet","_announceCharacters","DomRendererRowFactory_1","TERMINAL_CLASS_PREFIX","ROW_CONTAINER_CLASS","SELECTION_CLASS","nextTerminalId","_terminalClass","_refreshRowElements","_selectionContainer","_injectCss","_rowFactory","DomRendererRowFactory","_themeStyleElement","_dimensionsStyleElement","overflow","styles","_terminalSelector","innerHTML","BOLD_CLASS","ITALIC_CLASS","CURSOR_CLASS","CURSOR_BLINK_CLASS","CURSOR_STYLE_BLOCK_CLASS","CURSOR_STYLE_BAR_CLASS","CURSOR_STYLE_UNDERLINE_CLASS","documentFragment","_createSelectionElement","endCol_1","colStart","colEnd","cursorAbsoluteY","cursorX","rowElement","createRow","_setCellUnderline","enabled","span","textDecoration","DIM_CLASS","UNDERLINE_CLASS","_terminalOptions","isCursorRow","charElement","swapColor","KEYCODE_KEY_MAPPINGS","48","49","50","51","52","53","54","55","56","57","186","187","188","189","190","191","192","219","220","221","222","applicationCursorMode","modifiers","keyMapping","val","depth","clonedObject","isArray","lastChar","_renderer","_isPaused","_needsFullRefresh","_canvasWidth","_canvasHeight","_onDimensionsChange","_onRefreshRequest","_renderDebouncer","observer_1","IntersectionObserver","_onIntersectionChange","threshold","observe","disconnect","intersectionRatio","_fireOnCanvasResize","changeOptions","_fullRefresh","_addons","instance","loadedAddon","_wrappedAddonDispose","activate","u","throw","label","trys","ops","return","f","C","attachShadow","innerText","D","execCommand","E","clipboard","writeText","T","h","readText","k","success","createRange","selectNodeContents","removeAllRanges","addRange","ClipboardEvent","createConnection","core","proc","win","connection","request","response","ws","reconnect","uuid","closed","pinged","pid","osjs","applicationName","metadata","make","windows","createWindow","en_EN","icon","resource","dimension","attributes","classNames","render","$content","menu","onclick","createTerminal","has","tray","show"],"mappings":"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Q,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAC7C,CAAC,KAAQ,MAAS,CAAC,KAAQ,MAAS,CAAC,KAAQ,MA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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 31);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Disposable = (function () {\n    function Disposable() {\n        this._disposables = [];\n        this._isDisposed = false;\n    }\n    Disposable.prototype.dispose = function () {\n        this._isDisposed = true;\n        this._disposables.forEach(function (d) { return d.dispose(); });\n        this._disposables.length = 0;\n    };\n    Disposable.prototype.register = function (d) {\n        this._disposables.push(d);\n    };\n    Disposable.prototype.unregister = function (d) {\n        var index = this._disposables.indexOf(d);\n        if (index !== -1) {\n            this._disposables.splice(index, 1);\n        }\n    };\n    return Disposable;\n}());\nexports.Disposable = Disposable;\n//# sourceMappingURL=Lifecycle.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TextDecoder_1 = require(\"../input/TextDecoder\");\nvar Types_1 = require(\"../../common/Types\");\nexports.DEFAULT_ATTR = (0 << 18) | (Types_1.DEFAULT_COLOR << 9) | (256 << 0);\nexports.CHAR_DATA_ATTR_INDEX = 0;\nexports.CHAR_DATA_CHAR_INDEX = 1;\nexports.CHAR_DATA_WIDTH_INDEX = 2;\nexports.CHAR_DATA_CODE_INDEX = 3;\nexports.NULL_CELL_CHAR = '';\nexports.NULL_CELL_WIDTH = 1;\nexports.NULL_CELL_CODE = 0;\nexports.WHITESPACE_CELL_CHAR = ' ';\nexports.WHITESPACE_CELL_WIDTH = 1;\nexports.WHITESPACE_CELL_CODE = 32;\nvar CELL_SIZE = 3;\nvar AttributeData = (function () {\n    function AttributeData() {\n        this.fg = 0;\n        this.bg = 0;\n    }\n    AttributeData.toColorRGB = function (value) {\n        return [\n            value >>> 16 & 255,\n            value >>> 8 & 255,\n            value & 255\n        ];\n    };\n    AttributeData.fromColorRGB = function (value) {\n        return (value[0] & 255) << 16 | (value[1] & 255) << 8 | value[2] & 255;\n    };\n    AttributeData.prototype.clone = function () {\n        var newObj = new AttributeData();\n        newObj.fg = this.fg;\n        newObj.bg = this.bg;\n        return newObj;\n    };\n    AttributeData.prototype.isInverse = function () { return this.fg & 67108864; };\n    AttributeData.prototype.isBold = function () { return this.fg & 134217728; };\n    AttributeData.prototype.isUnderline = function () { return this.fg & 268435456; };\n    AttributeData.prototype.isBlink = function () { return this.fg & 536870912; };\n    AttributeData.prototype.isInvisible = function () { return this.fg & 1073741824; };\n    AttributeData.prototype.isItalic = function () { return this.bg & 67108864; };\n    AttributeData.prototype.isDim = function () { return this.bg & 134217728; };\n    AttributeData.prototype.getFgColorMode = function () { return this.fg & 50331648; };\n    AttributeData.prototype.getBgColorMode = function () { return this.bg & 50331648; };\n    AttributeData.prototype.isFgRGB = function () { return (this.fg & 50331648) === 50331648; };\n    AttributeData.prototype.isBgRGB = function () { return (this.bg & 50331648) === 50331648; };\n    AttributeData.prototype.isFgPalette = function () { return (this.fg & 50331648) === 16777216 || (this.fg & 50331648) === 33554432; };\n    AttributeData.prototype.isBgPalette = function () { return (this.bg & 50331648) === 16777216 || (this.bg & 50331648) === 33554432; };\n    AttributeData.prototype.isFgDefault = function () { return (this.fg & 50331648) === 0; };\n    AttributeData.prototype.isBgDefault = function () { return (this.bg & 50331648) === 0; };\n    AttributeData.prototype.getFgColor = function () {\n        switch (this.fg & 50331648) {\n            case 16777216:\n            case 33554432: return this.fg & 255;\n            case 50331648: return this.fg & 16777215;\n            default: return -1;\n        }\n    };\n    AttributeData.prototype.getBgColor = function () {\n        switch (this.bg & 50331648) {\n            case 16777216:\n            case 33554432: return this.bg & 255;\n            case 50331648: return this.bg & 16777215;\n            default: return -1;\n        }\n    };\n    return AttributeData;\n}());\nexports.AttributeData = AttributeData;\nexports.DEFAULT_ATTR_DATA = Object.freeze(new AttributeData());\nvar CellData = (function (_super) {\n    __extends(CellData, _super);\n    function CellData() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.content = 0;\n        _this.fg = 0;\n        _this.bg = 0;\n        _this.combinedData = '';\n        return _this;\n    }\n    CellData.fromCharData = function (value) {\n        var obj = new CellData();\n        obj.setFromCharData(value);\n        return obj;\n    };\n    CellData.prototype.isCombined = function () {\n        return this.content & 2097152;\n    };\n    CellData.prototype.getWidth = function () {\n        return this.content >> 22;\n    };\n    CellData.prototype.getChars = function () {\n        if (this.content & 2097152) {\n            return this.combinedData;\n        }\n        if (this.content & 2097151) {\n            return TextDecoder_1.stringFromCodePoint(this.content & 2097151);\n        }\n        return '';\n    };\n    CellData.prototype.getCode = function () {\n        return (this.isCombined())\n            ? this.combinedData.charCodeAt(this.combinedData.length - 1)\n            : this.content & 2097151;\n    };\n    CellData.prototype.setFromCharData = function (value) {\n        this.fg = value[exports.CHAR_DATA_ATTR_INDEX];\n        this.bg = 0;\n        var combined = false;\n        if (value[exports.CHAR_DATA_CHAR_INDEX].length > 2) {\n            combined = true;\n        }\n        else if (value[exports.CHAR_DATA_CHAR_INDEX].length === 2) {\n            var code = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(0);\n            if (0xD800 <= code && code <= 0xDBFF) {\n                var second = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(1);\n                if (0xDC00 <= second && second <= 0xDFFF) {\n                    this.content = ((code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000) | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n                }\n                else {\n                    combined = true;\n                }\n            }\n            else {\n                combined = true;\n            }\n        }\n        else {\n            this.content = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n        if (combined) {\n            this.combinedData = value[exports.CHAR_DATA_CHAR_INDEX];\n            this.content = 2097152 | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n    };\n    CellData.prototype.getAsCharData = function () {\n        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];\n    };\n    return CellData;\n}(AttributeData));\nexports.CellData = CellData;\nvar BufferLine = (function () {\n    function BufferLine(cols, fillCellData, isWrapped) {\n        if (isWrapped === void 0) { isWrapped = false; }\n        this.isWrapped = isWrapped;\n        this._combined = {};\n        this._data = new Uint32Array(cols * CELL_SIZE);\n        var cell = fillCellData || CellData.fromCharData([0, exports.NULL_CELL_CHAR, exports.NULL_CELL_WIDTH, exports.NULL_CELL_CODE]);\n        for (var i = 0; i < cols; ++i) {\n            this.setCell(i, cell);\n        }\n        this.length = cols;\n    }\n    BufferLine.prototype.get = function (index) {\n        var content = this._data[index * CELL_SIZE + 0];\n        var cp = content & 2097151;\n        return [\n            this._data[index * CELL_SIZE + 1],\n            (content & 2097152)\n                ? this._combined[index]\n                : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : '',\n            content >> 22,\n            (content & 2097152)\n                ? this._combined[index].charCodeAt(this._combined[index].length - 1)\n                : cp\n        ];\n    };\n    BufferLine.prototype.set = function (index, value) {\n        this._data[index * CELL_SIZE + 1] = value[exports.CHAR_DATA_ATTR_INDEX];\n        if (value[exports.CHAR_DATA_CHAR_INDEX].length > 1) {\n            this._combined[index] = value[1];\n            this._data[index * CELL_SIZE + 0] = index | 2097152 | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n        else {\n            this._data[index * CELL_SIZE + 0] = value[exports.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[exports.CHAR_DATA_WIDTH_INDEX] << 22);\n        }\n    };\n    BufferLine.prototype.getWidth = function (index) {\n        return this._data[index * CELL_SIZE + 0] >> 22;\n    };\n    BufferLine.prototype.hasWidth = function (index) {\n        return this._data[index * CELL_SIZE + 0] & 12582912;\n    };\n    BufferLine.prototype.getFg = function (index) {\n        return this._data[index * CELL_SIZE + 1];\n    };\n    BufferLine.prototype.getBg = function (index) {\n        return this._data[index * CELL_SIZE + 2];\n    };\n    BufferLine.prototype.hasContent = function (index) {\n        return this._data[index * CELL_SIZE + 0] & 4194303;\n    };\n    BufferLine.prototype.getCodePoint = function (index) {\n        var content = this._data[index * CELL_SIZE + 0];\n        if (content & 2097152) {\n            return this._combined[index].charCodeAt(this._combined[index].length - 1);\n        }\n        return content & 2097151;\n    };\n    BufferLine.prototype.isCombined = function (index) {\n        return this._data[index * CELL_SIZE + 0] & 2097152;\n    };\n    BufferLine.prototype.getString = function (index) {\n        var content = this._data[index * CELL_SIZE + 0];\n        if (content & 2097152) {\n            return this._combined[index];\n        }\n        if (content & 2097151) {\n            return TextDecoder_1.stringFromCodePoint(content & 2097151);\n        }\n        return '';\n    };\n    BufferLine.prototype.loadCell = function (index, cell) {\n        var startIndex = index * CELL_SIZE;\n        cell.content = this._data[startIndex + 0];\n        cell.fg = this._data[startIndex + 1];\n        cell.bg = this._data[startIndex + 2];\n        if (cell.content & 2097152) {\n            cell.combinedData = this._combined[index];\n        }\n        return cell;\n    };\n    BufferLine.prototype.setCell = function (index, cell) {\n        if (cell.content & 2097152) {\n            this._combined[index] = cell.combinedData;\n        }\n        this._data[index * CELL_SIZE + 0] = cell.content;\n        this._data[index * CELL_SIZE + 1] = cell.fg;\n        this._data[index * CELL_SIZE + 2] = cell.bg;\n    };\n    BufferLine.prototype.setCellFromCodePoint = function (index, codePoint, width, fg, bg) {\n        this._data[index * CELL_SIZE + 0] = codePoint | (width << 22);\n        this._data[index * CELL_SIZE + 1] = fg;\n        this._data[index * CELL_SIZE + 2] = bg;\n    };\n    BufferLine.prototype.addCodepointToCell = function (index, codePoint) {\n        var content = this._data[index * CELL_SIZE + 0];\n        if (content & 2097152) {\n            this._combined[index] += TextDecoder_1.stringFromCodePoint(codePoint);\n        }\n        else {\n            if (content & 2097151) {\n                this._combined[index] = TextDecoder_1.stringFromCodePoint(content & 2097151) + TextDecoder_1.stringFromCodePoint(codePoint);\n                content &= ~2097151;\n                content |= 2097152;\n            }\n            else {\n                content = codePoint | (1 << 22);\n            }\n            this._data[index * CELL_SIZE + 0] = content;\n        }\n    };\n    BufferLine.prototype.insertCells = function (pos, n, fillCellData) {\n        pos %= this.length;\n        if (n < this.length - pos) {\n            var cell = new CellData();\n            for (var i = this.length - pos - n - 1; i >= 0; --i) {\n                this.setCell(pos + n + i, this.loadCell(pos + i, cell));\n            }\n            for (var i = 0; i < n; ++i) {\n                this.setCell(pos + i, fillCellData);\n            }\n        }\n        else {\n            for (var i = pos; i < this.length; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n    };\n    BufferLine.prototype.deleteCells = function (pos, n, fillCellData) {\n        pos %= this.length;\n        if (n < this.length - pos) {\n            var cell = new CellData();\n            for (var i = 0; i < this.length - pos - n; ++i) {\n                this.setCell(pos + i, this.loadCell(pos + n + i, cell));\n            }\n            for (var i = this.length - n; i < this.length; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n        else {\n            for (var i = pos; i < this.length; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n    };\n    BufferLine.prototype.replaceCells = function (start, end, fillCellData) {\n        while (start < end && start < this.length) {\n            this.setCell(start++, fillCellData);\n        }\n    };\n    BufferLine.prototype.resize = function (cols, fillCellData) {\n        if (cols === this.length) {\n            return;\n        }\n        if (cols > this.length) {\n            var data = new Uint32Array(cols * CELL_SIZE);\n            if (this.length) {\n                if (cols * CELL_SIZE < this._data.length) {\n                    data.set(this._data.subarray(0, cols * CELL_SIZE));\n                }\n                else {\n                    data.set(this._data);\n                }\n            }\n            this._data = data;\n            for (var i = this.length; i < cols; ++i) {\n                this.setCell(i, fillCellData);\n            }\n        }\n        else {\n            if (cols) {\n                var data = new Uint32Array(cols * CELL_SIZE);\n                data.set(this._data.subarray(0, cols * CELL_SIZE));\n                this._data = data;\n                var keys = Object.keys(this._combined);\n                for (var i = 0; i < keys.length; i++) {\n                    var key = parseInt(keys[i], 10);\n                    if (key >= cols) {\n                        delete this._combined[key];\n                    }\n                }\n            }\n            else {\n                this._data = new Uint32Array(0);\n                this._combined = {};\n            }\n        }\n        this.length = cols;\n    };\n    BufferLine.prototype.fill = function (fillCellData) {\n        this._combined = {};\n        for (var i = 0; i < this.length; ++i) {\n            this.setCell(i, fillCellData);\n        }\n    };\n    BufferLine.prototype.copyFrom = function (line) {\n        if (this.length !== line.length) {\n            this._data = new Uint32Array(line._data);\n        }\n        else {\n            this._data.set(line._data);\n        }\n        this.length = line.length;\n        this._combined = {};\n        for (var el in line._combined) {\n            this._combined[el] = line._combined[el];\n        }\n        this.isWrapped = line.isWrapped;\n    };\n    BufferLine.prototype.clone = function () {\n        var newLine = new BufferLine(0);\n        newLine._data = new Uint32Array(this._data);\n        newLine.length = this.length;\n        for (var el in this._combined) {\n            newLine._combined[el] = this._combined[el];\n        }\n        newLine.isWrapped = this.isWrapped;\n        return newLine;\n    };\n    BufferLine.prototype.getTrimmedLength = function () {\n        for (var i = this.length - 1; i >= 0; --i) {\n            if ((this._data[i * CELL_SIZE + 0] & 4194303)) {\n                return i + (this._data[i * CELL_SIZE + 0] >> 22);\n            }\n        }\n        return 0;\n    };\n    BufferLine.prototype.copyCellsFrom = function (src, srcCol, destCol, length, applyInReverse) {\n        var srcData = src._data;\n        if (applyInReverse) {\n            for (var cell = length - 1; cell >= 0; cell--) {\n                for (var i = 0; i < CELL_SIZE; i++) {\n                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];\n                }\n            }\n        }\n        else {\n            for (var cell = 0; cell < length; cell++) {\n                for (var i = 0; i < CELL_SIZE; i++) {\n                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];\n                }\n            }\n        }\n        var srcCombinedKeys = Object.keys(src._combined);\n        for (var i = 0; i < srcCombinedKeys.length; i++) {\n            var key = parseInt(srcCombinedKeys[i], 10);\n            if (key >= srcCol) {\n                this._combined[key - srcCol + destCol] = src._combined[key];\n            }\n        }\n    };\n    BufferLine.prototype.translateToString = function (trimRight, startCol, endCol) {\n        if (trimRight === void 0) { trimRight = false; }\n        if (startCol === void 0) { startCol = 0; }\n        if (endCol === void 0) { endCol = this.length; }\n        if (trimRight) {\n            endCol = Math.min(endCol, this.getTrimmedLength());\n        }\n        var result = '';\n        while (startCol < endCol) {\n            var content = this._data[startCol * CELL_SIZE + 0];\n            var cp = content & 2097151;\n            result += (content & 2097152) ? this._combined[startCol] : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : exports.WHITESPACE_CELL_CHAR;\n            startCol += (content >> 22) || 1;\n        }\n        return result;\n    };\n    return BufferLine;\n}());\nexports.BufferLine = BufferLine;\n//# sourceMappingURL=BufferLine.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2 = (function () {\n    function EventEmitter2() {\n        this._listeners = [];\n    }\n    Object.defineProperty(EventEmitter2.prototype, \"event\", {\n        get: function () {\n            var _this = this;\n            if (!this._event) {\n                this._event = function (listener) {\n                    _this._listeners.push(listener);\n                    var disposable = {\n                        dispose: function () {\n                            for (var i = 0; i < _this._listeners.length; i++) {\n                                if (_this._listeners[i] === listener) {\n                                    _this._listeners.splice(i, 1);\n                                    return;\n                                }\n                            }\n                        }\n                    };\n                    return disposable;\n                };\n            }\n            return this._event;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EventEmitter2.prototype.fire = function (data) {\n        var queue = [];\n        for (var i = 0; i < this._listeners.length; i++) {\n            queue.push(this._listeners[i]);\n        }\n        for (var i = 0; i < queue.length; i++) {\n            queue[i].call(undefined, data);\n        }\n    };\n    return EventEmitter2;\n}());\nexports.EventEmitter2 = EventEmitter2;\n//# sourceMappingURL=EventEmitter2.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.INVERTED_DEFAULT_COLOR = 257;\nexports.DIM_OPACITY = 0.5;\nexports.CHAR_ATLAS_CELL_SPACING = 1;\n//# sourceMappingURL=Types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction addDisposableDomListener(node, type, handler, useCapture) {\n    node.addEventListener(type, handler, useCapture);\n    return {\n        dispose: function () {\n            if (!handler) {\n                return;\n            }\n            node.removeEventListener(type, handler, useCapture);\n        }\n    };\n}\nexports.addDisposableDomListener = addDisposableDomListener;\n//# sourceMappingURL=Lifecycle.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isNode = (typeof navigator === 'undefined') ? true : false;\nvar userAgent = (isNode) ? 'node' : navigator.userAgent;\nvar platform = (isNode) ? 'node' : navigator.platform;\nexports.isFirefox = !!~userAgent.indexOf('Firefox');\nexports.isSafari = /^((?!chrome|android).)*safari/i.test(userAgent);\nexports.isMSIE = !!~userAgent.indexOf('MSIE') || !!~userAgent.indexOf('Trident');\nexports.isMac = contains(['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'], platform);\nexports.isIpad = platform === 'iPad';\nexports.isIphone = platform === 'iPhone';\nexports.isMSWindows = contains(['Windows', 'Win16', 'Win32', 'WinCE'], platform);\nexports.isLinux = platform.indexOf('Linux') >= 0;\nfunction contains(arr, el) {\n    return arr.indexOf(el) >= 0;\n}\n//# sourceMappingURL=Platform.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_COLOR = 256;\n//# sourceMappingURL=Types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar C0;\n(function (C0) {\n    C0.NUL = '\\x00';\n    C0.SOH = '\\x01';\n    C0.STX = '\\x02';\n    C0.ETX = '\\x03';\n    C0.EOT = '\\x04';\n    C0.ENQ = '\\x05';\n    C0.ACK = '\\x06';\n    C0.BEL = '\\x07';\n    C0.BS = '\\x08';\n    C0.HT = '\\x09';\n    C0.LF = '\\x0a';\n    C0.VT = '\\x0b';\n    C0.FF = '\\x0c';\n    C0.CR = '\\x0d';\n    C0.SO = '\\x0e';\n    C0.SI = '\\x0f';\n    C0.DLE = '\\x10';\n    C0.DC1 = '\\x11';\n    C0.DC2 = '\\x12';\n    C0.DC3 = '\\x13';\n    C0.DC4 = '\\x14';\n    C0.NAK = '\\x15';\n    C0.SYN = '\\x16';\n    C0.ETB = '\\x17';\n    C0.CAN = '\\x18';\n    C0.EM = '\\x19';\n    C0.SUB = '\\x1a';\n    C0.ESC = '\\x1b';\n    C0.FS = '\\x1c';\n    C0.GS = '\\x1d';\n    C0.RS = '\\x1e';\n    C0.US = '\\x1f';\n    C0.SP = '\\x20';\n    C0.DEL = '\\x7f';\n})(C0 = exports.C0 || (exports.C0 = {}));\nvar C1;\n(function (C1) {\n    C1.PAD = '\\x80';\n    C1.HOP = '\\x81';\n    C1.BPH = '\\x82';\n    C1.NBH = '\\x83';\n    C1.IND = '\\x84';\n    C1.NEL = '\\x85';\n    C1.SSA = '\\x86';\n    C1.ESA = '\\x87';\n    C1.HTS = '\\x88';\n    C1.HTJ = '\\x89';\n    C1.VTS = '\\x8a';\n    C1.PLD = '\\x8b';\n    C1.PLU = '\\x8c';\n    C1.RI = '\\x8d';\n    C1.SS2 = '\\x8e';\n    C1.SS3 = '\\x8f';\n    C1.DCS = '\\x90';\n    C1.PU1 = '\\x91';\n    C1.PU2 = '\\x92';\n    C1.STS = '\\x93';\n    C1.CCH = '\\x94';\n    C1.MW = '\\x95';\n    C1.SPA = '\\x96';\n    C1.EPA = '\\x97';\n    C1.SOS = '\\x98';\n    C1.SGCI = '\\x99';\n    C1.SCI = '\\x9a';\n    C1.CSI = '\\x9b';\n    C1.ST = '\\x9c';\n    C1.OSC = '\\x9d';\n    C1.PM = '\\x9e';\n    C1.APC = '\\x9f';\n})(C1 = exports.C1 || (exports.C1 = {}));\n//# sourceMappingURL=EscapeSequences.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"../common/Types\");\nvar Types_2 = require(\"./atlas/Types\");\nvar CharAtlasCache_1 = require(\"./atlas/CharAtlasCache\");\nvar BufferLine_1 = require(\"../core/buffer/BufferLine\");\nvar BaseRenderLayer = (function () {\n    function BaseRenderLayer(_container, id, zIndex, _alpha, _colors) {\n        this._container = _container;\n        this._alpha = _alpha;\n        this._colors = _colors;\n        this._scaledCharWidth = 0;\n        this._scaledCharHeight = 0;\n        this._scaledCellWidth = 0;\n        this._scaledCellHeight = 0;\n        this._scaledCharLeft = 0;\n        this._scaledCharTop = 0;\n        this._currentGlyphIdentifier = {\n            chars: '',\n            code: 0,\n            bg: 0,\n            fg: 0,\n            bold: false,\n            dim: false,\n            italic: false\n        };\n        this._canvas = document.createElement('canvas');\n        this._canvas.classList.add(\"xterm-\" + id + \"-layer\");\n        this._canvas.style.zIndex = zIndex.toString();\n        this._initCanvas();\n        this._container.appendChild(this._canvas);\n    }\n    BaseRenderLayer.prototype.dispose = function () {\n        this._container.removeChild(this._canvas);\n        if (this._charAtlas) {\n            this._charAtlas.dispose();\n        }\n    };\n    BaseRenderLayer.prototype._initCanvas = function () {\n        this._ctx = this._canvas.getContext('2d', { alpha: this._alpha });\n        if (!this._alpha) {\n            this.clearAll();\n        }\n    };\n    BaseRenderLayer.prototype.onOptionsChanged = function (terminal) { };\n    BaseRenderLayer.prototype.onBlur = function (terminal) { };\n    BaseRenderLayer.prototype.onFocus = function (terminal) { };\n    BaseRenderLayer.prototype.onCursorMove = function (terminal) { };\n    BaseRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) { };\n    BaseRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {\n        if (columnSelectMode === void 0) { columnSelectMode = false; }\n    };\n    BaseRenderLayer.prototype.setColors = function (terminal, colorSet) {\n        this._refreshCharAtlas(terminal, colorSet);\n    };\n    BaseRenderLayer.prototype.setTransparency = function (terminal, alpha) {\n        if (alpha === this._alpha) {\n            return;\n        }\n        var oldCanvas = this._canvas;\n        this._alpha = alpha;\n        this._canvas = this._canvas.cloneNode();\n        this._initCanvas();\n        this._container.replaceChild(this._canvas, oldCanvas);\n        this._refreshCharAtlas(terminal, this._colors);\n        this.onGridChanged(terminal, 0, terminal.rows - 1);\n    };\n    BaseRenderLayer.prototype._refreshCharAtlas = function (terminal, colorSet) {\n        if (this._scaledCharWidth <= 0 && this._scaledCharHeight <= 0) {\n            return;\n        }\n        this._charAtlas = CharAtlasCache_1.acquireCharAtlas(terminal, colorSet, this._scaledCharWidth, this._scaledCharHeight);\n        this._charAtlas.warmUp();\n    };\n    BaseRenderLayer.prototype.resize = function (terminal, dim) {\n        this._scaledCellWidth = dim.scaledCellWidth;\n        this._scaledCellHeight = dim.scaledCellHeight;\n        this._scaledCharWidth = dim.scaledCharWidth;\n        this._scaledCharHeight = dim.scaledCharHeight;\n        this._scaledCharLeft = dim.scaledCharLeft;\n        this._scaledCharTop = dim.scaledCharTop;\n        this._canvas.width = dim.scaledCanvasWidth;\n        this._canvas.height = dim.scaledCanvasHeight;\n        this._canvas.style.width = dim.canvasWidth + \"px\";\n        this._canvas.style.height = dim.canvasHeight + \"px\";\n        if (!this._alpha) {\n            this.clearAll();\n        }\n        this._refreshCharAtlas(terminal, this._colors);\n    };\n    BaseRenderLayer.prototype.fillCells = function (x, y, width, height) {\n        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n    };\n    BaseRenderLayer.prototype.fillBottomLineAtCells = function (x, y, width) {\n        if (width === void 0) { width = 1; }\n        this._ctx.fillRect(x * this._scaledCellWidth, (y + 1) * this._scaledCellHeight - window.devicePixelRatio - 1, width * this._scaledCellWidth, window.devicePixelRatio);\n    };\n    BaseRenderLayer.prototype.fillLeftLineAtCell = function (x, y) {\n        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, window.devicePixelRatio, this._scaledCellHeight);\n    };\n    BaseRenderLayer.prototype.strokeRectAtCell = function (x, y, width, height) {\n        this._ctx.lineWidth = window.devicePixelRatio;\n        this._ctx.strokeRect(x * this._scaledCellWidth + window.devicePixelRatio / 2, y * this._scaledCellHeight + (window.devicePixelRatio / 2), width * this._scaledCellWidth - window.devicePixelRatio, (height * this._scaledCellHeight) - window.devicePixelRatio);\n    };\n    BaseRenderLayer.prototype.clearAll = function () {\n        if (this._alpha) {\n            this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\n        }\n        else {\n            this._ctx.fillStyle = this._colors.background.css;\n            this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);\n        }\n    };\n    BaseRenderLayer.prototype.clearCells = function (x, y, width, height) {\n        if (this._alpha) {\n            this._ctx.clearRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n        }\n        else {\n            this._ctx.fillStyle = this._colors.background.css;\n            this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);\n        }\n    };\n    BaseRenderLayer.prototype.fillCharTrueColor = function (terminal, cell, x, y) {\n        this._ctx.font = this._getFont(terminal, false, false);\n        this._ctx.textBaseline = 'middle';\n        this._clipRow(terminal, y);\n        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);\n    };\n    BaseRenderLayer.prototype.drawChars = function (terminal, cell, x, y) {\n        if (cell.isFgRGB() || cell.isBgRGB()) {\n            this._drawUncachedChars(terminal, cell, x, y);\n            return;\n        }\n        var fg;\n        var bg;\n        if (cell.isInverse()) {\n            fg = (cell.isBgDefault()) ? Types_2.INVERTED_DEFAULT_COLOR : cell.getBgColor();\n            bg = (cell.isFgDefault()) ? Types_2.INVERTED_DEFAULT_COLOR : cell.getFgColor();\n        }\n        else {\n            bg = (cell.isBgDefault()) ? Types_1.DEFAULT_COLOR : cell.getBgColor();\n            fg = (cell.isFgDefault()) ? Types_1.DEFAULT_COLOR : cell.getFgColor();\n        }\n        var drawInBrightColor = terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8 && fg !== Types_2.INVERTED_DEFAULT_COLOR;\n        fg += drawInBrightColor ? 8 : 0;\n        this._currentGlyphIdentifier.chars = cell.getChars() || BufferLine_1.WHITESPACE_CELL_CHAR;\n        this._currentGlyphIdentifier.code = cell.getCode() || BufferLine_1.WHITESPACE_CELL_CODE;\n        this._currentGlyphIdentifier.bg = bg;\n        this._currentGlyphIdentifier.fg = fg;\n        this._currentGlyphIdentifier.bold = cell.isBold() && terminal.options.enableBold;\n        this._currentGlyphIdentifier.dim = !!cell.isDim();\n        this._currentGlyphIdentifier.italic = !!cell.isItalic();\n        var atlasDidDraw = this._charAtlas && this._charAtlas.draw(this._ctx, this._currentGlyphIdentifier, x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop);\n        if (!atlasDidDraw) {\n            this._drawUncachedChars(terminal, cell, x, y);\n        }\n    };\n    BaseRenderLayer.prototype._drawUncachedChars = function (terminal, cell, x, y) {\n        this._ctx.save();\n        this._ctx.font = this._getFont(terminal, cell.isBold() && terminal.options.enableBold, !!cell.isItalic());\n        this._ctx.textBaseline = 'middle';\n        if (cell.isInverse()) {\n            if (cell.isBgDefault()) {\n                this._ctx.fillStyle = this._colors.background.css;\n            }\n            else if (cell.isBgRGB()) {\n                this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + \")\";\n            }\n            else {\n                this._ctx.fillStyle = this._colors.ansi[cell.getBgColor()].css;\n            }\n        }\n        else {\n            if (cell.isFgDefault()) {\n                this._ctx.fillStyle = this._colors.foreground.css;\n            }\n            else if (cell.isFgRGB()) {\n                this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + \")\";\n            }\n            else {\n                var fg = cell.getFgColor();\n                if (terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {\n                    fg += 8;\n                }\n                this._ctx.fillStyle = this._colors.ansi[fg].css;\n            }\n        }\n        this._clipRow(terminal, y);\n        if (cell.isDim()) {\n            this._ctx.globalAlpha = Types_2.DIM_OPACITY;\n        }\n        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);\n        this._ctx.restore();\n    };\n    BaseRenderLayer.prototype._clipRow = function (terminal, y) {\n        this._ctx.beginPath();\n        this._ctx.rect(0, y * this._scaledCellHeight, terminal.cols * this._scaledCellWidth, this._scaledCellHeight);\n        this._ctx.clip();\n    };\n    BaseRenderLayer.prototype._getFont = function (terminal, isBold, isItalic) {\n        var fontWeight = isBold ? terminal.options.fontWeightBold : terminal.options.fontWeight;\n        var fontStyle = isItalic ? 'italic' : '';\n        return fontStyle + \" \" + fontWeight + \" \" + terminal.options.fontSize * window.devicePixelRatio + \"px \" + terminal.options.fontFamily;\n    };\n    return BaseRenderLayer;\n}());\nexports.BaseRenderLayer = BaseRenderLayer;\n//# sourceMappingURL=BaseRenderLayer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Terminal_1 = require(\"../Terminal\");\nvar Strings = require(\"../Strings\");\nvar AddonManager_1 = require(\"./AddonManager\");\nvar Terminal = (function () {\n    function Terminal(options) {\n        this._core = new Terminal_1.Terminal(options);\n        this._addonManager = new AddonManager_1.AddonManager();\n    }\n    Object.defineProperty(Terminal.prototype, \"onCursorMove\", {\n        get: function () { return this._core.onCursorMove; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onLineFeed\", {\n        get: function () { return this._core.onLineFeed; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onSelectionChange\", {\n        get: function () { return this._core.onSelectionChange; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onData\", {\n        get: function () { return this._core.onData; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onTitleChange\", {\n        get: function () { return this._core.onTitleChange; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onScroll\", {\n        get: function () { return this._core.onScroll; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onKey\", {\n        get: function () { return this._core.onKey; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onRender\", {\n        get: function () { return this._core.onRender; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onResize\", {\n        get: function () { return this._core.onResize; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"element\", {\n        get: function () { return this._core.element; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"textarea\", {\n        get: function () { return this._core.textarea; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"rows\", {\n        get: function () { return this._core.rows; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"cols\", {\n        get: function () { return this._core.cols; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"buffer\", {\n        get: function () { return new BufferApiView(this._core.buffer); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"markers\", {\n        get: function () { return this._core.markers; },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.blur = function () {\n        this._core.blur();\n    };\n    Terminal.prototype.focus = function () {\n        this._core.focus();\n    };\n    Terminal.prototype.on = function (type, listener) {\n        this._core.on(type, listener);\n    };\n    Terminal.prototype.off = function (type, listener) {\n        this._core.off(type, listener);\n    };\n    Terminal.prototype.emit = function (type, data) {\n        this._core.emit(type, data);\n    };\n    Terminal.prototype.addDisposableListener = function (type, handler) {\n        return this._core.addDisposableListener(type, handler);\n    };\n    Terminal.prototype.resize = function (columns, rows) {\n        this._core.resize(columns, rows);\n    };\n    Terminal.prototype.writeln = function (data) {\n        this._core.writeln(data);\n    };\n    Terminal.prototype.open = function (parent) {\n        this._core.open(parent);\n    };\n    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {\n        this._core.attachCustomKeyEventHandler(customKeyEventHandler);\n    };\n    Terminal.prototype.addCsiHandler = function (flag, callback) {\n        return this._core.addCsiHandler(flag, callback);\n    };\n    Terminal.prototype.addOscHandler = function (ident, callback) {\n        return this._core.addOscHandler(ident, callback);\n    };\n    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {\n        return this._core.registerLinkMatcher(regex, handler, options);\n    };\n    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {\n        this._core.deregisterLinkMatcher(matcherId);\n    };\n    Terminal.prototype.registerCharacterJoiner = function (handler) {\n        return this._core.registerCharacterJoiner(handler);\n    };\n    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {\n        this._core.deregisterCharacterJoiner(joinerId);\n    };\n    Terminal.prototype.addMarker = function (cursorYOffset) {\n        return this._core.addMarker(cursorYOffset);\n    };\n    Terminal.prototype.hasSelection = function () {\n        return this._core.hasSelection();\n    };\n    Terminal.prototype.select = function (column, row, length) {\n        this._core.select(column, row, length);\n    };\n    Terminal.prototype.getSelection = function () {\n        return this._core.getSelection();\n    };\n    Terminal.prototype.getSelectionPosition = function () {\n        return this._core.getSelectionPosition();\n    };\n    Terminal.prototype.clearSelection = function () {\n        this._core.clearSelection();\n    };\n    Terminal.prototype.selectAll = function () {\n        this._core.selectAll();\n    };\n    Terminal.prototype.selectLines = function (start, end) {\n        this._core.selectLines(start, end);\n    };\n    Terminal.prototype.dispose = function () {\n        this._addonManager.dispose();\n        this._core.dispose();\n    };\n    Terminal.prototype.destroy = function () {\n        this._core.destroy();\n    };\n    Terminal.prototype.scrollLines = function (amount) {\n        this._core.scrollLines(amount);\n    };\n    Terminal.prototype.scrollPages = function (pageCount) {\n        this._core.scrollPages(pageCount);\n    };\n    Terminal.prototype.scrollToTop = function () {\n        this._core.scrollToTop();\n    };\n    Terminal.prototype.scrollToBottom = function () {\n        this._core.scrollToBottom();\n    };\n    Terminal.prototype.scrollToLine = function (line) {\n        this._core.scrollToLine(line);\n    };\n    Terminal.prototype.clear = function () {\n        this._core.clear();\n    };\n    Terminal.prototype.write = function (data) {\n        this._core.write(data);\n    };\n    Terminal.prototype.writeUtf8 = function (data) {\n        this._core.writeUtf8(data);\n    };\n    Terminal.prototype.getOption = function (key) {\n        return this._core.getOption(key);\n    };\n    Terminal.prototype.setOption = function (key, value) {\n        this._core.setOption(key, value);\n    };\n    Terminal.prototype.refresh = function (start, end) {\n        this._core.refresh(start, end);\n    };\n    Terminal.prototype.reset = function () {\n        this._core.reset();\n    };\n    Terminal.applyAddon = function (addon) {\n        addon.apply(Terminal);\n    };\n    Terminal.prototype.loadAddon = function (addon) {\n        return this._addonManager.loadAddon(this, addon);\n    };\n    Object.defineProperty(Terminal, \"strings\", {\n        get: function () {\n            return Strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Terminal;\n}());\nexports.Terminal = Terminal;\nvar BufferApiView = (function () {\n    function BufferApiView(_buffer) {\n        this._buffer = _buffer;\n    }\n    Object.defineProperty(BufferApiView.prototype, \"cursorY\", {\n        get: function () { return this._buffer.y; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"cursorX\", {\n        get: function () { return this._buffer.x; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"viewportY\", {\n        get: function () { return this._buffer.ydisp; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"baseY\", {\n        get: function () { return this._buffer.ybase; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferApiView.prototype, \"length\", {\n        get: function () { return this._buffer.lines.length; },\n        enumerable: true,\n        configurable: true\n    });\n    BufferApiView.prototype.getLine = function (y) {\n        var line = this._buffer.lines.get(y);\n        if (!line) {\n            return undefined;\n        }\n        return new BufferLineApiView(line);\n    };\n    return BufferApiView;\n}());\nvar BufferLineApiView = (function () {\n    function BufferLineApiView(_line) {\n        this._line = _line;\n    }\n    Object.defineProperty(BufferLineApiView.prototype, \"isWrapped\", {\n        get: function () { return this._line.isWrapped; },\n        enumerable: true,\n        configurable: true\n    });\n    BufferLineApiView.prototype.getCell = function (x) {\n        if (x < 0 || x >= this._line.length) {\n            return undefined;\n        }\n        return new BufferCellApiView(this._line, x);\n    };\n    BufferLineApiView.prototype.translateToString = function (trimRight, startColumn, endColumn) {\n        return this._line.translateToString(trimRight, startColumn, endColumn);\n    };\n    return BufferLineApiView;\n}());\nvar BufferCellApiView = (function () {\n    function BufferCellApiView(_line, _x) {\n        this._line = _line;\n        this._x = _x;\n    }\n    Object.defineProperty(BufferCellApiView.prototype, \"char\", {\n        get: function () { return this._line.getString(this._x); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferCellApiView.prototype, \"width\", {\n        get: function () { return this._line.getWidth(this._x); },\n        enumerable: true,\n        configurable: true\n    });\n    return BufferCellApiView;\n}());\n//# sourceMappingURL=Terminal.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction stringFromCodePoint(codePoint) {\n    if (codePoint > 0xFFFF) {\n        codePoint -= 0x10000;\n        return String.fromCharCode((codePoint >> 10) + 0xD800) + String.fromCharCode((codePoint % 0x400) + 0xDC00);\n    }\n    return String.fromCharCode(codePoint);\n}\nexports.stringFromCodePoint = stringFromCodePoint;\nfunction utf32ToString(data, start, end) {\n    if (start === void 0) { start = 0; }\n    if (end === void 0) { end = data.length; }\n    var result = '';\n    for (var i = start; i < end; ++i) {\n        var codepoint = data[i];\n        if (codepoint > 0xFFFF) {\n            codepoint -= 0x10000;\n            result += String.fromCharCode((codepoint >> 10) + 0xD800) + String.fromCharCode((codepoint % 0x400) + 0xDC00);\n        }\n        else {\n            result += String.fromCharCode(codepoint);\n        }\n    }\n    return result;\n}\nexports.utf32ToString = utf32ToString;\nvar StringToUtf32 = (function () {\n    function StringToUtf32() {\n        this._interim = 0;\n    }\n    StringToUtf32.prototype.clear = function () {\n        this._interim = 0;\n    };\n    StringToUtf32.prototype.decode = function (input, target) {\n        var length = input.length;\n        if (!length) {\n            return 0;\n        }\n        var size = 0;\n        var startPos = 0;\n        if (this._interim) {\n            var second = input.charCodeAt(startPos++);\n            if (0xDC00 <= second && second <= 0xDFFF) {\n                target[size++] = (this._interim - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n            }\n            else {\n                target[size++] = this._interim;\n                target[size++] = second;\n            }\n            this._interim = 0;\n        }\n        for (var i = startPos; i < length; ++i) {\n            var code = input.charCodeAt(i);\n            if (0xD800 <= code && code <= 0xDBFF) {\n                if (++i >= length) {\n                    this._interim = code;\n                    return size;\n                }\n                var second = input.charCodeAt(i);\n                if (0xDC00 <= second && second <= 0xDFFF) {\n                    target[size++] = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n                }\n                else {\n                    target[size++] = code;\n                    target[size++] = second;\n                }\n                continue;\n            }\n            target[size++] = code;\n        }\n        return size;\n    };\n    return StringToUtf32;\n}());\nexports.StringToUtf32 = StringToUtf32;\nvar Utf8ToUtf32 = (function () {\n    function Utf8ToUtf32() {\n        this.interim = new Uint8Array(3);\n    }\n    Utf8ToUtf32.prototype.clear = function () {\n        this.interim.fill(0);\n    };\n    Utf8ToUtf32.prototype.decode = function (input, target) {\n        var length = input.length;\n        if (!length) {\n            return 0;\n        }\n        var size = 0;\n        var byte1;\n        var byte2;\n        var byte3;\n        var byte4;\n        var codepoint = 0;\n        var startPos = 0;\n        if (this.interim[0]) {\n            var discardInterim = false;\n            var cp = this.interim[0];\n            cp &= ((((cp & 0xE0) === 0xC0)) ? 0x1F : (((cp & 0xF0) === 0xE0)) ? 0x0F : 0x07);\n            var pos = 0;\n            var tmp = void 0;\n            while ((tmp = this.interim[++pos] & 0x3F) && pos < 4) {\n                cp <<= 6;\n                cp |= tmp;\n            }\n            var type = (((this.interim[0] & 0xE0) === 0xC0)) ? 2 : (((this.interim[0] & 0xF0) === 0xE0)) ? 3 : 4;\n            var missing = type - pos;\n            while (startPos < missing) {\n                if (startPos >= length) {\n                    return 0;\n                }\n                tmp = input[startPos++];\n                if ((tmp & 0xC0) !== 0x80) {\n                    startPos--;\n                    discardInterim = true;\n                    break;\n                }\n                else {\n                    this.interim[pos++] = tmp;\n                    cp <<= 6;\n                    cp |= tmp & 0x3F;\n                }\n            }\n            if (!discardInterim) {\n                if (type === 2) {\n                    if (cp < 0x80) {\n                        startPos--;\n                    }\n                    else {\n                        target[size++] = cp;\n                    }\n                }\n                else if (type === 3) {\n                    if (cp < 0x0800 || (cp >= 0xD800 && cp <= 0xDFFF)) {\n                    }\n                    else {\n                        target[size++] = cp;\n                    }\n                }\n                else {\n                    if (codepoint < 0x010000 || codepoint > 0x10FFFF) {\n                    }\n                    else {\n                        target[size++] = cp;\n                    }\n                }\n            }\n            this.interim.fill(0);\n        }\n        var fourStop = length - 4;\n        var i = startPos;\n        while (i < length) {\n            while (i < fourStop\n                && !((byte1 = input[i]) & 0x80)\n                && !((byte2 = input[i + 1]) & 0x80)\n                && !((byte3 = input[i + 2]) & 0x80)\n                && !((byte4 = input[i + 3]) & 0x80)) {\n                target[size++] = byte1;\n                target[size++] = byte2;\n                target[size++] = byte3;\n                target[size++] = byte4;\n                i += 4;\n            }\n            byte1 = input[i++];\n            if (byte1 < 0x80) {\n                target[size++] = byte1;\n            }\n            else if ((byte1 & 0xE0) === 0xC0) {\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    return size;\n                }\n                byte2 = input[i++];\n                if ((byte2 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                codepoint = (byte1 & 0x1F) << 6 | (byte2 & 0x3F);\n                if (codepoint < 0x80) {\n                    i--;\n                    continue;\n                }\n                target[size++] = codepoint;\n            }\n            else if ((byte1 & 0xF0) === 0xE0) {\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    return size;\n                }\n                byte2 = input[i++];\n                if ((byte2 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    this.interim[1] = byte2;\n                    return size;\n                }\n                byte3 = input[i++];\n                if ((byte3 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                codepoint = (byte1 & 0x0F) << 12 | (byte2 & 0x3F) << 6 | (byte3 & 0x3F);\n                if (codepoint < 0x0800 || (codepoint >= 0xD800 && codepoint <= 0xDFFF)) {\n                    continue;\n                }\n                target[size++] = codepoint;\n            }\n            else if ((byte1 & 0xF8) === 0xF0) {\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    return size;\n                }\n                byte2 = input[i++];\n                if ((byte2 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    this.interim[1] = byte2;\n                    return size;\n                }\n                byte3 = input[i++];\n                if ((byte3 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                if (i >= length) {\n                    this.interim[0] = byte1;\n                    this.interim[1] = byte2;\n                    this.interim[2] = byte3;\n                    return size;\n                }\n                byte4 = input[i++];\n                if ((byte4 & 0xC0) !== 0x80) {\n                    i--;\n                    continue;\n                }\n                codepoint = (byte1 & 0x07) << 18 | (byte2 & 0x3F) << 12 | (byte3 & 0x3F) << 6 | (byte4 & 0x3F);\n                if (codepoint < 0x010000 || codepoint > 0x10FFFF) {\n                    continue;\n                }\n                target[size++] = codepoint;\n            }\n            else {\n            }\n        }\n        return size;\n    };\n    return Utf8ToUtf32;\n}());\nexports.Utf8ToUtf32 = Utf8ToUtf32;\n//# sourceMappingURL=TextDecoder.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"../../common/Types\");\nfunction generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors) {\n    var clonedColors = {\n        foreground: colors.foreground,\n        background: colors.background,\n        cursor: null,\n        cursorAccent: null,\n        selection: null,\n        ansi: colors.ansi.slice(0, 16)\n    };\n    return {\n        type: terminal.options.experimentalCharAtlas,\n        devicePixelRatio: window.devicePixelRatio,\n        scaledCharWidth: scaledCharWidth,\n        scaledCharHeight: scaledCharHeight,\n        fontFamily: terminal.options.fontFamily,\n        fontSize: terminal.options.fontSize,\n        fontWeight: terminal.options.fontWeight,\n        fontWeightBold: terminal.options.fontWeightBold,\n        allowTransparency: terminal.options.allowTransparency,\n        colors: clonedColors\n    };\n}\nexports.generateConfig = generateConfig;\nfunction configEquals(a, b) {\n    for (var i = 0; i < a.colors.ansi.length; i++) {\n        if (a.colors.ansi[i].rgba !== b.colors.ansi[i].rgba) {\n            return false;\n        }\n    }\n    return a.type === b.type &&\n        a.devicePixelRatio === b.devicePixelRatio &&\n        a.fontFamily === b.fontFamily &&\n        a.fontSize === b.fontSize &&\n        a.fontWeight === b.fontWeight &&\n        a.fontWeightBold === b.fontWeightBold &&\n        a.allowTransparency === b.allowTransparency &&\n        a.scaledCharWidth === b.scaledCharWidth &&\n        a.scaledCharHeight === b.scaledCharHeight &&\n        a.colors.foreground === b.colors.foreground &&\n        a.colors.background === b.colors.background;\n}\nexports.configEquals = configEquals;\nfunction is256Color(colorCode) {\n    return colorCode < Types_1.DEFAULT_COLOR;\n}\nexports.is256Color = is256Color;\n//# sourceMappingURL=CharAtlasUtils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseCharAtlas = (function () {\n    function BaseCharAtlas() {\n        this._didWarmUp = false;\n    }\n    BaseCharAtlas.prototype.dispose = function () { };\n    BaseCharAtlas.prototype.warmUp = function () {\n        if (!this._didWarmUp) {\n            this._doWarmUp();\n            this._didWarmUp = true;\n        }\n    };\n    BaseCharAtlas.prototype._doWarmUp = function () { };\n    BaseCharAtlas.prototype.beginFrame = function () { };\n    return BaseCharAtlas;\n}());\nexports.default = BaseCharAtlas;\n//# sourceMappingURL=BaseCharAtlas.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.blankLine = 'Blank line';\nexports.promptLabel = 'Terminal input';\nexports.tooMuchOutput = 'Too much output to announce, navigate to rows manually to read';\n//# sourceMappingURL=Strings.js.map","module.exports = require(\"regenerator-runtime\");\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CircularList_1 = require(\"./common/CircularList\");\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nvar BufferReflow_1 = require(\"./core/buffer/BufferReflow\");\nvar Marker_1 = require(\"./core/buffer/Marker\");\nexports.MAX_BUFFER_SIZE = 4294967295;\nvar Buffer = (function () {\n    function Buffer(_terminal, _hasScrollback) {\n        this._terminal = _terminal;\n        this._hasScrollback = _hasScrollback;\n        this.savedCurAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n        this.markers = [];\n        this._nullCell = BufferLine_1.CellData.fromCharData([0, BufferLine_1.NULL_CELL_CHAR, BufferLine_1.NULL_CELL_WIDTH, BufferLine_1.NULL_CELL_CODE]);\n        this._whitespaceCell = BufferLine_1.CellData.fromCharData([0, BufferLine_1.WHITESPACE_CELL_CHAR, BufferLine_1.WHITESPACE_CELL_WIDTH, BufferLine_1.WHITESPACE_CELL_CODE]);\n        this._cols = this._terminal.cols;\n        this._rows = this._terminal.rows;\n        this.clear();\n    }\n    Buffer.prototype.getNullCell = function (attr) {\n        if (attr) {\n            this._nullCell.fg = attr.fg;\n            this._nullCell.bg = attr.bg;\n        }\n        else {\n            this._nullCell.fg = 0;\n            this._nullCell.bg = 0;\n        }\n        return this._nullCell;\n    };\n    Buffer.prototype.getWhitespaceCell = function (attr) {\n        if (attr) {\n            this._whitespaceCell.fg = attr.fg;\n            this._whitespaceCell.bg = attr.bg;\n        }\n        else {\n            this._whitespaceCell.fg = 0;\n            this._whitespaceCell.bg = 0;\n        }\n        return this._whitespaceCell;\n    };\n    Buffer.prototype.getBlankLine = function (attr, isWrapped) {\n        return new BufferLine_1.BufferLine(this._terminal.cols, this.getNullCell(attr), isWrapped);\n    };\n    Object.defineProperty(Buffer.prototype, \"hasScrollback\", {\n        get: function () {\n            return this._hasScrollback && this.lines.maxLength > this._rows;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Buffer.prototype, \"isCursorInViewport\", {\n        get: function () {\n            var absoluteY = this.ybase + this.y;\n            var relativeY = absoluteY - this.ydisp;\n            return (relativeY >= 0 && relativeY < this._rows);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Buffer.prototype._getCorrectBufferLength = function (rows) {\n        if (!this._hasScrollback) {\n            return rows;\n        }\n        var correctBufferLength = rows + this._terminal.options.scrollback;\n        return correctBufferLength > exports.MAX_BUFFER_SIZE ? exports.MAX_BUFFER_SIZE : correctBufferLength;\n    };\n    Buffer.prototype.fillViewportRows = function (fillAttr) {\n        if (this.lines.length === 0) {\n            if (fillAttr === undefined) {\n                fillAttr = BufferLine_1.DEFAULT_ATTR_DATA;\n            }\n            var i = this._rows;\n            while (i--) {\n                this.lines.push(this.getBlankLine(fillAttr));\n            }\n        }\n    };\n    Buffer.prototype.clear = function () {\n        this.ydisp = 0;\n        this.ybase = 0;\n        this.y = 0;\n        this.x = 0;\n        this.lines = new CircularList_1.CircularList(this._getCorrectBufferLength(this._rows));\n        this.scrollTop = 0;\n        this.scrollBottom = this._rows - 1;\n        this.setupTabStops();\n    };\n    Buffer.prototype.resize = function (newCols, newRows) {\n        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);\n        var newMaxLength = this._getCorrectBufferLength(newRows);\n        if (newMaxLength > this.lines.maxLength) {\n            this.lines.maxLength = newMaxLength;\n        }\n        if (this.lines.length > 0) {\n            if (this._cols < newCols) {\n                for (var i = 0; i < this.lines.length; i++) {\n                    this.lines.get(i).resize(newCols, nullCell);\n                }\n            }\n            var addToY = 0;\n            if (this._rows < newRows) {\n                for (var y = this._rows; y < newRows; y++) {\n                    if (this.lines.length < newRows + this.ybase) {\n                        if (this.ybase > 0 && this.lines.length <= this.ybase + this.y + addToY + 1) {\n                            this.ybase--;\n                            addToY++;\n                            if (this.ydisp > 0) {\n                                this.ydisp--;\n                            }\n                        }\n                        else {\n                            this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));\n                        }\n                    }\n                }\n            }\n            else {\n                for (var y = this._rows; y > newRows; y--) {\n                    if (this.lines.length > newRows + this.ybase) {\n                        if (this.lines.length > this.ybase + this.y + 1) {\n                            this.lines.pop();\n                        }\n                        else {\n                            this.ybase++;\n                            this.ydisp++;\n                        }\n                    }\n                }\n            }\n            if (newMaxLength < this.lines.maxLength) {\n                var amountToTrim = this.lines.length - newMaxLength;\n                if (amountToTrim > 0) {\n                    this.lines.trimStart(amountToTrim);\n                    this.ybase = Math.max(this.ybase - amountToTrim, 0);\n                    this.ydisp = Math.max(this.ydisp - amountToTrim, 0);\n                }\n                this.lines.maxLength = newMaxLength;\n            }\n            this.x = Math.min(this.x, newCols - 1);\n            this.y = Math.min(this.y, newRows - 1);\n            if (addToY) {\n                this.y += addToY;\n            }\n            this.savedY = Math.min(this.savedY, newRows - 1);\n            this.savedX = Math.min(this.savedX, newCols - 1);\n            this.scrollTop = 0;\n        }\n        this.scrollBottom = newRows - 1;\n        if (this._isReflowEnabled) {\n            this._reflow(newCols, newRows);\n            if (this._cols > newCols) {\n                for (var i = 0; i < this.lines.length; i++) {\n                    this.lines.get(i).resize(newCols, nullCell);\n                }\n            }\n        }\n        this._cols = newCols;\n        this._rows = newRows;\n    };\n    Object.defineProperty(Buffer.prototype, \"_isReflowEnabled\", {\n        get: function () {\n            return this._hasScrollback && !this._terminal.options.windowsMode;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Buffer.prototype._reflow = function (newCols, newRows) {\n        if (this._cols === newCols) {\n            return;\n        }\n        if (newCols > this._cols) {\n            this._reflowLarger(newCols, newRows);\n        }\n        else {\n            this._reflowSmaller(newCols, newRows);\n        }\n    };\n    Buffer.prototype._reflowLarger = function (newCols, newRows) {\n        var toRemove = BufferReflow_1.reflowLargerGetLinesToRemove(this.lines, this._cols, newCols, this.ybase + this.y, this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA));\n        if (toRemove.length > 0) {\n            var newLayoutResult = BufferReflow_1.reflowLargerCreateNewLayout(this.lines, toRemove);\n            BufferReflow_1.reflowLargerApplyNewLayout(this.lines, newLayoutResult.layout);\n            this._reflowLargerAdjustViewport(newCols, newRows, newLayoutResult.countRemoved);\n        }\n    };\n    Buffer.prototype._reflowLargerAdjustViewport = function (newCols, newRows, countRemoved) {\n        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);\n        var viewportAdjustments = countRemoved;\n        while (viewportAdjustments-- > 0) {\n            if (this.ybase === 0) {\n                if (this.y > 0) {\n                    this.y--;\n                }\n                if (this.lines.length < newRows) {\n                    this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));\n                }\n            }\n            else {\n                if (this.ydisp === this.ybase) {\n                    this.ydisp--;\n                }\n                this.ybase--;\n            }\n        }\n    };\n    Buffer.prototype._reflowSmaller = function (newCols, newRows) {\n        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);\n        var toInsert = [];\n        var countToInsert = 0;\n        for (var y = this.lines.length - 1; y >= 0; y--) {\n            var nextLine = this.lines.get(y);\n            if (!nextLine || !nextLine.isWrapped && nextLine.getTrimmedLength() <= newCols) {\n                continue;\n            }\n            var wrappedLines = [nextLine];\n            while (nextLine.isWrapped && y > 0) {\n                nextLine = this.lines.get(--y);\n                wrappedLines.unshift(nextLine);\n            }\n            var absoluteY = this.ybase + this.y;\n            if (absoluteY >= y && absoluteY < y + wrappedLines.length) {\n                continue;\n            }\n            var lastLineLength = wrappedLines[wrappedLines.length - 1].getTrimmedLength();\n            var destLineLengths = BufferReflow_1.reflowSmallerGetNewLineLengths(wrappedLines, this._cols, newCols);\n            var linesToAdd = destLineLengths.length - wrappedLines.length;\n            var trimmedLines = void 0;\n            if (this.ybase === 0 && this.y !== this.lines.length - 1) {\n                trimmedLines = Math.max(0, this.y - this.lines.maxLength + linesToAdd);\n            }\n            else {\n                trimmedLines = Math.max(0, this.lines.length - this.lines.maxLength + linesToAdd);\n            }\n            var newLines = [];\n            for (var i = 0; i < linesToAdd; i++) {\n                var newLine = this.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA, true);\n                newLines.push(newLine);\n            }\n            if (newLines.length > 0) {\n                toInsert.push({\n                    start: y + wrappedLines.length + countToInsert,\n                    newLines: newLines\n                });\n                countToInsert += newLines.length;\n            }\n            wrappedLines.push.apply(wrappedLines, newLines);\n            var destLineIndex = destLineLengths.length - 1;\n            var destCol = destLineLengths[destLineIndex];\n            if (destCol === 0) {\n                destLineIndex--;\n                destCol = destLineLengths[destLineIndex];\n            }\n            var srcLineIndex = wrappedLines.length - linesToAdd - 1;\n            var srcCol = lastLineLength;\n            while (srcLineIndex >= 0) {\n                var cellsToCopy = Math.min(srcCol, destCol);\n                wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol - cellsToCopy, destCol - cellsToCopy, cellsToCopy, true);\n                destCol -= cellsToCopy;\n                if (destCol === 0) {\n                    destLineIndex--;\n                    destCol = destLineLengths[destLineIndex];\n                }\n                srcCol -= cellsToCopy;\n                if (srcCol === 0) {\n                    srcLineIndex--;\n                    var wrappedLinesIndex = Math.max(srcLineIndex, 0);\n                    srcCol = BufferReflow_1.getWrappedLineTrimmedLength(wrappedLines, wrappedLinesIndex, this._cols);\n                }\n            }\n            for (var i = 0; i < wrappedLines.length; i++) {\n                if (destLineLengths[i] < newCols) {\n                    wrappedLines[i].setCell(destLineLengths[i], nullCell);\n                }\n            }\n            var viewportAdjustments = linesToAdd - trimmedLines;\n            while (viewportAdjustments-- > 0) {\n                if (this.ybase === 0) {\n                    if (this.y < newRows - 1) {\n                        this.y++;\n                        this.lines.pop();\n                    }\n                    else {\n                        this.ybase++;\n                        this.ydisp++;\n                    }\n                }\n                else {\n                    if (this.ybase < Math.min(this.lines.maxLength, this.lines.length + countToInsert) - newRows) {\n                        if (this.ybase === this.ydisp) {\n                            this.ydisp++;\n                        }\n                        this.ybase++;\n                    }\n                }\n            }\n        }\n        if (toInsert.length > 0) {\n            var insertEvents = [];\n            var originalLines = [];\n            for (var i = 0; i < this.lines.length; i++) {\n                originalLines.push(this.lines.get(i));\n            }\n            var originalLinesLength = this.lines.length;\n            var originalLineIndex = originalLinesLength - 1;\n            var nextToInsertIndex = 0;\n            var nextToInsert = toInsert[nextToInsertIndex];\n            this.lines.length = Math.min(this.lines.maxLength, this.lines.length + countToInsert);\n            var countInsertedSoFar = 0;\n            for (var i = Math.min(this.lines.maxLength - 1, originalLinesLength + countToInsert - 1); i >= 0; i--) {\n                if (nextToInsert && nextToInsert.start > originalLineIndex + countInsertedSoFar) {\n                    for (var nextI = nextToInsert.newLines.length - 1; nextI >= 0; nextI--) {\n                        this.lines.set(i--, nextToInsert.newLines[nextI]);\n                    }\n                    i++;\n                    insertEvents.push({\n                        index: originalLineIndex + 1,\n                        amount: nextToInsert.newLines.length\n                    });\n                    countInsertedSoFar += nextToInsert.newLines.length;\n                    nextToInsert = toInsert[++nextToInsertIndex];\n                }\n                else {\n                    this.lines.set(i, originalLines[originalLineIndex--]);\n                }\n            }\n            var insertCountEmitted = 0;\n            for (var i = insertEvents.length - 1; i >= 0; i--) {\n                insertEvents[i].index += insertCountEmitted;\n                this.lines.onInsertEmitter.fire(insertEvents[i]);\n                insertCountEmitted += insertEvents[i].amount;\n            }\n            var amountToTrim = Math.max(0, originalLinesLength + countToInsert - this.lines.maxLength);\n            if (amountToTrim > 0) {\n                this.lines.onTrimEmitter.fire(amountToTrim);\n            }\n        }\n    };\n    Buffer.prototype.stringIndexToBufferIndex = function (lineIndex, stringIndex, trimRight) {\n        if (trimRight === void 0) { trimRight = false; }\n        while (stringIndex) {\n            var line = this.lines.get(lineIndex);\n            if (!line) {\n                return [-1, -1];\n            }\n            var length_1 = (trimRight) ? line.getTrimmedLength() : line.length;\n            for (var i = 0; i < length_1; ++i) {\n                if (line.get(i)[BufferLine_1.CHAR_DATA_WIDTH_INDEX]) {\n                    stringIndex -= line.get(i)[BufferLine_1.CHAR_DATA_CHAR_INDEX].length || 1;\n                }\n                if (stringIndex < 0) {\n                    return [lineIndex, i];\n                }\n            }\n            lineIndex++;\n        }\n        return [lineIndex, 0];\n    };\n    Buffer.prototype.translateBufferLineToString = function (lineIndex, trimRight, startCol, endCol) {\n        if (startCol === void 0) { startCol = 0; }\n        var line = this.lines.get(lineIndex);\n        if (!line) {\n            return '';\n        }\n        return line.translateToString(trimRight, startCol, endCol);\n    };\n    Buffer.prototype.getWrappedRangeForLine = function (y) {\n        var first = y;\n        var last = y;\n        while (first > 0 && this.lines.get(first).isWrapped) {\n            first--;\n        }\n        while (last + 1 < this.lines.length && this.lines.get(last + 1).isWrapped) {\n            last++;\n        }\n        return { first: first, last: last };\n    };\n    Buffer.prototype.setupTabStops = function (i) {\n        if (i !== null && i !== undefined) {\n            if (!this.tabs[i]) {\n                i = this.prevStop(i);\n            }\n        }\n        else {\n            this.tabs = {};\n            i = 0;\n        }\n        for (; i < this._cols; i += this._terminal.options.tabStopWidth) {\n            this.tabs[i] = true;\n        }\n    };\n    Buffer.prototype.prevStop = function (x) {\n        if (x === null || x === undefined) {\n            x = this.x;\n        }\n        while (!this.tabs[--x] && x > 0)\n            ;\n        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;\n    };\n    Buffer.prototype.nextStop = function (x) {\n        if (x === null || x === undefined) {\n            x = this.x;\n        }\n        while (!this.tabs[++x] && x < this._cols)\n            ;\n        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;\n    };\n    Buffer.prototype.addMarker = function (y) {\n        var _this = this;\n        var marker = new Marker_1.Marker(y);\n        this.markers.push(marker);\n        marker.register(this.lines.onTrim(function (amount) {\n            marker.line -= amount;\n            if (marker.line < 0) {\n                marker.dispose();\n            }\n        }));\n        marker.register(this.lines.onInsert(function (event) {\n            if (marker.line >= event.index) {\n                marker.line += event.amount;\n            }\n        }));\n        marker.register(this.lines.onDelete(function (event) {\n            if (marker.line >= event.index && marker.line < event.index + event.amount) {\n                marker.dispose();\n            }\n            if (marker.line > event.index) {\n                marker.line -= event.amount;\n            }\n        }));\n        marker.register(marker.onDispose(function () { return _this._removeMarker(marker); }));\n        return marker;\n    };\n    Buffer.prototype._removeMarker = function (marker) {\n        this.markers.splice(this.markers.indexOf(marker), 1);\n    };\n    Buffer.prototype.iterator = function (trimRight, startIndex, endIndex, startOverscan, endOverscan) {\n        return new BufferStringIterator(this, trimRight, startIndex, endIndex, startOverscan, endOverscan);\n    };\n    return Buffer;\n}());\nexports.Buffer = Buffer;\nvar BufferStringIterator = (function () {\n    function BufferStringIterator(_buffer, _trimRight, _startIndex, _endIndex, _startOverscan, _endOverscan) {\n        if (_startIndex === void 0) { _startIndex = 0; }\n        if (_endIndex === void 0) { _endIndex = _buffer.lines.length; }\n        if (_startOverscan === void 0) { _startOverscan = 0; }\n        if (_endOverscan === void 0) { _endOverscan = 0; }\n        this._buffer = _buffer;\n        this._trimRight = _trimRight;\n        this._startIndex = _startIndex;\n        this._endIndex = _endIndex;\n        this._startOverscan = _startOverscan;\n        this._endOverscan = _endOverscan;\n        if (this._startIndex < 0) {\n            this._startIndex = 0;\n        }\n        if (this._endIndex > this._buffer.lines.length) {\n            this._endIndex = this._buffer.lines.length;\n        }\n        this._current = this._startIndex;\n    }\n    BufferStringIterator.prototype.hasNext = function () {\n        return this._current < this._endIndex;\n    };\n    BufferStringIterator.prototype.next = function () {\n        var range = this._buffer.getWrappedRangeForLine(this._current);\n        if (range.first < this._startIndex - this._startOverscan) {\n            range.first = this._startIndex - this._startOverscan;\n        }\n        if (range.last > this._endIndex + this._endOverscan) {\n            range.last = this._endIndex + this._endOverscan;\n        }\n        range.first = Math.max(range.first, 0);\n        range.last = Math.min(range.last, this._buffer.lines.length);\n        var result = '';\n        for (var i = range.first; i <= range.last; ++i) {\n            result += this._buffer.translateBufferLineToString(i, this._trimRight);\n        }\n        this._current = range.last + 1;\n        return { range: range, content: result };\n    };\n    return BufferStringIterator;\n}());\nexports.BufferStringIterator = BufferStringIterator;\n//# sourceMappingURL=Buffer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TypedArrayUtils_1 = require(\"./common/TypedArrayUtils\");\nexports.wcwidth = (function (opts) {\n    var COMBINING_BMP = [\n        [0x0300, 0x036F], [0x0483, 0x0486], [0x0488, 0x0489],\n        [0x0591, 0x05BD], [0x05BF, 0x05BF], [0x05C1, 0x05C2],\n        [0x05C4, 0x05C5], [0x05C7, 0x05C7], [0x0600, 0x0603],\n        [0x0610, 0x0615], [0x064B, 0x065E], [0x0670, 0x0670],\n        [0x06D6, 0x06E4], [0x06E7, 0x06E8], [0x06EA, 0x06ED],\n        [0x070F, 0x070F], [0x0711, 0x0711], [0x0730, 0x074A],\n        [0x07A6, 0x07B0], [0x07EB, 0x07F3], [0x0901, 0x0902],\n        [0x093C, 0x093C], [0x0941, 0x0948], [0x094D, 0x094D],\n        [0x0951, 0x0954], [0x0962, 0x0963], [0x0981, 0x0981],\n        [0x09BC, 0x09BC], [0x09C1, 0x09C4], [0x09CD, 0x09CD],\n        [0x09E2, 0x09E3], [0x0A01, 0x0A02], [0x0A3C, 0x0A3C],\n        [0x0A41, 0x0A42], [0x0A47, 0x0A48], [0x0A4B, 0x0A4D],\n        [0x0A70, 0x0A71], [0x0A81, 0x0A82], [0x0ABC, 0x0ABC],\n        [0x0AC1, 0x0AC5], [0x0AC7, 0x0AC8], [0x0ACD, 0x0ACD],\n        [0x0AE2, 0x0AE3], [0x0B01, 0x0B01], [0x0B3C, 0x0B3C],\n        [0x0B3F, 0x0B3F], [0x0B41, 0x0B43], [0x0B4D, 0x0B4D],\n        [0x0B56, 0x0B56], [0x0B82, 0x0B82], [0x0BC0, 0x0BC0],\n        [0x0BCD, 0x0BCD], [0x0C3E, 0x0C40], [0x0C46, 0x0C48],\n        [0x0C4A, 0x0C4D], [0x0C55, 0x0C56], [0x0CBC, 0x0CBC],\n        [0x0CBF, 0x0CBF], [0x0CC6, 0x0CC6], [0x0CCC, 0x0CCD],\n        [0x0CE2, 0x0CE3], [0x0D41, 0x0D43], [0x0D4D, 0x0D4D],\n        [0x0DCA, 0x0DCA], [0x0DD2, 0x0DD4], [0x0DD6, 0x0DD6],\n        [0x0E31, 0x0E31], [0x0E34, 0x0E3A], [0x0E47, 0x0E4E],\n        [0x0EB1, 0x0EB1], [0x0EB4, 0x0EB9], [0x0EBB, 0x0EBC],\n        [0x0EC8, 0x0ECD], [0x0F18, 0x0F19], [0x0F35, 0x0F35],\n        [0x0F37, 0x0F37], [0x0F39, 0x0F39], [0x0F71, 0x0F7E],\n        [0x0F80, 0x0F84], [0x0F86, 0x0F87], [0x0F90, 0x0F97],\n        [0x0F99, 0x0FBC], [0x0FC6, 0x0FC6], [0x102D, 0x1030],\n        [0x1032, 0x1032], [0x1036, 0x1037], [0x1039, 0x1039],\n        [0x1058, 0x1059], [0x1160, 0x11FF], [0x135F, 0x135F],\n        [0x1712, 0x1714], [0x1732, 0x1734], [0x1752, 0x1753],\n        [0x1772, 0x1773], [0x17B4, 0x17B5], [0x17B7, 0x17BD],\n        [0x17C6, 0x17C6], [0x17C9, 0x17D3], [0x17DD, 0x17DD],\n        [0x180B, 0x180D], [0x18A9, 0x18A9], [0x1920, 0x1922],\n        [0x1927, 0x1928], [0x1932, 0x1932], [0x1939, 0x193B],\n        [0x1A17, 0x1A18], [0x1B00, 0x1B03], [0x1B34, 0x1B34],\n        [0x1B36, 0x1B3A], [0x1B3C, 0x1B3C], [0x1B42, 0x1B42],\n        [0x1B6B, 0x1B73], [0x1DC0, 0x1DCA], [0x1DFE, 0x1DFF],\n        [0x200B, 0x200F], [0x202A, 0x202E], [0x2060, 0x2063],\n        [0x206A, 0x206F], [0x20D0, 0x20EF], [0x302A, 0x302F],\n        [0x3099, 0x309A], [0xA806, 0xA806], [0xA80B, 0xA80B],\n        [0xA825, 0xA826], [0xFB1E, 0xFB1E], [0xFE00, 0xFE0F],\n        [0xFE20, 0xFE23], [0xFEFF, 0xFEFF], [0xFFF9, 0xFFFB]\n    ];\n    var COMBINING_HIGH = [\n        [0x10A01, 0x10A03], [0x10A05, 0x10A06], [0x10A0C, 0x10A0F],\n        [0x10A38, 0x10A3A], [0x10A3F, 0x10A3F], [0x1D167, 0x1D169],\n        [0x1D173, 0x1D182], [0x1D185, 0x1D18B], [0x1D1AA, 0x1D1AD],\n        [0x1D242, 0x1D244], [0xE0001, 0xE0001], [0xE0020, 0xE007F],\n        [0xE0100, 0xE01EF]\n    ];\n    function bisearch(ucs, data) {\n        var min = 0;\n        var max = data.length - 1;\n        var mid;\n        if (ucs < data[0][0] || ucs > data[max][1]) {\n            return false;\n        }\n        while (max >= min) {\n            mid = (min + max) >> 1;\n            if (ucs > data[mid][1]) {\n                min = mid + 1;\n            }\n            else if (ucs < data[mid][0]) {\n                max = mid - 1;\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    }\n    function wcwidthHigh(ucs) {\n        if (bisearch(ucs, COMBINING_HIGH)) {\n            return 0;\n        }\n        if ((ucs >= 0x20000 && ucs <= 0x2fffd) || (ucs >= 0x30000 && ucs <= 0x3fffd)) {\n            return 2;\n        }\n        return 1;\n    }\n    var control = opts.control | 0;\n    var table = new Uint8Array(65536);\n    TypedArrayUtils_1.fill(table, 1);\n    table[0] = opts.nul;\n    TypedArrayUtils_1.fill(table, opts.control, 1, 32);\n    TypedArrayUtils_1.fill(table, opts.control, 0x7f, 0xa0);\n    TypedArrayUtils_1.fill(table, 2, 0x1100, 0x1160);\n    table[0x2329] = 2;\n    table[0x232a] = 2;\n    TypedArrayUtils_1.fill(table, 2, 0x2e80, 0xa4d0);\n    table[0x303f] = 1;\n    TypedArrayUtils_1.fill(table, 2, 0xac00, 0xd7a4);\n    TypedArrayUtils_1.fill(table, 2, 0xf900, 0xfb00);\n    TypedArrayUtils_1.fill(table, 2, 0xfe10, 0xfe1a);\n    TypedArrayUtils_1.fill(table, 2, 0xfe30, 0xfe70);\n    TypedArrayUtils_1.fill(table, 2, 0xff00, 0xff61);\n    TypedArrayUtils_1.fill(table, 2, 0xffe0, 0xffe7);\n    for (var r = 0; r < COMBINING_BMP.length; ++r) {\n        TypedArrayUtils_1.fill(table, 0, COMBINING_BMP[r][0], COMBINING_BMP[r][1] + 1);\n    }\n    return function (num) {\n        if (num < 32) {\n            return control | 0;\n        }\n        if (num < 127) {\n            return 1;\n        }\n        if (num < 65536) {\n            return table[num];\n        }\n        return wcwidthHigh(num);\n    };\n})({ nul: 0, control: 0 });\nfunction getStringCellWidth(s) {\n    var result = 0;\n    var length = s.length;\n    for (var i = 0; i < length; ++i) {\n        var code = s.charCodeAt(i);\n        if (0xD800 <= code && code <= 0xDBFF) {\n            if (++i >= length) {\n                return result + exports.wcwidth(code);\n            }\n            var second = s.charCodeAt(i);\n            if (0xDC00 <= second && second <= 0xDFFF) {\n                code = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n            }\n            else {\n                result += exports.wcwidth(second);\n            }\n        }\n        result += exports.wcwidth(code);\n    }\n    return result;\n}\nexports.getStringCellWidth = getStringCellWidth;\n//# sourceMappingURL=CharWidth.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction fill(array, value, start, end) {\n    if (array.fill) {\n        return array.fill(value, start, end);\n    }\n    return fillFallback(array, value, start, end);\n}\nexports.fill = fill;\nfunction fillFallback(array, value, start, end) {\n    if (start === void 0) { start = 0; }\n    if (end === void 0) { end = array.length; }\n    if (start >= array.length) {\n        return array;\n    }\n    start = (array.length + start) % array.length;\n    if (end >= array.length) {\n        end = array.length;\n    }\n    else {\n        end = (array.length + end) % array.length;\n    }\n    for (var i = start; i < end; ++i) {\n        array[i] = value;\n    }\n    return array;\n}\nexports.fillFallback = fillFallback;\nfunction concat(a, b) {\n    var result = new a.constructor(a.length + b.length);\n    result.set(a);\n    result.set(b, a.length);\n    return result;\n}\nexports.concat = concat;\n//# sourceMappingURL=TypedArrayUtils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CharAtlasUtils_1 = require(\"./CharAtlasUtils\");\nvar DynamicCharAtlas_1 = require(\"./DynamicCharAtlas\");\nvar NoneCharAtlas_1 = require(\"./NoneCharAtlas\");\nvar StaticCharAtlas_1 = require(\"./StaticCharAtlas\");\nvar charAtlasImplementations = {\n    'none': NoneCharAtlas_1.default,\n    'static': StaticCharAtlas_1.default,\n    'dynamic': DynamicCharAtlas_1.default\n};\nvar charAtlasCache = [];\nfunction acquireCharAtlas(terminal, colors, scaledCharWidth, scaledCharHeight) {\n    var newConfig = CharAtlasUtils_1.generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors);\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var entry = charAtlasCache[i];\n        var ownedByIndex = entry.ownedBy.indexOf(terminal);\n        if (ownedByIndex >= 0) {\n            if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {\n                return entry.atlas;\n            }\n            if (entry.ownedBy.length === 1) {\n                entry.atlas.dispose();\n                charAtlasCache.splice(i, 1);\n            }\n            else {\n                entry.ownedBy.splice(ownedByIndex, 1);\n            }\n            break;\n        }\n    }\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var entry = charAtlasCache[i];\n        if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {\n            entry.ownedBy.push(terminal);\n            return entry.atlas;\n        }\n    }\n    var newEntry = {\n        atlas: new charAtlasImplementations[terminal.options.experimentalCharAtlas](document, newConfig),\n        config: newConfig,\n        ownedBy: [terminal]\n    };\n    charAtlasCache.push(newEntry);\n    return newEntry.atlas;\n}\nexports.acquireCharAtlas = acquireCharAtlas;\nfunction removeTerminalFromCache(terminal) {\n    for (var i = 0; i < charAtlasCache.length; i++) {\n        var index = charAtlasCache[i].ownedBy.indexOf(terminal);\n        if (index !== -1) {\n            if (charAtlasCache[i].ownedBy.length === 1) {\n                charAtlasCache[i].atlas.dispose();\n                charAtlasCache.splice(i, 1);\n            }\n            else {\n                charAtlasCache[i].ownedBy.splice(index, 1);\n            }\n            break;\n        }\n    }\n}\nexports.removeTerminalFromCache = removeTerminalFromCache;\n//# sourceMappingURL=CharAtlasCache.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DEFAULT_FOREGROUND = fromHex('#ffffff');\nvar DEFAULT_BACKGROUND = fromHex('#000000');\nvar DEFAULT_CURSOR = fromHex('#ffffff');\nvar DEFAULT_CURSOR_ACCENT = fromHex('#000000');\nvar DEFAULT_SELECTION = {\n    css: 'rgba(255, 255, 255, 0.3)',\n    rgba: 0xFFFFFF77\n};\nexports.DEFAULT_ANSI_COLORS = (function () {\n    var colors = [\n        fromHex('#2e3436'),\n        fromHex('#cc0000'),\n        fromHex('#4e9a06'),\n        fromHex('#c4a000'),\n        fromHex('#3465a4'),\n        fromHex('#75507b'),\n        fromHex('#06989a'),\n        fromHex('#d3d7cf'),\n        fromHex('#555753'),\n        fromHex('#ef2929'),\n        fromHex('#8ae234'),\n        fromHex('#fce94f'),\n        fromHex('#729fcf'),\n        fromHex('#ad7fa8'),\n        fromHex('#34e2e2'),\n        fromHex('#eeeeec')\n    ];\n    var v = [0x00, 0x5f, 0x87, 0xaf, 0xd7, 0xff];\n    for (var i = 0; i < 216; i++) {\n        var r = v[(i / 36) % 6 | 0];\n        var g = v[(i / 6) % 6 | 0];\n        var b = v[i % 6];\n        colors.push({\n            css: \"#\" + toPaddedHex(r) + toPaddedHex(g) + toPaddedHex(b),\n            rgba: ((r << 24) | (g << 16) | (b << 8) | 0xFF) >>> 0\n        });\n    }\n    for (var i = 0; i < 24; i++) {\n        var c = 8 + i * 10;\n        var ch = toPaddedHex(c);\n        colors.push({\n            css: \"#\" + ch + ch + ch,\n            rgba: ((c << 24) | (c << 16) | (c << 8) | 0xFF) >>> 0\n        });\n    }\n    return colors;\n})();\nfunction fromHex(css) {\n    return {\n        css: css,\n        rgba: parseInt(css.slice(1), 16) << 8 | 0xFF\n    };\n}\nfunction toPaddedHex(c) {\n    var s = c.toString(16);\n    return s.length < 2 ? '0' + s : s;\n}\nvar ColorManager = (function () {\n    function ColorManager(document, allowTransparency) {\n        this.allowTransparency = allowTransparency;\n        var canvas = document.createElement('canvas');\n        canvas.width = 1;\n        canvas.height = 1;\n        var ctx = canvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('Could not get rendering context');\n        }\n        this._ctx = ctx;\n        this._ctx.globalCompositeOperation = 'copy';\n        this._litmusColor = this._ctx.createLinearGradient(0, 0, 1, 1);\n        this.colors = {\n            foreground: DEFAULT_FOREGROUND,\n            background: DEFAULT_BACKGROUND,\n            cursor: DEFAULT_CURSOR,\n            cursorAccent: DEFAULT_CURSOR_ACCENT,\n            selection: DEFAULT_SELECTION,\n            ansi: exports.DEFAULT_ANSI_COLORS.slice()\n        };\n    }\n    ColorManager.prototype.setTheme = function (theme) {\n        if (theme === void 0) { theme = {}; }\n        this.colors.foreground = this._parseColor(theme.foreground, DEFAULT_FOREGROUND);\n        this.colors.background = this._parseColor(theme.background, DEFAULT_BACKGROUND);\n        this.colors.cursor = this._parseColor(theme.cursor, DEFAULT_CURSOR, true);\n        this.colors.cursorAccent = this._parseColor(theme.cursorAccent, DEFAULT_CURSOR_ACCENT, true);\n        this.colors.selection = this._parseColor(theme.selection, DEFAULT_SELECTION, true);\n        this.colors.ansi[0] = this._parseColor(theme.black, exports.DEFAULT_ANSI_COLORS[0]);\n        this.colors.ansi[1] = this._parseColor(theme.red, exports.DEFAULT_ANSI_COLORS[1]);\n        this.colors.ansi[2] = this._parseColor(theme.green, exports.DEFAULT_ANSI_COLORS[2]);\n        this.colors.ansi[3] = this._parseColor(theme.yellow, exports.DEFAULT_ANSI_COLORS[3]);\n        this.colors.ansi[4] = this._parseColor(theme.blue, exports.DEFAULT_ANSI_COLORS[4]);\n        this.colors.ansi[5] = this._parseColor(theme.magenta, exports.DEFAULT_ANSI_COLORS[5]);\n        this.colors.ansi[6] = this._parseColor(theme.cyan, exports.DEFAULT_ANSI_COLORS[6]);\n        this.colors.ansi[7] = this._parseColor(theme.white, exports.DEFAULT_ANSI_COLORS[7]);\n        this.colors.ansi[8] = this._parseColor(theme.brightBlack, exports.DEFAULT_ANSI_COLORS[8]);\n        this.colors.ansi[9] = this._parseColor(theme.brightRed, exports.DEFAULT_ANSI_COLORS[9]);\n        this.colors.ansi[10] = this._parseColor(theme.brightGreen, exports.DEFAULT_ANSI_COLORS[10]);\n        this.colors.ansi[11] = this._parseColor(theme.brightYellow, exports.DEFAULT_ANSI_COLORS[11]);\n        this.colors.ansi[12] = this._parseColor(theme.brightBlue, exports.DEFAULT_ANSI_COLORS[12]);\n        this.colors.ansi[13] = this._parseColor(theme.brightMagenta, exports.DEFAULT_ANSI_COLORS[13]);\n        this.colors.ansi[14] = this._parseColor(theme.brightCyan, exports.DEFAULT_ANSI_COLORS[14]);\n        this.colors.ansi[15] = this._parseColor(theme.brightWhite, exports.DEFAULT_ANSI_COLORS[15]);\n    };\n    ColorManager.prototype._parseColor = function (css, fallback, allowTransparency) {\n        if (allowTransparency === void 0) { allowTransparency = this.allowTransparency; }\n        if (css === undefined) {\n            return fallback;\n        }\n        this._ctx.fillStyle = this._litmusColor;\n        this._ctx.fillStyle = css;\n        if (typeof this._ctx.fillStyle !== 'string') {\n            console.warn(\"Color: \" + css + \" is invalid using fallback \" + fallback.css);\n            return fallback;\n        }\n        this._ctx.fillRect(0, 0, 1, 1);\n        var data = this._ctx.getImageData(0, 0, 1, 1).data;\n        if (!allowTransparency && data[3] !== 0xFF) {\n            console.warn(\"Color: \" + css + \" is using transparency, but allowTransparency is false. \" +\n                (\"Using fallback \" + fallback.css + \".\"));\n            return fallback;\n        }\n        return {\n            css: css,\n            rgba: (data[0] << 24 | data[1] << 16 | data[2] << 8 | data[3]) >>> 0\n        };\n    };\n    return ColorManager;\n}());\nexports.ColorManager = ColorManager;\n//# sourceMappingURL=ColorManager.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Platform_1 = require(\"../../common/Platform\");\nvar Types_1 = require(\"./Types\");\nfunction generateStaticCharAtlasTexture(context, canvasFactory, config) {\n    var cellWidth = config.scaledCharWidth + Types_1.CHAR_ATLAS_CELL_SPACING;\n    var cellHeight = config.scaledCharHeight + Types_1.CHAR_ATLAS_CELL_SPACING;\n    var canvas = canvasFactory(255 * cellWidth, (2 + 16 + 16) * cellHeight);\n    var ctx = canvas.getContext('2d', { alpha: config.allowTransparency });\n    ctx.fillStyle = config.colors.background.css;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    ctx.save();\n    ctx.fillStyle = config.colors.foreground.css;\n    ctx.font = getFont(config.fontWeight, config);\n    ctx.textBaseline = 'middle';\n    for (var i = 0; i < 256; i++) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(i * cellWidth, 0, cellWidth, cellHeight);\n        ctx.clip();\n        ctx.fillText(String.fromCharCode(i), i * cellWidth, cellHeight / 2);\n        ctx.restore();\n    }\n    ctx.save();\n    ctx.font = getFont(config.fontWeightBold, config);\n    for (var i = 0; i < 256; i++) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(i * cellWidth, cellHeight, cellWidth, cellHeight);\n        ctx.clip();\n        ctx.fillText(String.fromCharCode(i), i * cellWidth, cellHeight * 1.5);\n        ctx.restore();\n    }\n    ctx.restore();\n    ctx.font = getFont(config.fontWeight, config);\n    for (var colorIndex = 0; colorIndex < 16; colorIndex++) {\n        var y = (colorIndex + 2) * cellHeight;\n        for (var i = 0; i < 256; i++) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.rect(i * cellWidth, y, cellWidth, cellHeight);\n            ctx.clip();\n            ctx.fillStyle = config.colors.ansi[colorIndex].css;\n            ctx.fillText(String.fromCharCode(i), i * cellWidth, y + cellHeight / 2);\n            ctx.restore();\n        }\n    }\n    ctx.font = getFont(config.fontWeightBold, config);\n    for (var colorIndex = 0; colorIndex < 16; colorIndex++) {\n        var y = (colorIndex + 2 + 16) * cellHeight;\n        for (var i = 0; i < 256; i++) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.rect(i * cellWidth, y, cellWidth, cellHeight);\n            ctx.clip();\n            ctx.fillStyle = config.colors.ansi[colorIndex].css;\n            ctx.fillText(String.fromCharCode(i), i * cellWidth, y + cellHeight / 2);\n            ctx.restore();\n        }\n    }\n    ctx.restore();\n    if (!('createImageBitmap' in context) || Platform_1.isFirefox || Platform_1.isSafari) {\n        return canvas;\n    }\n    var charAtlasImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    clearColor(charAtlasImageData, config.colors.background);\n    return context.createImageBitmap(charAtlasImageData);\n}\nexports.generateStaticCharAtlasTexture = generateStaticCharAtlasTexture;\nfunction clearColor(imageData, color) {\n    var isEmpty = true;\n    var r = color.rgba >>> 24;\n    var g = color.rgba >>> 16 & 0xFF;\n    var b = color.rgba >>> 8 & 0xFF;\n    for (var offset = 0; offset < imageData.data.length; offset += 4) {\n        if (imageData.data[offset] === r &&\n            imageData.data[offset + 1] === g &&\n            imageData.data[offset + 2] === b) {\n            imageData.data[offset + 3] = 0;\n        }\n        else {\n            isEmpty = false;\n        }\n    }\n    return isEmpty;\n}\nexports.clearColor = clearColor;\nfunction getFont(fontWeight, config) {\n    return fontWeight + \" \" + config.fontSize * config.devicePixelRatio + \"px \" + config.fontFamily;\n}\n//# sourceMappingURL=CharAtlasGenerator.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BufferLine_1 = require(\"../core/buffer/BufferLine\");\nvar JoinedCellData = (function (_super) {\n    __extends(JoinedCellData, _super);\n    function JoinedCellData(firstCell, chars, width) {\n        var _this = _super.call(this) || this;\n        _this.content = 0;\n        _this.combinedData = '';\n        _this.fg = firstCell.fg;\n        _this.bg = firstCell.bg;\n        _this.combinedData = chars;\n        _this._width = width;\n        return _this;\n    }\n    JoinedCellData.prototype.isCombined = function () {\n        return 2097152;\n    };\n    JoinedCellData.prototype.getWidth = function () {\n        return this._width;\n    };\n    JoinedCellData.prototype.getChars = function () {\n        return this.combinedData;\n    };\n    JoinedCellData.prototype.getCode = function () {\n        return 0x1FFFFF;\n    };\n    JoinedCellData.prototype.setFromCharData = function (value) {\n        throw new Error('not implemented');\n    };\n    JoinedCellData.prototype.getAsCharData = function () {\n        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];\n    };\n    return JoinedCellData;\n}(BufferLine_1.AttributeData));\nexports.JoinedCellData = JoinedCellData;\nvar CharacterJoinerRegistry = (function () {\n    function CharacterJoinerRegistry(_terminal) {\n        this._terminal = _terminal;\n        this._characterJoiners = [];\n        this._nextCharacterJoinerId = 0;\n        this._workCell = new BufferLine_1.CellData();\n    }\n    CharacterJoinerRegistry.prototype.registerCharacterJoiner = function (handler) {\n        var joiner = {\n            id: this._nextCharacterJoinerId++,\n            handler: handler\n        };\n        this._characterJoiners.push(joiner);\n        return joiner.id;\n    };\n    CharacterJoinerRegistry.prototype.deregisterCharacterJoiner = function (joinerId) {\n        for (var i = 0; i < this._characterJoiners.length; i++) {\n            if (this._characterJoiners[i].id === joinerId) {\n                this._characterJoiners.splice(i, 1);\n                return true;\n            }\n        }\n        return false;\n    };\n    CharacterJoinerRegistry.prototype.getJoinedCharacters = function (row) {\n        if (this._characterJoiners.length === 0) {\n            return [];\n        }\n        var line = this._terminal.buffer.lines.get(row);\n        if (line.length === 0) {\n            return [];\n        }\n        var ranges = [];\n        var lineStr = line.translateToString(true);\n        var rangeStartColumn = 0;\n        var currentStringIndex = 0;\n        var rangeStartStringIndex = 0;\n        var rangeAttrFG = line.getFg(0);\n        var rangeAttrBG = line.getBg(0);\n        for (var x = 0; x < line.getTrimmedLength(); x++) {\n            line.loadCell(x, this._workCell);\n            if (this._workCell.getWidth() === 0) {\n                continue;\n            }\n            if (this._workCell.fg !== rangeAttrFG || this._workCell.bg !== rangeAttrBG) {\n                if (x - rangeStartColumn > 1) {\n                    var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);\n                    for (var i = 0; i < joinedRanges.length; i++) {\n                        ranges.push(joinedRanges[i]);\n                    }\n                }\n                rangeStartColumn = x;\n                rangeStartStringIndex = currentStringIndex;\n                rangeAttrFG = this._workCell.fg;\n                rangeAttrBG = this._workCell.bg;\n            }\n            currentStringIndex += this._workCell.getChars().length || BufferLine_1.WHITESPACE_CELL_CHAR.length;\n        }\n        if (this._terminal.cols - rangeStartColumn > 1) {\n            var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);\n            for (var i = 0; i < joinedRanges.length; i++) {\n                ranges.push(joinedRanges[i]);\n            }\n        }\n        return ranges;\n    };\n    CharacterJoinerRegistry.prototype._getJoinedRanges = function (line, startIndex, endIndex, lineData, startCol) {\n        var text = line.substring(startIndex, endIndex);\n        var joinedRanges = this._characterJoiners[0].handler(text);\n        for (var i = 1; i < this._characterJoiners.length; i++) {\n            var joinerRanges = this._characterJoiners[i].handler(text);\n            for (var j = 0; j < joinerRanges.length; j++) {\n                CharacterJoinerRegistry._mergeRanges(joinedRanges, joinerRanges[j]);\n            }\n        }\n        this._stringRangesToCellRanges(joinedRanges, lineData, startCol);\n        return joinedRanges;\n    };\n    CharacterJoinerRegistry.prototype._stringRangesToCellRanges = function (ranges, line, startCol) {\n        var currentRangeIndex = 0;\n        var currentRangeStarted = false;\n        var currentStringIndex = 0;\n        var currentRange = ranges[currentRangeIndex];\n        if (!currentRange) {\n            return;\n        }\n        for (var x = startCol; x < this._terminal.cols; x++) {\n            var width = line.getWidth(x);\n            var length_1 = line.getString(x).length || BufferLine_1.WHITESPACE_CELL_CHAR.length;\n            if (width === 0) {\n                continue;\n            }\n            if (!currentRangeStarted && currentRange[0] <= currentStringIndex) {\n                currentRange[0] = x;\n                currentRangeStarted = true;\n            }\n            if (currentRange[1] <= currentStringIndex) {\n                currentRange[1] = x;\n                currentRange = ranges[++currentRangeIndex];\n                if (!currentRange) {\n                    break;\n                }\n                if (currentRange[0] <= currentStringIndex) {\n                    currentRange[0] = x;\n                    currentRangeStarted = true;\n                }\n                else {\n                    currentRangeStarted = false;\n                }\n            }\n            currentStringIndex += length_1;\n        }\n        if (currentRange) {\n            currentRange[1] = this._terminal.cols;\n        }\n    };\n    CharacterJoinerRegistry._mergeRanges = function (ranges, newRange) {\n        var inRange = false;\n        for (var i = 0; i < ranges.length; i++) {\n            var range = ranges[i];\n            if (!inRange) {\n                if (newRange[1] <= range[0]) {\n                    ranges.splice(i, 0, newRange);\n                    return ranges;\n                }\n                if (newRange[1] <= range[1]) {\n                    range[0] = Math.min(newRange[0], range[0]);\n                    return ranges;\n                }\n                if (newRange[0] < range[1]) {\n                    range[0] = Math.min(newRange[0], range[0]);\n                    inRange = true;\n                }\n                continue;\n            }\n            else {\n                if (newRange[1] <= range[0]) {\n                    ranges[i - 1][1] = newRange[1];\n                    return ranges;\n                }\n                if (newRange[1] <= range[1]) {\n                    ranges[i - 1][1] = Math.max(newRange[1], range[1]);\n                    ranges.splice(i, 1);\n                    inRange = false;\n                    return ranges;\n                }\n                ranges.splice(i, 1);\n                i--;\n            }\n        }\n        if (inRange) {\n            ranges[ranges.length - 1][1] = newRange[1];\n        }\n        else {\n            ranges.push(newRange);\n        }\n        return ranges;\n    };\n    return CharacterJoinerRegistry;\n}());\nexports.CharacterJoinerRegistry = CharacterJoinerRegistry;\n//# sourceMappingURL=CharacterJoinerRegistry.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar Lifecycle_2 = require(\"./ui/Lifecycle\");\nvar HOVER_DURATION = 500;\nvar MouseZoneManager = (function (_super) {\n    __extends(MouseZoneManager, _super);\n    function MouseZoneManager(_terminal) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._zones = [];\n        _this._areZonesActive = false;\n        _this._tooltipTimeout = null;\n        _this._currentZone = null;\n        _this._lastHoverCoords = [null, null];\n        _this.register(Lifecycle_2.addDisposableDomListener(_this._terminal.element, 'mousedown', function (e) { return _this._onMouseDown(e); }));\n        _this._mouseMoveListener = function (e) { return _this._onMouseMove(e); };\n        _this._mouseLeaveListener = function (e) { return _this._onMouseLeave(e); };\n        _this._clickListener = function (e) { return _this._onClick(e); };\n        return _this;\n    }\n    MouseZoneManager.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._deactivate();\n    };\n    MouseZoneManager.prototype.add = function (zone) {\n        this._zones.push(zone);\n        if (this._zones.length === 1) {\n            this._activate();\n        }\n    };\n    MouseZoneManager.prototype.clearAll = function (start, end) {\n        if (this._zones.length === 0) {\n            return;\n        }\n        if (!end) {\n            start = 0;\n            end = this._terminal.rows - 1;\n        }\n        for (var i = 0; i < this._zones.length; i++) {\n            var zone = this._zones[i];\n            if ((zone.y1 > start && zone.y1 <= end + 1) ||\n                (zone.y2 > start && zone.y2 <= end + 1) ||\n                (zone.y1 < start && zone.y2 > end + 1)) {\n                if (this._currentZone && this._currentZone === zone) {\n                    this._currentZone.leaveCallback();\n                    this._currentZone = null;\n                }\n                this._zones.splice(i--, 1);\n            }\n        }\n        if (this._zones.length === 0) {\n            this._deactivate();\n        }\n    };\n    MouseZoneManager.prototype._activate = function () {\n        if (!this._areZonesActive) {\n            this._areZonesActive = true;\n            this._terminal.element.addEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.addEventListener('mouseleave', this._mouseLeaveListener);\n            this._terminal.element.addEventListener('click', this._clickListener);\n        }\n    };\n    MouseZoneManager.prototype._deactivate = function () {\n        if (this._areZonesActive) {\n            this._areZonesActive = false;\n            this._terminal.element.removeEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.removeEventListener('mouseleave', this._mouseLeaveListener);\n            this._terminal.element.removeEventListener('click', this._clickListener);\n        }\n    };\n    MouseZoneManager.prototype._onMouseMove = function (e) {\n        if (this._lastHoverCoords[0] !== e.pageX || this._lastHoverCoords[1] !== e.pageY) {\n            this._onHover(e);\n            this._lastHoverCoords = [e.pageX, e.pageY];\n        }\n    };\n    MouseZoneManager.prototype._onHover = function (e) {\n        var _this = this;\n        var zone = this._findZoneEventAt(e);\n        if (zone === this._currentZone) {\n            return;\n        }\n        if (this._currentZone) {\n            this._currentZone.leaveCallback();\n            this._currentZone = null;\n            if (this._tooltipTimeout) {\n                clearTimeout(this._tooltipTimeout);\n            }\n        }\n        if (!zone) {\n            return;\n        }\n        this._currentZone = zone;\n        if (zone.hoverCallback) {\n            zone.hoverCallback(e);\n        }\n        this._tooltipTimeout = setTimeout(function () { return _this._onTooltip(e); }, HOVER_DURATION);\n    };\n    MouseZoneManager.prototype._onTooltip = function (e) {\n        this._tooltipTimeout = null;\n        var zone = this._findZoneEventAt(e);\n        if (zone && zone.tooltipCallback) {\n            zone.tooltipCallback(e);\n        }\n    };\n    MouseZoneManager.prototype._onMouseDown = function (e) {\n        this._initialSelectionLength = this._terminal.getSelection().length;\n        if (!this._areZonesActive) {\n            return;\n        }\n        var zone = this._findZoneEventAt(e);\n        if (zone) {\n            if (zone.willLinkActivate(e)) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n            }\n        }\n    };\n    MouseZoneManager.prototype._onMouseLeave = function (e) {\n        if (this._currentZone) {\n            this._currentZone.leaveCallback();\n            this._currentZone = null;\n            if (this._tooltipTimeout) {\n                clearTimeout(this._tooltipTimeout);\n            }\n        }\n    };\n    MouseZoneManager.prototype._onClick = function (e) {\n        var zone = this._findZoneEventAt(e);\n        var currentSelectionLength = this._terminal.getSelection().length;\n        if (zone && currentSelectionLength === this._initialSelectionLength) {\n            zone.clickCallback(e);\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        }\n    };\n    MouseZoneManager.prototype._findZoneEventAt = function (e) {\n        var coords = this._terminal.mouseHelper.getCoords(e, this._terminal.screenElement, this._terminal.charMeasure, this._terminal.cols, this._terminal.rows);\n        if (!coords) {\n            return null;\n        }\n        var x = coords[0];\n        var y = coords[1];\n        for (var i = 0; i < this._zones.length; i++) {\n            var zone = this._zones[i];\n            if (zone.y1 === zone.y2) {\n                if (y === zone.y1 && x >= zone.x1 && x < zone.x2) {\n                    return zone;\n                }\n            }\n            else {\n                if ((y === zone.y1 && x >= zone.x1) ||\n                    (y === zone.y2 && x < zone.x2) ||\n                    (y > zone.y1 && y < zone.y2)) {\n                    return zone;\n                }\n            }\n        }\n        return null;\n    };\n    return MouseZoneManager;\n}(Lifecycle_1.Disposable));\nexports.MouseZoneManager = MouseZoneManager;\nvar MouseZone = (function () {\n    function MouseZone(x1, y1, x2, y2, clickCallback, hoverCallback, tooltipCallback, leaveCallback, willLinkActivate) {\n        this.x1 = x1;\n        this.y1 = y1;\n        this.x2 = x2;\n        this.y2 = y2;\n        this.clickCallback = clickCallback;\n        this.hoverCallback = hoverCallback;\n        this.tooltipCallback = tooltipCallback;\n        this.leaveCallback = leaveCallback;\n        this.willLinkActivate = willLinkActivate;\n    }\n    return MouseZone;\n}());\nexports.MouseZone = MouseZone;\n//# sourceMappingURL=MouseZoneManager.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseHelper = (function () {\n    function MouseHelper(_renderCoordinator) {\n        this._renderCoordinator = _renderCoordinator;\n    }\n    MouseHelper.getCoordsRelativeToElement = function (event, element) {\n        var rect = element.getBoundingClientRect();\n        return [event.clientX - rect.left, event.clientY - rect.top];\n    };\n    MouseHelper.prototype.getCoords = function (event, element, charMeasure, colCount, rowCount, isSelection) {\n        if (!charMeasure.width || !charMeasure.height) {\n            return null;\n        }\n        var coords = MouseHelper.getCoordsRelativeToElement(event, element);\n        if (!coords) {\n            return null;\n        }\n        coords[0] = Math.ceil((coords[0] + (isSelection ? this._renderCoordinator.dimensions.actualCellWidth / 2 : 0)) / this._renderCoordinator.dimensions.actualCellWidth);\n        coords[1] = Math.ceil(coords[1] / this._renderCoordinator.dimensions.actualCellHeight);\n        coords[0] = Math.min(Math.max(coords[0], 1), colCount + (isSelection ? 1 : 0));\n        coords[1] = Math.min(Math.max(coords[1], 1), rowCount);\n        return coords;\n    };\n    MouseHelper.prototype.getRawByteCoords = function (event, element, charMeasure, colCount, rowCount) {\n        var coords = this.getCoords(event, element, charMeasure, colCount, rowCount);\n        var x = coords[0];\n        var y = coords[1];\n        x += 32;\n        y += 32;\n        return { x: x, y: y };\n    };\n    return MouseHelper;\n}());\nexports.MouseHelper = MouseHelper;\n//# sourceMappingURL=MouseHelper.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RenderDebouncer = (function () {\n    function RenderDebouncer(_renderCallback) {\n        this._renderCallback = _renderCallback;\n    }\n    RenderDebouncer.prototype.dispose = function () {\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = undefined;\n        }\n    };\n    RenderDebouncer.prototype.refresh = function (rowStart, rowEnd, rowCount) {\n        var _this = this;\n        this._rowCount = rowCount;\n        rowStart = rowStart !== undefined ? rowStart : 0;\n        rowEnd = rowEnd !== undefined ? rowEnd : this._rowCount - 1;\n        this._rowStart = this._rowStart !== undefined ? Math.min(this._rowStart, rowStart) : rowStart;\n        this._rowEnd = this._rowEnd !== undefined ? Math.max(this._rowEnd, rowEnd) : rowEnd;\n        if (this._animationFrame) {\n            return;\n        }\n        this._animationFrame = window.requestAnimationFrame(function () { return _this._innerRefresh(); });\n    };\n    RenderDebouncer.prototype._innerRefresh = function () {\n        if (this._rowStart === undefined || this._rowEnd === undefined || this._rowCount === undefined) {\n            return;\n        }\n        this._rowStart = Math.max(this._rowStart, 0);\n        this._rowEnd = Math.min(this._rowEnd, this._rowCount - 1);\n        this._renderCallback(this._rowStart, this._rowEnd);\n        this._rowStart = undefined;\n        this._rowEnd = undefined;\n        this._animationFrame = undefined;\n    };\n    return RenderDebouncer;\n}());\nexports.RenderDebouncer = RenderDebouncer;\n//# sourceMappingURL=RenderDebouncer.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"../common/Lifecycle\");\nvar ScreenDprMonitor = (function (_super) {\n    __extends(ScreenDprMonitor, _super);\n    function ScreenDprMonitor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._currentDevicePixelRatio = window.devicePixelRatio;\n        return _this;\n    }\n    ScreenDprMonitor.prototype.setListener = function (listener) {\n        var _this = this;\n        if (this._listener) {\n            this.clearListener();\n        }\n        this._listener = listener;\n        this._outerListener = function () {\n            if (!_this._listener) {\n                return;\n            }\n            _this._listener(window.devicePixelRatio, _this._currentDevicePixelRatio);\n            _this._updateDpr();\n        };\n        this._updateDpr();\n    };\n    ScreenDprMonitor.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this.clearListener();\n    };\n    ScreenDprMonitor.prototype._updateDpr = function () {\n        if (!this._resolutionMediaMatchList || !this._outerListener) {\n            return;\n        }\n        this._resolutionMediaMatchList.removeListener(this._outerListener);\n        this._currentDevicePixelRatio = window.devicePixelRatio;\n        this._resolutionMediaMatchList = window.matchMedia(\"screen and (resolution: \" + window.devicePixelRatio + \"dppx)\");\n        this._resolutionMediaMatchList.addListener(this._outerListener);\n    };\n    ScreenDprMonitor.prototype.clearListener = function () {\n        if (!this._resolutionMediaMatchList || !this._listener || !this._outerListener) {\n            return;\n        }\n        this._resolutionMediaMatchList.removeListener(this._outerListener);\n        this._resolutionMediaMatchList = undefined;\n        this._listener = undefined;\n        this._outerListener = undefined;\n    };\n    return ScreenDprMonitor;\n}(Lifecycle_1.Disposable));\nexports.ScreenDprMonitor = ScreenDprMonitor;\n//# sourceMappingURL=ScreenDprMonitor.js.map","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction proposeGeometry(term) {\n    if (!term.element.parentElement) {\n        return null;\n    }\n    var parentElementStyle = window.getComputedStyle(term.element.parentElement);\n    var parentElementHeight = parseInt(parentElementStyle.getPropertyValue('height'));\n    var parentElementWidth = Math.max(0, parseInt(parentElementStyle.getPropertyValue('width')));\n    var elementStyle = window.getComputedStyle(term.element);\n    var elementPadding = {\n        top: parseInt(elementStyle.getPropertyValue('padding-top')),\n        bottom: parseInt(elementStyle.getPropertyValue('padding-bottom')),\n        right: parseInt(elementStyle.getPropertyValue('padding-right')),\n        left: parseInt(elementStyle.getPropertyValue('padding-left'))\n    };\n    var elementPaddingVer = elementPadding.top + elementPadding.bottom;\n    var elementPaddingHor = elementPadding.right + elementPadding.left;\n    var availableHeight = parentElementHeight - elementPaddingVer;\n    var availableWidth = parentElementWidth - elementPaddingHor - term._core.viewport.scrollBarWidth;\n    var geometry = {\n        cols: Math.floor(availableWidth / term._core._renderCoordinator.dimensions.actualCellWidth),\n        rows: Math.floor(availableHeight / term._core._renderCoordinator.dimensions.actualCellHeight)\n    };\n    return geometry;\n}\nexports.proposeGeometry = proposeGeometry;\nfunction fit(term) {\n    var geometry = proposeGeometry(term);\n    if (geometry) {\n        if (term.rows !== geometry.rows || term.cols !== geometry.cols) {\n            term._core._renderCoordinator.clear();\n            term.resize(geometry.cols, geometry.rows);\n        }\n    }\n}\nexports.fit = fit;\nfunction apply(terminalConstructor) {\n    terminalConstructor.prototype.proposeGeometry = function () {\n        return proposeGeometry(this);\n    };\n    terminalConstructor.prototype.fit = function () {\n        fit(this);\n    };\n}\nexports.apply = apply;\n//# sourceMappingURL=fit.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction attach(term, socket, bidirectional, buffered) {\n    var addonTerminal = term;\n    bidirectional = (typeof bidirectional === 'undefined') ? true : bidirectional;\n    addonTerminal.__socket = socket;\n    addonTerminal.__flushBuffer = function () {\n        addonTerminal.write(addonTerminal.__attachSocketBuffer);\n        addonTerminal.__attachSocketBuffer = null;\n    };\n    addonTerminal.__pushToBuffer = function (data) {\n        if (addonTerminal.__attachSocketBuffer) {\n            addonTerminal.__attachSocketBuffer += data;\n        }\n        else {\n            addonTerminal.__attachSocketBuffer = data;\n            setTimeout(addonTerminal.__flushBuffer, 10);\n        }\n    };\n    var myTextDecoder;\n    addonTerminal.__getMessage = function (ev) {\n        var str;\n        if (typeof ev.data === 'object') {\n            if (!myTextDecoder) {\n                myTextDecoder = new TextDecoder();\n            }\n            if (ev.data instanceof ArrayBuffer) {\n                str = myTextDecoder.decode(ev.data);\n                displayData(str);\n            }\n            else {\n                var fileReader_1 = new FileReader();\n                fileReader_1.addEventListener('load', function () {\n                    str = myTextDecoder.decode(fileReader_1.result);\n                    displayData(str);\n                });\n                fileReader_1.readAsArrayBuffer(ev.data);\n            }\n        }\n        else if (typeof ev.data === 'string') {\n            displayData(ev.data);\n        }\n        else {\n            throw Error(\"Cannot handle \\\"\" + typeof ev.data + \"\\\" websocket message.\");\n        }\n    };\n    function displayData(str, data) {\n        if (buffered) {\n            addonTerminal.__pushToBuffer(str || data);\n        }\n        else {\n            addonTerminal.write(str || data);\n        }\n    }\n    addonTerminal.__sendData = function (data) {\n        if (socket.readyState !== 1) {\n            return;\n        }\n        socket.send(data);\n    };\n    addonTerminal._core.register(addSocketListener(socket, 'message', addonTerminal.__getMessage));\n    if (bidirectional) {\n        addonTerminal.__dataListener = addonTerminal.onData(addonTerminal.__sendData);\n        addonTerminal._core.register(addonTerminal.__dataListener);\n    }\n    addonTerminal._core.register(addSocketListener(socket, 'close', function () { return detach(addonTerminal, socket); }));\n    addonTerminal._core.register(addSocketListener(socket, 'error', function () { return detach(addonTerminal, socket); }));\n}\nexports.attach = attach;\nfunction addSocketListener(socket, type, handler) {\n    socket.addEventListener(type, handler);\n    return {\n        dispose: function () {\n            if (!handler) {\n                return;\n            }\n            socket.removeEventListener(type, handler);\n            handler = null;\n        }\n    };\n}\nfunction detach(term, socket) {\n    var addonTerminal = term;\n    addonTerminal.__dataListener.dispose();\n    addonTerminal.__dataListener = undefined;\n    socket = (typeof socket === 'undefined') ? addonTerminal.__socket : socket;\n    if (socket) {\n        socket.removeEventListener('message', addonTerminal.__getMessage);\n    }\n    delete addonTerminal.__socket;\n}\nexports.detach = detach;\nfunction apply(terminalConstructor) {\n    terminalConstructor.prototype.attach = function (socket, bidirectional, buffered) {\n        attach(this, socket, bidirectional, buffered);\n    };\n    terminalConstructor.prototype.detach = function (socket) {\n        detach(this, socket);\n    };\n}\nexports.apply = apply;\n//# sourceMappingURL=attach.js.map","module.exports = OSjs;","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BufferSet_1 = require(\"./BufferSet\");\nvar Buffer_1 = require(\"./Buffer\");\nvar CompositionHelper_1 = require(\"./CompositionHelper\");\nvar EventEmitter_1 = require(\"./common/EventEmitter\");\nvar Viewport_1 = require(\"./Viewport\");\nvar Clipboard_1 = require(\"./Clipboard\");\nvar EscapeSequences_1 = require(\"./common/data/EscapeSequences\");\nvar InputHandler_1 = require(\"./InputHandler\");\nvar Renderer_1 = require(\"./renderer/Renderer\");\nvar Linkifier_1 = require(\"./Linkifier\");\nvar SelectionManager_1 = require(\"./SelectionManager\");\nvar CharMeasure_1 = require(\"./CharMeasure\");\nvar Browser = require(\"./common/Platform\");\nvar Lifecycle_1 = require(\"./ui/Lifecycle\");\nvar Strings = require(\"./Strings\");\nvar MouseHelper_1 = require(\"./MouseHelper\");\nvar SoundManager_1 = require(\"./SoundManager\");\nvar MouseZoneManager_1 = require(\"./MouseZoneManager\");\nvar AccessibilityManager_1 = require(\"./AccessibilityManager\");\nvar CharAtlasCache_1 = require(\"./renderer/atlas/CharAtlasCache\");\nvar DomRenderer_1 = require(\"./renderer/dom/DomRenderer\");\nvar Keyboard_1 = require(\"./core/input/Keyboard\");\nvar Clone_1 = require(\"./common/Clone\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nvar WindowsMode_1 = require(\"./WindowsMode\");\nvar ColorManager_1 = require(\"./ui/ColorManager\");\nvar RenderCoordinator_1 = require(\"./renderer/RenderCoordinator\");\nvar document = (typeof window !== 'undefined') ? window.document : null;\nvar WRITE_BUFFER_PAUSE_THRESHOLD = 5;\nvar WRITE_TIMEOUT_MS = 12;\nvar WRITE_BUFFER_LENGTH_THRESHOLD = 50;\nvar MINIMUM_COLS = 2;\nvar MINIMUM_ROWS = 1;\nvar CONSTRUCTOR_ONLY_OPTIONS = ['cols', 'rows'];\nvar DEFAULT_OPTIONS = {\n    cols: 80,\n    rows: 24,\n    convertEol: false,\n    termName: 'xterm',\n    cursorBlink: false,\n    cursorStyle: 'block',\n    bellSound: SoundManager_1.DEFAULT_BELL_SOUND,\n    bellStyle: 'none',\n    drawBoldTextInBrightColors: true,\n    enableBold: true,\n    experimentalCharAtlas: 'static',\n    fontFamily: 'courier-new, courier, monospace',\n    fontSize: 15,\n    fontWeight: 'normal',\n    fontWeightBold: 'bold',\n    lineHeight: 1.0,\n    letterSpacing: 0,\n    scrollback: 1000,\n    screenKeys: false,\n    screenReaderMode: false,\n    debug: false,\n    macOptionIsMeta: false,\n    macOptionClickForcesSelection: false,\n    cancelEvents: false,\n    disableStdin: false,\n    useFlowControl: false,\n    allowTransparency: false,\n    tabStopWidth: 8,\n    theme: undefined,\n    rightClickSelectsWord: Browser.isMac,\n    rendererType: 'canvas',\n    windowsMode: false\n};\nvar Terminal = (function (_super) {\n    __extends(Terminal, _super);\n    function Terminal(options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        _this.browser = Browser;\n        _this._blankLine = null;\n        _this._onCursorMove = new EventEmitter2_1.EventEmitter2();\n        _this._onData = new EventEmitter2_1.EventEmitter2();\n        _this._onKey = new EventEmitter2_1.EventEmitter2();\n        _this._onLineFeed = new EventEmitter2_1.EventEmitter2();\n        _this._onRender = new EventEmitter2_1.EventEmitter2();\n        _this._onResize = new EventEmitter2_1.EventEmitter2();\n        _this._onScroll = new EventEmitter2_1.EventEmitter2();\n        _this._onSelectionChange = new EventEmitter2_1.EventEmitter2();\n        _this._onTitleChange = new EventEmitter2_1.EventEmitter2();\n        _this.options = Clone_1.clone(options);\n        _this._setup();\n        _this.onCursorMove(function () { return _this.emit('cursormove'); });\n        _this.onData(function (e) { return _this.emit('data', e); });\n        _this.onKey(function (e) { return _this.emit('key', e.key, e.domEvent); });\n        _this.onLineFeed(function () { return _this.emit('linefeed'); });\n        _this.onRender(function (e) { return _this.emit('refresh', e); });\n        _this.onResize(function (e) { return _this.emit('resize', e); });\n        _this.onSelectionChange(function () { return _this.emit('selection'); });\n        _this.onScroll(function (e) { return _this.emit('scroll', e); });\n        _this.onTitleChange(function (e) { return _this.emit('title', e); });\n        return _this;\n    }\n    Object.defineProperty(Terminal.prototype, \"onCursorMove\", {\n        get: function () { return this._onCursorMove.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onData\", {\n        get: function () { return this._onData.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onKey\", {\n        get: function () { return this._onKey.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onLineFeed\", {\n        get: function () { return this._onLineFeed.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onRender\", {\n        get: function () { return this._onRender.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onResize\", {\n        get: function () { return this._onResize.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onScroll\", {\n        get: function () { return this._onScroll.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onSelectionChange\", {\n        get: function () { return this._onSelectionChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Terminal.prototype, \"onTitleChange\", {\n        get: function () { return this._onTitleChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        if (this._windowsMode) {\n            this._windowsMode.dispose();\n            this._windowsMode = undefined;\n        }\n        this._customKeyEventHandler = null;\n        CharAtlasCache_1.removeTerminalFromCache(this);\n        this.handler = function () { };\n        this.write = function () { };\n        if (this.element && this.element.parentNode) {\n            this.element.parentNode.removeChild(this.element);\n        }\n    };\n    Terminal.prototype.destroy = function () {\n        this.dispose();\n    };\n    Terminal.prototype._setup = function () {\n        var _this = this;\n        Object.keys(DEFAULT_OPTIONS).forEach(function (key) {\n            if (_this.options[key] === null || _this.options[key] === undefined) {\n                _this.options[key] = DEFAULT_OPTIONS[key];\n            }\n        });\n        this._parent = document ? document.body : null;\n        this.cols = Math.max(this.options.cols, MINIMUM_COLS);\n        this.rows = Math.max(this.options.rows, MINIMUM_ROWS);\n        if (this.options.handler) {\n            this.onData(this.options.handler);\n        }\n        this.cursorState = 0;\n        this.cursorHidden = false;\n        this._customKeyEventHandler = null;\n        this.applicationKeypad = false;\n        this.applicationCursor = false;\n        this.originMode = false;\n        this.insertMode = false;\n        this.wraparoundMode = true;\n        this.bracketedPasteMode = false;\n        this.charset = null;\n        this.gcharset = null;\n        this.glevel = 0;\n        this.charsets = [null];\n        this.curAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n        this._eraseAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n        this.params = [];\n        this.currentParam = 0;\n        this.writeBuffer = [];\n        this.writeBufferUtf8 = [];\n        this._writeInProgress = false;\n        this._xoffSentToCatchUp = false;\n        this._userScrolling = false;\n        this._inputHandler = new InputHandler_1.InputHandler(this);\n        this._inputHandler.onCursorMove(function () { return _this._onCursorMove.fire(); });\n        this._inputHandler.onLineFeed(function () { return _this._onLineFeed.fire(); });\n        this._inputHandler.onData(function (e) { return _this._onData.fire(e); });\n        this.register(this._inputHandler);\n        this.selectionManager = this.selectionManager || null;\n        this.linkifier = this.linkifier || new Linkifier_1.Linkifier(this);\n        this._mouseZoneManager = this._mouseZoneManager || null;\n        this.soundManager = this.soundManager || new SoundManager_1.SoundManager(this);\n        this.buffers = new BufferSet_1.BufferSet(this);\n        if (this.selectionManager) {\n            this.selectionManager.clearSelection();\n            this.selectionManager.initBuffersListeners();\n        }\n        if (this.options.windowsMode) {\n            this._windowsMode = WindowsMode_1.applyWindowsMode(this);\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"buffer\", {\n        get: function () {\n            return this.buffers.active;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.eraseAttrData = function () {\n        this._eraseAttrData.bg &= ~(50331648 | 0xFFFFFF);\n        this._eraseAttrData.bg |= this.curAttrData.bg & ~0xFC000000;\n        return this._eraseAttrData;\n    };\n    Terminal.prototype.focus = function () {\n        if (this.textarea) {\n            this.textarea.focus({ preventScroll: true });\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"isFocused\", {\n        get: function () {\n            return document.activeElement === this.textarea && document.hasFocus();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.getOption = function (key) {\n        if (!(key in DEFAULT_OPTIONS)) {\n            throw new Error('No option with key \"' + key + '\"');\n        }\n        return this.options[key];\n    };\n    Terminal.prototype.setOption = function (key, value) {\n        if (!(key in DEFAULT_OPTIONS)) {\n            throw new Error('No option with key \"' + key + '\"');\n        }\n        if (CONSTRUCTOR_ONLY_OPTIONS.indexOf(key) !== -1) {\n            console.error(\"Option \\\"\" + key + \"\\\" can only be set in the constructor\");\n        }\n        if (this.options[key] === value) {\n            return;\n        }\n        switch (key) {\n            case 'bellStyle':\n                if (!value) {\n                    value = 'none';\n                }\n                break;\n            case 'cursorStyle':\n                if (!value) {\n                    value = 'block';\n                }\n                break;\n            case 'fontWeight':\n                if (!value) {\n                    value = 'normal';\n                }\n                break;\n            case 'fontWeightBold':\n                if (!value) {\n                    value = 'bold';\n                }\n                break;\n            case 'lineHeight':\n                if (value < 1) {\n                    console.warn(key + \" cannot be less than 1, value: \" + value);\n                    return;\n                }\n            case 'rendererType':\n                if (!value) {\n                    value = 'canvas';\n                }\n                break;\n            case 'tabStopWidth':\n                if (value < 1) {\n                    console.warn(key + \" cannot be less than 1, value: \" + value);\n                    return;\n                }\n                break;\n            case 'theme':\n                this._setTheme(value);\n                break;\n            case 'scrollback':\n                value = Math.min(value, Buffer_1.MAX_BUFFER_SIZE);\n                if (value < 0) {\n                    console.warn(key + \" cannot be less than 0, value: \" + value);\n                    return;\n                }\n                if (this.options[key] !== value) {\n                    var newBufferLength = this.rows + value;\n                    if (this.buffer.lines.length > newBufferLength) {\n                        var amountToTrim = this.buffer.lines.length - newBufferLength;\n                        var needsRefresh = (this.buffer.ydisp - amountToTrim < 0);\n                        this.buffer.lines.trimStart(amountToTrim);\n                        this.buffer.ybase = Math.max(this.buffer.ybase - amountToTrim, 0);\n                        this.buffer.ydisp = Math.max(this.buffer.ydisp - amountToTrim, 0);\n                        if (needsRefresh) {\n                            this.refresh(0, this.rows - 1);\n                        }\n                    }\n                }\n                break;\n        }\n        this.options[key] = value;\n        switch (key) {\n            case 'fontFamily':\n            case 'fontSize':\n                if (this._renderCoordinator) {\n                    this._renderCoordinator.clear();\n                    this.charMeasure.measure(this.options);\n                }\n                break;\n            case 'drawBoldTextInBrightColors':\n            case 'experimentalCharAtlas':\n            case 'enableBold':\n            case 'letterSpacing':\n            case 'lineHeight':\n            case 'fontWeight':\n            case 'fontWeightBold':\n                if (this._renderCoordinator) {\n                    this._renderCoordinator.clear();\n                    this._renderCoordinator.onResize(this.cols, this.rows);\n                    this.refresh(0, this.rows - 1);\n                }\n                break;\n            case 'rendererType':\n                if (this._renderCoordinator) {\n                    this._renderCoordinator.setRenderer(this._createRenderer());\n                }\n                break;\n            case 'scrollback':\n                this.buffers.resize(this.cols, this.rows);\n                if (this.viewport) {\n                    this.viewport.syncScrollArea();\n                }\n                break;\n            case 'screenReaderMode':\n                if (value) {\n                    if (!this._accessibilityManager && this._renderCoordinator) {\n                        this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this, this._renderCoordinator.dimensions);\n                    }\n                }\n                else {\n                    if (this._accessibilityManager) {\n                        this._accessibilityManager.dispose();\n                        this._accessibilityManager = null;\n                    }\n                }\n                break;\n            case 'tabStopWidth':\n                this.buffers.setupTabStops();\n                break;\n            case 'windowsMode':\n                if (value) {\n                    if (!this._windowsMode) {\n                        this._windowsMode = WindowsMode_1.applyWindowsMode(this);\n                    }\n                }\n                else {\n                    if (this._windowsMode) {\n                        this._windowsMode.dispose();\n                        this._windowsMode = undefined;\n                    }\n                }\n                break;\n        }\n        if (this._renderCoordinator) {\n            this._renderCoordinator.onOptionsChanged();\n        }\n    };\n    Terminal.prototype._onTextAreaFocus = function (ev) {\n        if (this.sendFocus) {\n            this.handler(EscapeSequences_1.C0.ESC + '[I');\n        }\n        this.updateCursorStyle(ev);\n        this.element.classList.add('focus');\n        this.showCursor();\n        this.emit('focus');\n    };\n    Terminal.prototype.blur = function () {\n        return this.textarea.blur();\n    };\n    Terminal.prototype._onTextAreaBlur = function () {\n        this.textarea.value = '';\n        this.refresh(this.buffer.y, this.buffer.y);\n        if (this.sendFocus) {\n            this.handler(EscapeSequences_1.C0.ESC + '[O');\n        }\n        this.element.classList.remove('focus');\n        this.emit('blur');\n    };\n    Terminal.prototype._initGlobal = function () {\n        var _this = this;\n        this._bindKeys();\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'copy', function (event) {\n            if (!_this.hasSelection()) {\n                return;\n            }\n            Clipboard_1.copyHandler(event, _this, _this.selectionManager);\n        }));\n        var pasteHandlerWrapper = function (event) { return Clipboard_1.pasteHandler(event, _this); };\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'paste', pasteHandlerWrapper));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'paste', pasteHandlerWrapper));\n        if (Browser.isFirefox) {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (event) {\n                if (event.button === 2) {\n                    Clipboard_1.rightClickHandler(event, _this, _this.selectionManager, _this.options.rightClickSelectsWord);\n                }\n            }));\n        }\n        else {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'contextmenu', function (event) {\n                Clipboard_1.rightClickHandler(event, _this, _this.selectionManager, _this.options.rightClickSelectsWord);\n            }));\n        }\n        if (Browser.isLinux) {\n            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'auxclick', function (event) {\n                if (event.button === 1) {\n                    Clipboard_1.moveTextAreaUnderMouseCursor(event, _this);\n                }\n            }));\n        }\n    };\n    Terminal.prototype._bindKeys = function () {\n        var _this = this;\n        var self = this;\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keydown', function (ev) {\n            if (document.activeElement !== this) {\n                return;\n            }\n            self._keyDown(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keypress', function (ev) {\n            if (document.activeElement !== this) {\n                return;\n            }\n            self._keyPress(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keyup', function (ev) {\n            if (!wasModifierKeyOnlyEvent(ev)) {\n                _this.focus();\n            }\n            self._keyUp(ev);\n        }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keydown', function (ev) { return _this._keyDown(ev); }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keypress', function (ev) { return _this._keyPress(ev); }, true));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionstart', function () { return _this._compositionHelper.compositionstart(); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionupdate', function (e) { return _this._compositionHelper.compositionupdate(e); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionend', function () { return _this._compositionHelper.compositionend(); }));\n        this.register(this.onRender(function () { return _this._compositionHelper.updateCompositionElements(); }));\n        this.register(this.onRender(function (e) { return _this._queueLinkification(e.start, e.end); }));\n    };\n    Terminal.prototype.open = function (parent) {\n        var _this = this;\n        this._parent = parent || this._parent;\n        if (!this._parent) {\n            throw new Error('Terminal requires a parent element.');\n        }\n        this._context = this._parent.ownerDocument.defaultView;\n        this._document = this._parent.ownerDocument;\n        this.element = this._document.createElement('div');\n        this.element.dir = 'ltr';\n        this.element.classList.add('terminal');\n        this.element.classList.add('xterm');\n        this.element.setAttribute('tabindex', '0');\n        this._parent.appendChild(this.element);\n        var fragment = document.createDocumentFragment();\n        this._viewportElement = document.createElement('div');\n        this._viewportElement.classList.add('xterm-viewport');\n        fragment.appendChild(this._viewportElement);\n        this._viewportScrollArea = document.createElement('div');\n        this._viewportScrollArea.classList.add('xterm-scroll-area');\n        this._viewportElement.appendChild(this._viewportScrollArea);\n        this.screenElement = document.createElement('div');\n        this.screenElement.classList.add('xterm-screen');\n        this._helperContainer = document.createElement('div');\n        this._helperContainer.classList.add('xterm-helpers');\n        this.screenElement.appendChild(this._helperContainer);\n        fragment.appendChild(this.screenElement);\n        this._mouseZoneManager = new MouseZoneManager_1.MouseZoneManager(this);\n        this.register(this._mouseZoneManager);\n        this.register(this.onScroll(function () { return _this._mouseZoneManager.clearAll(); }));\n        this.linkifier.attachToDom(this._mouseZoneManager);\n        this.textarea = document.createElement('textarea');\n        this.textarea.classList.add('xterm-helper-textarea');\n        this.textarea.setAttribute('aria-label', Strings.promptLabel);\n        this.textarea.setAttribute('aria-multiline', 'false');\n        this.textarea.setAttribute('autocorrect', 'off');\n        this.textarea.setAttribute('autocapitalize', 'off');\n        this.textarea.setAttribute('spellcheck', 'false');\n        this.textarea.tabIndex = 0;\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'focus', function (ev) { return _this._onTextAreaFocus(ev); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'blur', function () { return _this._onTextAreaBlur(); }));\n        this._helperContainer.appendChild(this.textarea);\n        this._compositionView = document.createElement('div');\n        this._compositionView.classList.add('composition-view');\n        this._compositionHelper = new CompositionHelper_1.CompositionHelper(this.textarea, this._compositionView, this);\n        this._helperContainer.appendChild(this._compositionView);\n        this.charMeasure = new CharMeasure_1.CharMeasure(document, this._helperContainer);\n        this.element.appendChild(fragment);\n        this._theme = this.options.theme;\n        this._colorManager = new ColorManager_1.ColorManager(document, this.options.allowTransparency);\n        this._colorManager.setTheme(this._theme);\n        var renderer = this._createRenderer();\n        this._renderCoordinator = new RenderCoordinator_1.RenderCoordinator(renderer, this.rows, this.screenElement);\n        this._renderCoordinator.onRender(function (e) { return _this._onRender.fire(e); });\n        this.onResize(function (e) { return _this._renderCoordinator.resize(e.cols, e.rows); });\n        this.viewport = new Viewport_1.Viewport(this, this._viewportElement, this._viewportScrollArea, this.charMeasure, this._renderCoordinator.dimensions);\n        this.viewport.onThemeChange(this._colorManager.colors);\n        this.register(this.viewport);\n        this.register(this.onCursorMove(function () { return _this._renderCoordinator.onCursorMove(); }));\n        this.register(this.onResize(function () { return _this._renderCoordinator.onResize(_this.cols, _this.rows); }));\n        this.register(this.addDisposableListener('blur', function () { return _this._renderCoordinator.onBlur(); }));\n        this.register(this.addDisposableListener('focus', function () { return _this._renderCoordinator.onFocus(); }));\n        this.register(this.charMeasure.onCharSizeChanged(function () { return _this._renderCoordinator.onCharSizeChanged(); }));\n        this.register(this._renderCoordinator.onDimensionsChange(function () { return _this.viewport.syncScrollArea(); }));\n        this.selectionManager = new SelectionManager_1.SelectionManager(this, this.charMeasure);\n        this.register(this.selectionManager.onSelectionChange(function () { return _this._onSelectionChange.fire(); }));\n        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (e) { return _this.selectionManager.onMouseDown(e); }));\n        this.register(this.selectionManager.onRedrawRequest(function (e) { return _this._renderCoordinator.onSelectionChanged(e.start, e.end, e.columnSelectMode); }));\n        this.register(this.selectionManager.onLinuxMouseSelection(function (text) {\n            _this.textarea.value = text;\n            _this.textarea.focus();\n            _this.textarea.select();\n        }));\n        this.register(this.onScroll(function () {\n            _this.viewport.syncScrollArea();\n            _this.selectionManager.refresh();\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(this._viewportElement, 'scroll', function () { return _this.selectionManager.refresh(); }));\n        this.mouseHelper = new MouseHelper_1.MouseHelper(this._renderCoordinator);\n        this.element.classList.toggle('enable-mouse-events', this.mouseEvents);\n        if (this.mouseEvents) {\n            this.selectionManager.disable();\n        }\n        else {\n            this.selectionManager.enable();\n        }\n        if (this.options.screenReaderMode) {\n            this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this, this._renderCoordinator.dimensions);\n            this._accessibilityManager.register(this._renderCoordinator.onDimensionsChange(function (e) { return _this._accessibilityManager.setDimensions(e); }));\n        }\n        this.charMeasure.measure(this.options);\n        this.refresh(0, this.rows - 1);\n        this._initGlobal();\n        this.bindMouse();\n    };\n    Terminal.prototype._createRenderer = function () {\n        switch (this.options.rendererType) {\n            case 'canvas':\n                return new Renderer_1.Renderer(this, this._colorManager.colors);\n                break;\n            case 'dom':\n                return new DomRenderer_1.DomRenderer(this, this._colorManager.colors);\n                break;\n            default: throw new Error(\"Unrecognized rendererType \\\"\" + this.options.rendererType + \"\\\"\");\n        }\n    };\n    Terminal.prototype._setTheme = function (theme) {\n        this._theme = theme;\n        if (this._colorManager) {\n            this._colorManager.setTheme(theme);\n        }\n        if (this._renderCoordinator) {\n            this._renderCoordinator.setColors(this._colorManager.colors);\n        }\n        if (this.viewport) {\n            this.viewport.onThemeChange(this._colorManager.colors);\n        }\n    };\n    Terminal.prototype.bindMouse = function () {\n        var _this = this;\n        var el = this.element;\n        var self = this;\n        var pressed = 32;\n        function sendButton(ev) {\n            var button;\n            var pos;\n            button = getButton(ev);\n            pos = self.mouseHelper.getRawByteCoords(ev, self.screenElement, self.charMeasure, self.cols, self.rows);\n            if (!pos)\n                return;\n            sendEvent(button, pos);\n            switch (ev.overrideType || ev.type) {\n                case 'mousedown':\n                    pressed = button;\n                    break;\n                case 'mouseup':\n                    pressed = 32;\n                    break;\n                case 'wheel':\n                    break;\n            }\n        }\n        function sendMove(ev) {\n            var button = pressed;\n            var pos = self.mouseHelper.getRawByteCoords(ev, self.screenElement, self.charMeasure, self.cols, self.rows);\n            if (!pos)\n                return;\n            button += 32;\n            sendEvent(button, pos);\n        }\n        function encode(data, ch) {\n            if (!self.utfMouse) {\n                if (ch === 255) {\n                    data.push(0);\n                    return;\n                }\n                if (ch > 127)\n                    ch = 127;\n                data.push(ch);\n            }\n            else {\n                if (ch > 2047) {\n                    data.push(2047);\n                    return;\n                }\n                data.push(ch);\n            }\n        }\n        function sendEvent(button, pos) {\n            if (self._vt300Mouse) {\n                button &= 3;\n                pos.x -= 32;\n                pos.y -= 32;\n                var data_1 = EscapeSequences_1.C0.ESC + '[24';\n                if (button === 0)\n                    data_1 += '1';\n                else if (button === 1)\n                    data_1 += '3';\n                else if (button === 2)\n                    data_1 += '5';\n                else if (button === 3)\n                    return;\n                else\n                    data_1 += '0';\n                data_1 += '~[' + pos.x + ',' + pos.y + ']\\r';\n                self.handler(data_1);\n                return;\n            }\n            if (self._decLocator) {\n                button &= 3;\n                pos.x -= 32;\n                pos.y -= 32;\n                if (button === 0)\n                    button = 2;\n                else if (button === 1)\n                    button = 4;\n                else if (button === 2)\n                    button = 6;\n                else if (button === 3)\n                    button = 3;\n                self.handler(EscapeSequences_1.C0.ESC + '['\n                    + button\n                    + ';'\n                    + (button === 3 ? 4 : 0)\n                    + ';'\n                    + pos.y\n                    + ';'\n                    + pos.x\n                    + ';'\n                    + pos.page || 0\n                    + '&w');\n                return;\n            }\n            if (self.urxvtMouse) {\n                pos.x -= 32;\n                pos.y -= 32;\n                pos.x++;\n                pos.y++;\n                self.handler(EscapeSequences_1.C0.ESC + '[' + button + ';' + pos.x + ';' + pos.y + 'M');\n                return;\n            }\n            if (self.sgrMouse) {\n                pos.x -= 32;\n                pos.y -= 32;\n                self.handler(EscapeSequences_1.C0.ESC + '[<'\n                    + (((button & 3) === 3 ? button & ~3 : button) - 32)\n                    + ';'\n                    + pos.x\n                    + ';'\n                    + pos.y\n                    + ((button & 3) === 3 ? 'm' : 'M'));\n                return;\n            }\n            var data = [];\n            encode(data, button);\n            encode(data, pos.x);\n            encode(data, pos.y);\n            self.handler(EscapeSequences_1.C0.ESC + '[M' + String.fromCharCode.apply(String, data));\n        }\n        function getButton(ev) {\n            var button;\n            var shift;\n            var meta;\n            var ctrl;\n            var mod;\n            switch (ev.overrideType || ev.type) {\n                case 'mousedown':\n                    button = ev.button !== null && ev.button !== undefined\n                        ? +ev.button\n                        : ev.which !== null && ev.which !== undefined\n                            ? ev.which - 1\n                            : null;\n                    if (Browser.isMSIE) {\n                        button = button === 1 ? 0 : button === 4 ? 1 : button;\n                    }\n                    break;\n                case 'mouseup':\n                    button = 3;\n                    break;\n                case 'DOMMouseScroll':\n                    button = ev.detail < 0\n                        ? 64\n                        : 65;\n                    break;\n                case 'wheel':\n                    button = ev.deltaY < 0\n                        ? 64\n                        : 65;\n                    break;\n            }\n            shift = ev.shiftKey ? 4 : 0;\n            meta = ev.metaKey ? 8 : 0;\n            ctrl = ev.ctrlKey ? 16 : 0;\n            mod = shift | meta | ctrl;\n            if (self.vt200Mouse) {\n                mod &= ctrl;\n            }\n            else if (!self.normalMouse) {\n                mod = 0;\n            }\n            button = (32 + (mod << 2)) + button;\n            return button;\n        }\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'mousedown', function (ev) {\n            ev.preventDefault();\n            _this.focus();\n            if (!_this.mouseEvents || _this.selectionManager.shouldForceSelection(ev)) {\n                return;\n            }\n            sendButton(ev);\n            if (_this.vt200Mouse) {\n                ev.overrideType = 'mouseup';\n                sendButton(ev);\n                return _this.cancel(ev);\n            }\n            var moveHandler;\n            if (_this.normalMouse) {\n                moveHandler = function (event) {\n                    if (!_this.normalMouse) {\n                        return;\n                    }\n                    sendMove(event);\n                };\n                _this._document.addEventListener('mousemove', moveHandler);\n            }\n            var handler = function (ev) {\n                if (_this.normalMouse && !_this.x10Mouse) {\n                    sendButton(ev);\n                }\n                if (moveHandler) {\n                    _this._document.removeEventListener('mousemove', moveHandler);\n                    moveHandler = null;\n                }\n                _this._document.removeEventListener('mouseup', handler);\n                return _this.cancel(ev);\n            };\n            _this._document.addEventListener('mouseup', handler);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {\n            if (!_this.mouseEvents) {\n                if (!_this.buffer.hasScrollback) {\n                    var amount = _this.viewport.getLinesScrolled(ev);\n                    if (amount === 0) {\n                        return;\n                    }\n                    var sequence = EscapeSequences_1.C0.ESC + (_this.applicationCursor ? 'O' : '[') + (ev.deltaY < 0 ? 'A' : 'B');\n                    var data = '';\n                    for (var i = 0; i < Math.abs(amount); i++) {\n                        data += sequence;\n                    }\n                    _this.handler(data);\n                }\n                return;\n            }\n            if (_this.x10Mouse || _this._vt300Mouse || _this._decLocator)\n                return;\n            sendButton(ev);\n            ev.preventDefault();\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onWheel(ev);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchstart', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onTouchStart(ev);\n            return _this.cancel(ev);\n        }));\n        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchmove', function (ev) {\n            if (_this.mouseEvents)\n                return;\n            _this.viewport.onTouchMove(ev);\n            return _this.cancel(ev);\n        }));\n    };\n    Terminal.prototype.refresh = function (start, end) {\n        if (this._renderCoordinator) {\n            this._renderCoordinator.refreshRows(start, end);\n        }\n    };\n    Terminal.prototype._queueLinkification = function (start, end) {\n        if (this.linkifier) {\n            this.linkifier.linkifyRows(start, end);\n        }\n    };\n    Terminal.prototype.updateCursorStyle = function (ev) {\n        if (this.selectionManager && this.selectionManager.shouldColumnSelect(ev)) {\n            this.element.classList.add('column-select');\n        }\n        else {\n            this.element.classList.remove('column-select');\n        }\n    };\n    Terminal.prototype.showCursor = function () {\n        if (!this.cursorState) {\n            this.cursorState = 1;\n            this.refresh(this.buffer.y, this.buffer.y);\n        }\n    };\n    Terminal.prototype.scroll = function (isWrapped) {\n        if (isWrapped === void 0) { isWrapped = false; }\n        var newLine;\n        newLine = this._blankLine;\n        var eraseAttr = this.eraseAttrData();\n        if (!newLine || newLine.length !== this.cols || newLine.getFg(0) !== eraseAttr.fg || newLine.getBg(0) !== eraseAttr.bg) {\n            newLine = this.buffer.getBlankLine(eraseAttr, isWrapped);\n            this._blankLine = newLine;\n        }\n        newLine.isWrapped = isWrapped;\n        var topRow = this.buffer.ybase + this.buffer.scrollTop;\n        var bottomRow = this.buffer.ybase + this.buffer.scrollBottom;\n        if (this.buffer.scrollTop === 0) {\n            var willBufferBeTrimmed = this.buffer.lines.isFull;\n            if (bottomRow === this.buffer.lines.length - 1) {\n                if (willBufferBeTrimmed) {\n                    this.buffer.lines.recycle().copyFrom(newLine);\n                }\n                else {\n                    this.buffer.lines.push(newLine.clone());\n                }\n            }\n            else {\n                this.buffer.lines.splice(bottomRow + 1, 0, newLine.clone());\n            }\n            if (!willBufferBeTrimmed) {\n                this.buffer.ybase++;\n                if (!this._userScrolling) {\n                    this.buffer.ydisp++;\n                }\n            }\n            else {\n                if (this._userScrolling) {\n                    this.buffer.ydisp = Math.max(this.buffer.ydisp - 1, 0);\n                }\n            }\n        }\n        else {\n            var scrollRegionHeight = bottomRow - topRow + 1;\n            this.buffer.lines.shiftElements(topRow + 1, scrollRegionHeight - 1, -1);\n            this.buffer.lines.set(bottomRow, newLine.clone());\n        }\n        if (!this._userScrolling) {\n            this.buffer.ydisp = this.buffer.ybase;\n        }\n        this.updateRange(this.buffer.scrollTop);\n        this.updateRange(this.buffer.scrollBottom);\n        this._onScroll.fire(this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollLines = function (disp, suppressScrollEvent) {\n        if (disp < 0) {\n            if (this.buffer.ydisp === 0) {\n                return;\n            }\n            this._userScrolling = true;\n        }\n        else if (disp + this.buffer.ydisp >= this.buffer.ybase) {\n            this._userScrolling = false;\n        }\n        var oldYdisp = this.buffer.ydisp;\n        this.buffer.ydisp = Math.max(Math.min(this.buffer.ydisp + disp, this.buffer.ybase), 0);\n        if (oldYdisp === this.buffer.ydisp) {\n            return;\n        }\n        if (!suppressScrollEvent) {\n            this._onScroll.fire(this.buffer.ydisp);\n        }\n        this.refresh(0, this.rows - 1);\n    };\n    Terminal.prototype.scrollPages = function (pageCount) {\n        this.scrollLines(pageCount * (this.rows - 1));\n    };\n    Terminal.prototype.scrollToTop = function () {\n        this.scrollLines(-this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollToBottom = function () {\n        this.scrollLines(this.buffer.ybase - this.buffer.ydisp);\n    };\n    Terminal.prototype.scrollToLine = function (line) {\n        var scrollAmount = line - this.buffer.ydisp;\n        if (scrollAmount !== 0) {\n            this.scrollLines(scrollAmount);\n        }\n    };\n    Terminal.prototype.writeUtf8 = function (data) {\n        var _this = this;\n        if (this._isDisposed) {\n            return;\n        }\n        if (!data) {\n            return;\n        }\n        this.writeBufferUtf8.push(data);\n        if (this.options.useFlowControl && !this._xoffSentToCatchUp && this.writeBufferUtf8.length >= WRITE_BUFFER_PAUSE_THRESHOLD) {\n            this.handler(EscapeSequences_1.C0.DC3);\n            this._xoffSentToCatchUp = true;\n        }\n        if (!this._writeInProgress && this.writeBufferUtf8.length > 0) {\n            this._writeInProgress = true;\n            setTimeout(function () {\n                _this._innerWriteUtf8();\n            });\n        }\n    };\n    Terminal.prototype._innerWriteUtf8 = function (bufferOffset) {\n        var _this = this;\n        if (bufferOffset === void 0) { bufferOffset = 0; }\n        if (this._isDisposed) {\n            this.writeBufferUtf8 = [];\n        }\n        var startTime = Date.now();\n        while (this.writeBufferUtf8.length > bufferOffset) {\n            var data = this.writeBufferUtf8[bufferOffset];\n            bufferOffset++;\n            if (this._xoffSentToCatchUp && this.writeBufferUtf8.length === bufferOffset) {\n                this.handler(EscapeSequences_1.C0.DC1);\n                this._xoffSentToCatchUp = false;\n            }\n            this._refreshStart = this.buffer.y;\n            this._refreshEnd = this.buffer.y;\n            this._inputHandler.parseUtf8(data);\n            this.updateRange(this.buffer.y);\n            this.refresh(this._refreshStart, this._refreshEnd);\n            if (Date.now() - startTime >= WRITE_TIMEOUT_MS) {\n                break;\n            }\n        }\n        if (this.writeBufferUtf8.length > bufferOffset) {\n            if (bufferOffset > WRITE_BUFFER_LENGTH_THRESHOLD) {\n                this.writeBufferUtf8 = this.writeBufferUtf8.slice(bufferOffset);\n                bufferOffset = 0;\n            }\n            setTimeout(function () { return _this._innerWriteUtf8(bufferOffset); }, 0);\n        }\n        else {\n            this._writeInProgress = false;\n            this.writeBufferUtf8 = [];\n        }\n    };\n    Terminal.prototype.write = function (data) {\n        var _this = this;\n        if (this._isDisposed) {\n            return;\n        }\n        if (!data) {\n            return;\n        }\n        this.writeBuffer.push(data);\n        if (this.options.useFlowControl && !this._xoffSentToCatchUp && this.writeBuffer.length >= WRITE_BUFFER_PAUSE_THRESHOLD) {\n            this.handler(EscapeSequences_1.C0.DC3);\n            this._xoffSentToCatchUp = true;\n        }\n        if (!this._writeInProgress && this.writeBuffer.length > 0) {\n            this._writeInProgress = true;\n            setTimeout(function () {\n                _this._innerWrite();\n            });\n        }\n    };\n    Terminal.prototype._innerWrite = function (bufferOffset) {\n        var _this = this;\n        if (bufferOffset === void 0) { bufferOffset = 0; }\n        if (this._isDisposed) {\n            this.writeBuffer = [];\n        }\n        var startTime = Date.now();\n        while (this.writeBuffer.length > bufferOffset) {\n            var data = this.writeBuffer[bufferOffset];\n            bufferOffset++;\n            if (this._xoffSentToCatchUp && this.writeBuffer.length === bufferOffset) {\n                this.handler(EscapeSequences_1.C0.DC1);\n                this._xoffSentToCatchUp = false;\n            }\n            this._refreshStart = this.buffer.y;\n            this._refreshEnd = this.buffer.y;\n            this._inputHandler.parse(data);\n            this.updateRange(this.buffer.y);\n            this.refresh(this._refreshStart, this._refreshEnd);\n            if (Date.now() - startTime >= WRITE_TIMEOUT_MS) {\n                break;\n            }\n        }\n        if (this.writeBuffer.length > bufferOffset) {\n            if (bufferOffset > WRITE_BUFFER_LENGTH_THRESHOLD) {\n                this.writeBuffer = this.writeBuffer.slice(bufferOffset);\n                bufferOffset = 0;\n            }\n            setTimeout(function () { return _this._innerWrite(bufferOffset); }, 0);\n        }\n        else {\n            this._writeInProgress = false;\n            this.writeBuffer = [];\n        }\n    };\n    Terminal.prototype.writeln = function (data) {\n        this.write(data + '\\r\\n');\n    };\n    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {\n        this._customKeyEventHandler = customKeyEventHandler;\n    };\n    Terminal.prototype.addCsiHandler = function (flag, callback) {\n        return this._inputHandler.addCsiHandler(flag, callback);\n    };\n    Terminal.prototype.addOscHandler = function (ident, callback) {\n        return this._inputHandler.addOscHandler(ident, callback);\n    };\n    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {\n        var matcherId = this.linkifier.registerLinkMatcher(regex, handler, options);\n        this.refresh(0, this.rows - 1);\n        return matcherId;\n    };\n    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {\n        if (this.linkifier.deregisterLinkMatcher(matcherId)) {\n            this.refresh(0, this.rows - 1);\n        }\n    };\n    Terminal.prototype.registerCharacterJoiner = function (handler) {\n        var joinerId = this._renderCoordinator.registerCharacterJoiner(handler);\n        this.refresh(0, this.rows - 1);\n        return joinerId;\n    };\n    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {\n        if (this._renderCoordinator.deregisterCharacterJoiner(joinerId)) {\n            this.refresh(0, this.rows - 1);\n        }\n    };\n    Object.defineProperty(Terminal.prototype, \"markers\", {\n        get: function () {\n            return this.buffer.markers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Terminal.prototype.addMarker = function (cursorYOffset) {\n        if (this.buffer !== this.buffers.normal) {\n            return;\n        }\n        return this.buffer.addMarker(this.buffer.ybase + this.buffer.y + cursorYOffset);\n    };\n    Terminal.prototype.hasSelection = function () {\n        return this.selectionManager ? this.selectionManager.hasSelection : false;\n    };\n    Terminal.prototype.select = function (column, row, length) {\n        this.selectionManager.setSelection(column, row, length);\n    };\n    Terminal.prototype.getSelection = function () {\n        return this.selectionManager ? this.selectionManager.selectionText : '';\n    };\n    Terminal.prototype.getSelectionPosition = function () {\n        if (!this.selectionManager.hasSelection) {\n            return undefined;\n        }\n        return {\n            startColumn: this.selectionManager.selectionStart[0],\n            startRow: this.selectionManager.selectionStart[1],\n            endColumn: this.selectionManager.selectionEnd[0],\n            endRow: this.selectionManager.selectionEnd[1]\n        };\n    };\n    Terminal.prototype.clearSelection = function () {\n        if (this.selectionManager) {\n            this.selectionManager.clearSelection();\n        }\n    };\n    Terminal.prototype.selectAll = function () {\n        if (this.selectionManager) {\n            this.selectionManager.selectAll();\n        }\n    };\n    Terminal.prototype.selectLines = function (start, end) {\n        if (this.selectionManager) {\n            this.selectionManager.selectLines(start, end);\n        }\n    };\n    Terminal.prototype._keyDown = function (event) {\n        if (this._customKeyEventHandler && this._customKeyEventHandler(event) === false) {\n            return false;\n        }\n        if (!this._compositionHelper.keydown(event)) {\n            if (this.buffer.ybase !== this.buffer.ydisp) {\n                this.scrollToBottom();\n            }\n            return false;\n        }\n        var result = Keyboard_1.evaluateKeyboardEvent(event, this.applicationCursor, this.browser.isMac, this.options.macOptionIsMeta);\n        this.updateCursorStyle(event);\n        if (result.type === 3 || result.type === 2) {\n            var scrollCount = this.rows - 1;\n            this.scrollLines(result.type === 2 ? -scrollCount : scrollCount);\n            return this.cancel(event, true);\n        }\n        if (result.type === 1) {\n            this.selectAll();\n        }\n        if (this._isThirdLevelShift(this.browser, event)) {\n            return true;\n        }\n        if (result.cancel) {\n            this.cancel(event, true);\n        }\n        if (!result.key) {\n            return true;\n        }\n        this.emit('keydown', event);\n        this._onKey.fire({ key: result.key, domEvent: event });\n        this.showCursor();\n        this.handler(result.key);\n        return this.cancel(event, true);\n    };\n    Terminal.prototype._isThirdLevelShift = function (browser, ev) {\n        var thirdLevelKey = (browser.isMac && !this.options.macOptionIsMeta && ev.altKey && !ev.ctrlKey && !ev.metaKey) ||\n            (browser.isMSWindows && ev.altKey && ev.ctrlKey && !ev.metaKey);\n        if (ev.type === 'keypress') {\n            return thirdLevelKey;\n        }\n        return thirdLevelKey && (!ev.keyCode || ev.keyCode > 47);\n    };\n    Terminal.prototype.setgLevel = function (g) {\n        this.glevel = g;\n        this.charset = this.charsets[g];\n    };\n    Terminal.prototype.setgCharset = function (g, charset) {\n        this.charsets[g] = charset;\n        if (this.glevel === g) {\n            this.charset = charset;\n        }\n    };\n    Terminal.prototype._keyUp = function (ev) {\n        this.updateCursorStyle(ev);\n    };\n    Terminal.prototype._keyPress = function (ev) {\n        var key;\n        if (this._customKeyEventHandler && this._customKeyEventHandler(ev) === false) {\n            return false;\n        }\n        this.cancel(ev);\n        if (ev.charCode) {\n            key = ev.charCode;\n        }\n        else if (ev.which === null || ev.which === undefined) {\n            key = ev.keyCode;\n        }\n        else if (ev.which !== 0 && ev.charCode !== 0) {\n            key = ev.which;\n        }\n        else {\n            return false;\n        }\n        if (!key || ((ev.altKey || ev.ctrlKey || ev.metaKey) && !this._isThirdLevelShift(this.browser, ev))) {\n            return false;\n        }\n        key = String.fromCharCode(key);\n        this.emit('keypress', key, ev);\n        this._onKey.fire({ key: key, domEvent: ev });\n        this.showCursor();\n        this.handler(key);\n        return true;\n    };\n    Terminal.prototype.bell = function () {\n        var _this = this;\n        this.emit('bell');\n        if (this._soundBell()) {\n            this.soundManager.playBellSound();\n        }\n        if (this._visualBell()) {\n            this.element.classList.add('visual-bell-active');\n            clearTimeout(this._visualBellTimer);\n            this._visualBellTimer = window.setTimeout(function () {\n                _this.element.classList.remove('visual-bell-active');\n            }, 200);\n        }\n    };\n    Terminal.prototype.log = function (text, data) {\n        if (!this.options.debug)\n            return;\n        if (!this._context.console || !this._context.console.log)\n            return;\n        this._context.console.log(text, data);\n    };\n    Terminal.prototype.error = function (text, data) {\n        if (!this.options.debug)\n            return;\n        if (!this._context.console || !this._context.console.error)\n            return;\n        this._context.console.error(text, data);\n    };\n    Terminal.prototype.resize = function (x, y) {\n        if (isNaN(x) || isNaN(y)) {\n            return;\n        }\n        if (x === this.cols && y === this.rows) {\n            if (this.charMeasure && (!this.charMeasure.width || !this.charMeasure.height)) {\n                this.charMeasure.measure(this.options);\n            }\n            return;\n        }\n        if (x < MINIMUM_COLS)\n            x = MINIMUM_COLS;\n        if (y < MINIMUM_ROWS)\n            y = MINIMUM_ROWS;\n        this.buffers.resize(x, y);\n        this.cols = x;\n        this.rows = y;\n        this.buffers.setupTabStops(this.cols);\n        if (this.charMeasure) {\n            this.charMeasure.measure(this.options);\n        }\n        this.refresh(0, this.rows - 1);\n        this._onResize.fire({ cols: x, rows: y });\n    };\n    Terminal.prototype.updateRange = function (y) {\n        if (y < this._refreshStart)\n            this._refreshStart = y;\n        if (y > this._refreshEnd)\n            this._refreshEnd = y;\n    };\n    Terminal.prototype.maxRange = function () {\n        this._refreshStart = 0;\n        this._refreshEnd = this.rows - 1;\n    };\n    Terminal.prototype.clear = function () {\n        if (this.buffer.ybase === 0 && this.buffer.y === 0) {\n            return;\n        }\n        this.buffer.lines.set(0, this.buffer.lines.get(this.buffer.ybase + this.buffer.y));\n        this.buffer.lines.length = 1;\n        this.buffer.ydisp = 0;\n        this.buffer.ybase = 0;\n        this.buffer.y = 0;\n        for (var i = 1; i < this.rows; i++) {\n            this.buffer.lines.push(this.buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));\n        }\n        this.refresh(0, this.rows - 1);\n        this._onScroll.fire(this.buffer.ydisp);\n    };\n    Terminal.prototype.is = function (term) {\n        return (this.options.termName + '').indexOf(term) === 0;\n    };\n    Terminal.prototype.handler = function (data) {\n        if (this.options.disableStdin) {\n            return;\n        }\n        if (this.selectionManager && this.selectionManager.hasSelection) {\n            this.selectionManager.clearSelection();\n        }\n        if (this.buffer.ybase !== this.buffer.ydisp) {\n            this.scrollToBottom();\n        }\n        this._onData.fire(data);\n    };\n    Terminal.prototype.handleTitle = function (title) {\n        this._onTitleChange.fire(title);\n    };\n    Terminal.prototype.index = function () {\n        this.buffer.y++;\n        if (this.buffer.y > this.buffer.scrollBottom) {\n            this.buffer.y--;\n            this.scroll();\n        }\n        if (this.buffer.x >= this.cols) {\n            this.buffer.x--;\n        }\n    };\n    Terminal.prototype.reverseIndex = function () {\n        if (this.buffer.y === this.buffer.scrollTop) {\n            var scrollRegionHeight = this.buffer.scrollBottom - this.buffer.scrollTop;\n            this.buffer.lines.shiftElements(this.buffer.y + this.buffer.ybase, scrollRegionHeight, 1);\n            this.buffer.lines.set(this.buffer.y + this.buffer.ybase, this.buffer.getBlankLine(this.eraseAttrData()));\n            this.updateRange(this.buffer.scrollTop);\n            this.updateRange(this.buffer.scrollBottom);\n        }\n        else {\n            this.buffer.y--;\n        }\n    };\n    Terminal.prototype.reset = function () {\n        this.options.rows = this.rows;\n        this.options.cols = this.cols;\n        var customKeyEventHandler = this._customKeyEventHandler;\n        var inputHandler = this._inputHandler;\n        var cursorState = this.cursorState;\n        var writeBuffer = this.writeBuffer;\n        var writeBufferUtf8 = this.writeBufferUtf8;\n        var writeInProgress = this._writeInProgress;\n        var xoffSentToCatchUp = this._xoffSentToCatchUp;\n        var userScrolling = this._userScrolling;\n        this._setup();\n        this._customKeyEventHandler = customKeyEventHandler;\n        this._inputHandler = inputHandler;\n        this.cursorState = cursorState;\n        this.writeBuffer = writeBuffer;\n        this.writeBufferUtf8 = writeBufferUtf8;\n        this._writeInProgress = writeInProgress;\n        this._xoffSentToCatchUp = xoffSentToCatchUp;\n        this._userScrolling = userScrolling;\n        this.refresh(0, this.rows - 1);\n        if (this.viewport) {\n            this.viewport.syncScrollArea();\n        }\n    };\n    Terminal.prototype.tabSet = function () {\n        this.buffer.tabs[this.buffer.x] = true;\n    };\n    Terminal.prototype.cancel = function (ev, force) {\n        if (!this.options.cancelEvents && !force) {\n            return;\n        }\n        ev.preventDefault();\n        ev.stopPropagation();\n        return false;\n    };\n    Terminal.prototype._visualBell = function () {\n        return false;\n    };\n    Terminal.prototype._soundBell = function () {\n        return this.options.bellStyle === 'sound';\n    };\n    return Terminal;\n}(EventEmitter_1.EventEmitter));\nexports.Terminal = Terminal;\nfunction wasModifierKeyOnlyEvent(ev) {\n    return ev.keyCode === 16 ||\n        ev.keyCode === 17 ||\n        ev.keyCode === 18;\n}\n//# sourceMappingURL=Terminal.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Buffer_1 = require(\"./Buffer\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar BufferSet = (function () {\n    function BufferSet(_terminal) {\n        this._terminal = _terminal;\n        this._onBufferActivate = new EventEmitter2_1.EventEmitter2();\n        this._normal = new Buffer_1.Buffer(this._terminal, true);\n        this._normal.fillViewportRows();\n        this._alt = new Buffer_1.Buffer(this._terminal, false);\n        this._activeBuffer = this._normal;\n        this.setupTabStops();\n    }\n    Object.defineProperty(BufferSet.prototype, \"onBufferActivate\", {\n        get: function () { return this._onBufferActivate.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"alt\", {\n        get: function () {\n            return this._alt;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"active\", {\n        get: function () {\n            return this._activeBuffer;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BufferSet.prototype, \"normal\", {\n        get: function () {\n            return this._normal;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BufferSet.prototype.activateNormalBuffer = function () {\n        if (this._activeBuffer === this._normal) {\n            return;\n        }\n        this._normal.x = this._alt.x;\n        this._normal.y = this._alt.y;\n        this._alt.clear();\n        this._activeBuffer = this._normal;\n        this._onBufferActivate.fire({\n            activeBuffer: this._normal,\n            inactiveBuffer: this._alt\n        });\n    };\n    BufferSet.prototype.activateAltBuffer = function (fillAttr) {\n        if (this._activeBuffer === this._alt) {\n            return;\n        }\n        this._alt.fillViewportRows(fillAttr);\n        this._alt.x = this._normal.x;\n        this._alt.y = this._normal.y;\n        this._activeBuffer = this._alt;\n        this._onBufferActivate.fire({\n            activeBuffer: this._alt,\n            inactiveBuffer: this._normal\n        });\n    };\n    BufferSet.prototype.resize = function (newCols, newRows) {\n        this._normal.resize(newCols, newRows);\n        this._alt.resize(newCols, newRows);\n    };\n    BufferSet.prototype.setupTabStops = function (i) {\n        this._normal.setupTabStops(i);\n        this._alt.setupTabStops(i);\n    };\n    return BufferSet;\n}());\nexports.BufferSet = BufferSet;\n//# sourceMappingURL=BufferSet.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2_1 = require(\"./EventEmitter2\");\nvar CircularList = (function () {\n    function CircularList(_maxLength) {\n        this._maxLength = _maxLength;\n        this.onDeleteEmitter = new EventEmitter2_1.EventEmitter2();\n        this.onInsertEmitter = new EventEmitter2_1.EventEmitter2();\n        this.onTrimEmitter = new EventEmitter2_1.EventEmitter2();\n        this._array = new Array(this._maxLength);\n        this._startIndex = 0;\n        this._length = 0;\n    }\n    Object.defineProperty(CircularList.prototype, \"onDelete\", {\n        get: function () { return this.onDeleteEmitter.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"onInsert\", {\n        get: function () { return this.onInsertEmitter.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"onTrim\", {\n        get: function () { return this.onTrimEmitter.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"maxLength\", {\n        get: function () {\n            return this._maxLength;\n        },\n        set: function (newMaxLength) {\n            if (this._maxLength === newMaxLength) {\n                return;\n            }\n            var newArray = new Array(newMaxLength);\n            for (var i = 0; i < Math.min(newMaxLength, this.length); i++) {\n                newArray[i] = this._array[this._getCyclicIndex(i)];\n            }\n            this._array = newArray;\n            this._maxLength = newMaxLength;\n            this._startIndex = 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CircularList.prototype, \"length\", {\n        get: function () {\n            return this._length;\n        },\n        set: function (newLength) {\n            if (newLength > this._length) {\n                for (var i = this._length; i < newLength; i++) {\n                    this._array[i] = undefined;\n                }\n            }\n            this._length = newLength;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CircularList.prototype.get = function (index) {\n        return this._array[this._getCyclicIndex(index)];\n    };\n    CircularList.prototype.set = function (index, value) {\n        this._array[this._getCyclicIndex(index)] = value;\n    };\n    CircularList.prototype.push = function (value) {\n        this._array[this._getCyclicIndex(this._length)] = value;\n        if (this._length === this._maxLength) {\n            this._startIndex = ++this._startIndex % this._maxLength;\n            this.onTrimEmitter.fire(1);\n        }\n        else {\n            this._length++;\n        }\n    };\n    CircularList.prototype.recycle = function () {\n        if (this._length !== this._maxLength) {\n            throw new Error('Can only recycle when the buffer is full');\n        }\n        this._startIndex = ++this._startIndex % this._maxLength;\n        this.onTrimEmitter.fire(1);\n        return this._array[this._getCyclicIndex(this._length - 1)];\n    };\n    Object.defineProperty(CircularList.prototype, \"isFull\", {\n        get: function () {\n            return this._length === this._maxLength;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CircularList.prototype.pop = function () {\n        return this._array[this._getCyclicIndex(this._length-- - 1)];\n    };\n    CircularList.prototype.splice = function (start, deleteCount) {\n        var items = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            items[_i - 2] = arguments[_i];\n        }\n        if (deleteCount) {\n            for (var i = start; i < this._length - deleteCount; i++) {\n                this._array[this._getCyclicIndex(i)] = this._array[this._getCyclicIndex(i + deleteCount)];\n            }\n            this._length -= deleteCount;\n        }\n        for (var i = this._length - 1; i >= start; i--) {\n            this._array[this._getCyclicIndex(i + items.length)] = this._array[this._getCyclicIndex(i)];\n        }\n        for (var i = 0; i < items.length; i++) {\n            this._array[this._getCyclicIndex(start + i)] = items[i];\n        }\n        if (this._length + items.length > this._maxLength) {\n            var countToTrim = (this._length + items.length) - this._maxLength;\n            this._startIndex += countToTrim;\n            this._length = this._maxLength;\n            this.onTrimEmitter.fire(countToTrim);\n        }\n        else {\n            this._length += items.length;\n        }\n    };\n    CircularList.prototype.trimStart = function (count) {\n        if (count > this._length) {\n            count = this._length;\n        }\n        this._startIndex += count;\n        this._length -= count;\n        this.onTrimEmitter.fire(count);\n    };\n    CircularList.prototype.shiftElements = function (start, count, offset) {\n        if (count <= 0) {\n            return;\n        }\n        if (start < 0 || start >= this._length) {\n            throw new Error('start argument out of range');\n        }\n        if (start + offset < 0) {\n            throw new Error('Cannot shift elements in list beyond index 0');\n        }\n        if (offset > 0) {\n            for (var i = count - 1; i >= 0; i--) {\n                this.set(start + i + offset, this.get(start + i));\n            }\n            var expandListBy = (start + count + offset) - this._length;\n            if (expandListBy > 0) {\n                this._length += expandListBy;\n                while (this._length > this._maxLength) {\n                    this._length--;\n                    this._startIndex++;\n                    this.onTrimEmitter.fire(1);\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < count; i++) {\n                this.set(start + i + offset, this.get(start + i));\n            }\n        }\n    };\n    CircularList.prototype._getCyclicIndex = function (index) {\n        return (this._startIndex + index) % this._maxLength;\n    };\n    return CircularList;\n}());\nexports.CircularList = CircularList;\n//# sourceMappingURL=CircularList.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction reflowLargerGetLinesToRemove(lines, oldCols, newCols, bufferAbsoluteY, nullCell) {\n    var toRemove = [];\n    for (var y = 0; y < lines.length - 1; y++) {\n        var i = y;\n        var nextLine = lines.get(++i);\n        if (!nextLine.isWrapped) {\n            continue;\n        }\n        var wrappedLines = [lines.get(y)];\n        while (i < lines.length && nextLine.isWrapped) {\n            wrappedLines.push(nextLine);\n            nextLine = lines.get(++i);\n        }\n        if (bufferAbsoluteY >= y && bufferAbsoluteY < i) {\n            y += wrappedLines.length - 1;\n            continue;\n        }\n        var destLineIndex = 0;\n        var destCol = getWrappedLineTrimmedLength(wrappedLines, destLineIndex, oldCols);\n        var srcLineIndex = 1;\n        var srcCol = 0;\n        while (srcLineIndex < wrappedLines.length) {\n            var srcTrimmedTineLength = getWrappedLineTrimmedLength(wrappedLines, srcLineIndex, oldCols);\n            var srcRemainingCells = srcTrimmedTineLength - srcCol;\n            var destRemainingCells = newCols - destCol;\n            var cellsToCopy = Math.min(srcRemainingCells, destRemainingCells);\n            wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol, destCol, cellsToCopy, false);\n            destCol += cellsToCopy;\n            if (destCol === newCols) {\n                destLineIndex++;\n                destCol = 0;\n            }\n            srcCol += cellsToCopy;\n            if (srcCol === srcTrimmedTineLength) {\n                srcLineIndex++;\n                srcCol = 0;\n            }\n            if (destCol === 0 && destLineIndex !== 0) {\n                if (wrappedLines[destLineIndex - 1].getWidth(newCols - 1) === 2) {\n                    wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[destLineIndex - 1], newCols - 1, destCol++, 1, false);\n                    wrappedLines[destLineIndex - 1].setCell(newCols - 1, nullCell);\n                }\n            }\n        }\n        wrappedLines[destLineIndex].replaceCells(destCol, newCols, nullCell);\n        var countToRemove = 0;\n        for (var i_1 = wrappedLines.length - 1; i_1 > 0; i_1--) {\n            if (i_1 > destLineIndex || wrappedLines[i_1].getTrimmedLength() === 0) {\n                countToRemove++;\n            }\n            else {\n                break;\n            }\n        }\n        if (countToRemove > 0) {\n            toRemove.push(y + wrappedLines.length - countToRemove);\n            toRemove.push(countToRemove);\n        }\n        y += wrappedLines.length - 1;\n    }\n    return toRemove;\n}\nexports.reflowLargerGetLinesToRemove = reflowLargerGetLinesToRemove;\nfunction reflowLargerCreateNewLayout(lines, toRemove) {\n    var layout = [];\n    var nextToRemoveIndex = 0;\n    var nextToRemoveStart = toRemove[nextToRemoveIndex];\n    var countRemovedSoFar = 0;\n    for (var i = 0; i < lines.length; i++) {\n        if (nextToRemoveStart === i) {\n            var countToRemove = toRemove[++nextToRemoveIndex];\n            lines.onDeleteEmitter.fire({\n                index: i - countRemovedSoFar,\n                amount: countToRemove\n            });\n            i += countToRemove - 1;\n            countRemovedSoFar += countToRemove;\n            nextToRemoveStart = toRemove[++nextToRemoveIndex];\n        }\n        else {\n            layout.push(i);\n        }\n    }\n    return {\n        layout: layout,\n        countRemoved: countRemovedSoFar\n    };\n}\nexports.reflowLargerCreateNewLayout = reflowLargerCreateNewLayout;\nfunction reflowLargerApplyNewLayout(lines, newLayout) {\n    var newLayoutLines = [];\n    for (var i = 0; i < newLayout.length; i++) {\n        newLayoutLines.push(lines.get(newLayout[i]));\n    }\n    for (var i = 0; i < newLayoutLines.length; i++) {\n        lines.set(i, newLayoutLines[i]);\n    }\n    lines.length = newLayout.length;\n}\nexports.reflowLargerApplyNewLayout = reflowLargerApplyNewLayout;\nfunction reflowSmallerGetNewLineLengths(wrappedLines, oldCols, newCols) {\n    var newLineLengths = [];\n    var cellsNeeded = wrappedLines.map(function (l, i) { return getWrappedLineTrimmedLength(wrappedLines, i, oldCols); }).reduce(function (p, c) { return p + c; });\n    var srcCol = 0;\n    var srcLine = 0;\n    var cellsAvailable = 0;\n    while (cellsAvailable < cellsNeeded) {\n        if (cellsNeeded - cellsAvailable < newCols) {\n            newLineLengths.push(cellsNeeded - cellsAvailable);\n            break;\n        }\n        srcCol += newCols;\n        var oldTrimmedLength = getWrappedLineTrimmedLength(wrappedLines, srcLine, oldCols);\n        if (srcCol > oldTrimmedLength) {\n            srcCol -= oldTrimmedLength;\n            srcLine++;\n        }\n        var endsWithWide = wrappedLines[srcLine].getWidth(srcCol - 1) === 2;\n        if (endsWithWide) {\n            srcCol--;\n        }\n        var lineLength = endsWithWide ? newCols - 1 : newCols;\n        newLineLengths.push(lineLength);\n        cellsAvailable += lineLength;\n    }\n    return newLineLengths;\n}\nexports.reflowSmallerGetNewLineLengths = reflowSmallerGetNewLineLengths;\nfunction getWrappedLineTrimmedLength(lines, i, cols) {\n    if (i === lines.length - 1) {\n        return lines[i].getTrimmedLength();\n    }\n    var endsInNull = !(lines[i].hasContent(cols - 1)) && lines[i].getWidth(cols - 1) === 1;\n    var followingLineStartsWithWide = lines[i + 1].getWidth(0) === 2;\n    if (endsInNull && followingLineStartsWithWide) {\n        return cols - 1;\n    }\n    return cols;\n}\nexports.getWrappedLineTrimmedLength = getWrappedLineTrimmedLength;\n//# sourceMappingURL=BufferReflow.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2_1 = require(\"../../common/EventEmitter2\");\nvar Lifecycle_1 = require(\"../../common/Lifecycle\");\nvar Marker = (function (_super) {\n    __extends(Marker, _super);\n    function Marker(line) {\n        var _this = _super.call(this) || this;\n        _this.line = line;\n        _this._id = Marker._nextId++;\n        _this.isDisposed = false;\n        _this._onDispose = new EventEmitter2_1.EventEmitter2();\n        return _this;\n    }\n    Object.defineProperty(Marker.prototype, \"id\", {\n        get: function () { return this._id; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Marker.prototype, \"onDispose\", {\n        get: function () { return this._onDispose.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Marker.prototype.dispose = function () {\n        if (this.isDisposed) {\n            return;\n        }\n        this.isDisposed = true;\n        this._onDispose.fire();\n    };\n    Marker._nextId = 1;\n    return Marker;\n}(Lifecycle_1.Disposable));\nexports.Marker = Marker;\n//# sourceMappingURL=Marker.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CompositionHelper = (function () {\n    function CompositionHelper(_textarea, _compositionView, _terminal) {\n        this._textarea = _textarea;\n        this._compositionView = _compositionView;\n        this._terminal = _terminal;\n        this._isComposing = false;\n        this._isSendingComposition = false;\n        this._compositionPosition = { start: null, end: null };\n    }\n    CompositionHelper.prototype.compositionstart = function () {\n        this._isComposing = true;\n        this._compositionPosition.start = this._textarea.value.length;\n        this._compositionView.textContent = '';\n        this._compositionView.classList.add('active');\n    };\n    CompositionHelper.prototype.compositionupdate = function (ev) {\n        var _this = this;\n        this._compositionView.textContent = ev.data;\n        this.updateCompositionElements();\n        setTimeout(function () {\n            _this._compositionPosition.end = _this._textarea.value.length;\n        }, 0);\n    };\n    CompositionHelper.prototype.compositionend = function () {\n        this._finalizeComposition(true);\n    };\n    CompositionHelper.prototype.keydown = function (ev) {\n        if (this._isComposing || this._isSendingComposition) {\n            if (ev.keyCode === 229) {\n                return false;\n            }\n            else if (ev.keyCode === 16 || ev.keyCode === 17 || ev.keyCode === 18) {\n                return false;\n            }\n            this._finalizeComposition(false);\n        }\n        if (ev.keyCode === 229) {\n            this._handleAnyTextareaChanges();\n            return false;\n        }\n        return true;\n    };\n    CompositionHelper.prototype._finalizeComposition = function (waitForPropagation) {\n        var _this = this;\n        this._compositionView.classList.remove('active');\n        this._isComposing = false;\n        this._clearTextareaPosition();\n        if (!waitForPropagation) {\n            this._isSendingComposition = false;\n            var input = this._textarea.value.substring(this._compositionPosition.start, this._compositionPosition.end);\n            this._terminal.handler(input);\n        }\n        else {\n            var currentCompositionPosition_1 = {\n                start: this._compositionPosition.start,\n                end: this._compositionPosition.end\n            };\n            this._isSendingComposition = true;\n            setTimeout(function () {\n                if (_this._isSendingComposition) {\n                    _this._isSendingComposition = false;\n                    var input = void 0;\n                    if (_this._isComposing) {\n                        input = _this._textarea.value.substring(currentCompositionPosition_1.start, currentCompositionPosition_1.end);\n                    }\n                    else {\n                        input = _this._textarea.value.substring(currentCompositionPosition_1.start);\n                    }\n                    _this._terminal.handler(input);\n                }\n            }, 0);\n        }\n    };\n    CompositionHelper.prototype._handleAnyTextareaChanges = function () {\n        var _this = this;\n        var oldValue = this._textarea.value;\n        setTimeout(function () {\n            if (!_this._isComposing) {\n                var newValue = _this._textarea.value;\n                var diff = newValue.replace(oldValue, '');\n                if (diff.length > 0) {\n                    _this._terminal.handler(diff);\n                }\n            }\n        }, 0);\n    };\n    CompositionHelper.prototype.updateCompositionElements = function (dontRecurse) {\n        var _this = this;\n        if (!this._isComposing) {\n            return;\n        }\n        if (this._terminal.buffer.isCursorInViewport) {\n            var cellHeight = Math.ceil(this._terminal.charMeasure.height * this._terminal.options.lineHeight);\n            var cursorTop = this._terminal.buffer.y * cellHeight;\n            var cursorLeft = this._terminal.buffer.x * this._terminal.charMeasure.width;\n            this._compositionView.style.left = cursorLeft + 'px';\n            this._compositionView.style.top = cursorTop + 'px';\n            this._compositionView.style.height = cellHeight + 'px';\n            this._compositionView.style.lineHeight = cellHeight + 'px';\n            this._compositionView.style.fontFamily = this._terminal.options.fontFamily;\n            this._compositionView.style.fontSize = this._terminal.options.fontSize + 'px';\n            var compositionViewBounds = this._compositionView.getBoundingClientRect();\n            this._textarea.style.left = cursorLeft + 'px';\n            this._textarea.style.top = cursorTop + 'px';\n            this._textarea.style.width = compositionViewBounds.width + 'px';\n            this._textarea.style.height = compositionViewBounds.height + 'px';\n            this._textarea.style.lineHeight = compositionViewBounds.height + 'px';\n        }\n        if (!dontRecurse) {\n            setTimeout(function () { return _this.updateCompositionElements(true); }, 0);\n        }\n    };\n    CompositionHelper.prototype._clearTextareaPosition = function () {\n        this._textarea.style.left = '';\n        this._textarea.style.top = '';\n    };\n    return CompositionHelper;\n}());\nexports.CompositionHelper = CompositionHelper;\n//# sourceMappingURL=CompositionHelper.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./Lifecycle\");\nvar EventEmitter = (function (_super) {\n    __extends(EventEmitter, _super);\n    function EventEmitter() {\n        var _this = _super.call(this) || this;\n        _this._events = _this._events || {};\n        return _this;\n    }\n    EventEmitter.prototype.on = function (type, listener) {\n        this._events[type] = this._events[type] || [];\n        this._events[type].push(listener);\n    };\n    EventEmitter.prototype.addDisposableListener = function (type, handler) {\n        var _this = this;\n        this.on(type, handler);\n        var disposed = false;\n        return {\n            dispose: function () {\n                if (disposed) {\n                    return;\n                }\n                _this.off(type, handler);\n                disposed = true;\n            }\n        };\n    };\n    EventEmitter.prototype.off = function (type, listener) {\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        var i = obj.length;\n        while (i--) {\n            if (obj[i] === listener) {\n                obj.splice(i, 1);\n                return;\n            }\n        }\n    };\n    EventEmitter.prototype.removeAllListeners = function (type) {\n        if (this._events[type]) {\n            delete this._events[type];\n        }\n    };\n    EventEmitter.prototype.emit = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        for (var i = 0; i < obj.length; i++) {\n            obj[i].apply(this, args);\n        }\n    };\n    EventEmitter.prototype.emitMayRemoveListeners = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._events[type]) {\n            return;\n        }\n        var obj = this._events[type];\n        var length = obj.length;\n        for (var i = 0; i < obj.length; i++) {\n            obj[i].apply(this, args);\n            i -= length - obj.length;\n            length = obj.length;\n        }\n    };\n    EventEmitter.prototype.listeners = function (type) {\n        return this._events[type] || [];\n    };\n    EventEmitter.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._events = {};\n    };\n    return EventEmitter;\n}(Lifecycle_1.Disposable));\nexports.EventEmitter = EventEmitter;\n//# sourceMappingURL=EventEmitter.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar Lifecycle_2 = require(\"./ui/Lifecycle\");\nvar FALLBACK_SCROLL_BAR_WIDTH = 15;\nvar Viewport = (function (_super) {\n    __extends(Viewport, _super);\n    function Viewport(_terminal, _viewportElement, _scrollArea, _charMeasure, _dimensions) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._viewportElement = _viewportElement;\n        _this._scrollArea = _scrollArea;\n        _this._charMeasure = _charMeasure;\n        _this._dimensions = _dimensions;\n        _this.scrollBarWidth = 0;\n        _this._currentRowHeight = 0;\n        _this._lastRecordedBufferLength = 0;\n        _this._lastRecordedViewportHeight = 0;\n        _this._lastRecordedBufferHeight = 0;\n        _this._lastScrollTop = 0;\n        _this._wheelPartialScroll = 0;\n        _this._refreshAnimationFrame = null;\n        _this._ignoreNextScrollEvent = false;\n        _this.scrollBarWidth = (_this._viewportElement.offsetWidth - _this._scrollArea.offsetWidth) || FALLBACK_SCROLL_BAR_WIDTH;\n        _this.register(Lifecycle_2.addDisposableDomListener(_this._viewportElement, 'scroll', _this._onScroll.bind(_this)));\n        setTimeout(function () { return _this.syncScrollArea(); }, 0);\n        return _this;\n    }\n    Viewport.prototype.onDimensionsChance = function (dimensions) {\n        this._dimensions = dimensions;\n    };\n    Viewport.prototype.onThemeChange = function (colors) {\n        this._viewportElement.style.backgroundColor = colors.background.css;\n    };\n    Viewport.prototype._refresh = function () {\n        var _this = this;\n        if (this._refreshAnimationFrame === null) {\n            this._refreshAnimationFrame = requestAnimationFrame(function () { return _this._innerRefresh(); });\n        }\n    };\n    Viewport.prototype._innerRefresh = function () {\n        if (this._charMeasure.height > 0) {\n            this._currentRowHeight = this._dimensions.scaledCellHeight / window.devicePixelRatio;\n            this._lastRecordedViewportHeight = this._viewportElement.offsetHeight;\n            var newBufferHeight = Math.round(this._currentRowHeight * this._lastRecordedBufferLength) + (this._lastRecordedViewportHeight - this._dimensions.canvasHeight);\n            if (this._lastRecordedBufferHeight !== newBufferHeight) {\n                this._lastRecordedBufferHeight = newBufferHeight;\n                this._scrollArea.style.height = this._lastRecordedBufferHeight + 'px';\n            }\n        }\n        var scrollTop = this._terminal.buffer.ydisp * this._currentRowHeight;\n        if (this._viewportElement.scrollTop !== scrollTop) {\n            this._ignoreNextScrollEvent = true;\n            this._viewportElement.scrollTop = scrollTop;\n        }\n        this._refreshAnimationFrame = null;\n    };\n    Viewport.prototype.syncScrollArea = function () {\n        if (this._lastRecordedBufferLength !== this._terminal.buffer.lines.length) {\n            this._lastRecordedBufferLength = this._terminal.buffer.lines.length;\n            this._refresh();\n            return;\n        }\n        if (this._lastRecordedViewportHeight !== this._dimensions.canvasHeight) {\n            this._refresh();\n            return;\n        }\n        var newScrollTop = this._terminal.buffer.ydisp * this._currentRowHeight;\n        if (this._lastScrollTop !== newScrollTop) {\n            this._refresh();\n            return;\n        }\n        if (this._lastScrollTop !== this._viewportElement.scrollTop) {\n            this._refresh();\n            return;\n        }\n        if (this._dimensions.scaledCellHeight / window.devicePixelRatio !== this._currentRowHeight) {\n            this._refresh();\n            return;\n        }\n    };\n    Viewport.prototype._onScroll = function (ev) {\n        this._lastScrollTop = this._viewportElement.scrollTop;\n        if (!this._viewportElement.offsetParent) {\n            return;\n        }\n        if (this._ignoreNextScrollEvent) {\n            this._ignoreNextScrollEvent = false;\n            return;\n        }\n        var newRow = Math.round(this._lastScrollTop / this._currentRowHeight);\n        var diff = newRow - this._terminal.buffer.ydisp;\n        this._terminal.scrollLines(diff, true);\n    };\n    Viewport.prototype.onWheel = function (ev) {\n        var amount = this._getPixelsScrolled(ev);\n        if (amount === 0) {\n            return;\n        }\n        this._viewportElement.scrollTop += amount;\n        ev.preventDefault();\n    };\n    Viewport.prototype._getPixelsScrolled = function (ev) {\n        if (ev.deltaY === 0) {\n            return 0;\n        }\n        var amount = ev.deltaY;\n        if (ev.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n            amount *= this._currentRowHeight;\n        }\n        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n            amount *= this._currentRowHeight * this._terminal.rows;\n        }\n        return amount;\n    };\n    Viewport.prototype.getLinesScrolled = function (ev) {\n        if (ev.deltaY === 0) {\n            return 0;\n        }\n        var amount = ev.deltaY;\n        if (ev.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n            amount /= this._currentRowHeight + 0.0;\n            this._wheelPartialScroll += amount;\n            amount = Math.floor(Math.abs(this._wheelPartialScroll)) * (this._wheelPartialScroll > 0 ? 1 : -1);\n            this._wheelPartialScroll %= 1;\n        }\n        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {\n            amount *= this._terminal.rows;\n        }\n        return amount;\n    };\n    Viewport.prototype.onTouchStart = function (ev) {\n        this._lastTouchY = ev.touches[0].pageY;\n    };\n    Viewport.prototype.onTouchMove = function (ev) {\n        var deltaY = this._lastTouchY - ev.touches[0].pageY;\n        this._lastTouchY = ev.touches[0].pageY;\n        if (deltaY === 0) {\n            return;\n        }\n        this._viewportElement.scrollTop += deltaY;\n        ev.preventDefault();\n    };\n    return Viewport;\n}(Lifecycle_1.Disposable));\nexports.Viewport = Viewport;\n//# sourceMappingURL=Viewport.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction prepareTextForTerminal(text) {\n    return text.replace(/\\r?\\n/g, '\\r');\n}\nexports.prepareTextForTerminal = prepareTextForTerminal;\nfunction bracketTextForPaste(text, bracketedPasteMode) {\n    if (bracketedPasteMode) {\n        return '\\x1b[200~' + text + '\\x1b[201~';\n    }\n    return text;\n}\nexports.bracketTextForPaste = bracketTextForPaste;\nfunction copyHandler(ev, term, selectionManager) {\n    if (term.browser.isMSIE) {\n        window.clipboardData.setData('Text', selectionManager.selectionText);\n    }\n    else {\n        ev.clipboardData.setData('text/plain', selectionManager.selectionText);\n    }\n    ev.preventDefault();\n}\nexports.copyHandler = copyHandler;\nfunction pasteHandler(ev, term) {\n    ev.stopPropagation();\n    var text;\n    var dispatchPaste = function (text) {\n        text = prepareTextForTerminal(text);\n        text = bracketTextForPaste(text, term.bracketedPasteMode);\n        term.handler(text);\n        term.textarea.value = '';\n        term.emit('paste', text);\n        term.cancel(ev);\n    };\n    if (term.browser.isMSIE) {\n        if (window.clipboardData) {\n            text = window.clipboardData.getData('Text');\n            dispatchPaste(text);\n        }\n    }\n    else {\n        if (ev.clipboardData) {\n            text = ev.clipboardData.getData('text/plain');\n            dispatchPaste(text);\n        }\n    }\n}\nexports.pasteHandler = pasteHandler;\nfunction moveTextAreaUnderMouseCursor(ev, term) {\n    var pos = term.screenElement.getBoundingClientRect();\n    var left = ev.clientX - pos.left - 10;\n    var top = ev.clientY - pos.top - 10;\n    term.textarea.style.position = 'absolute';\n    term.textarea.style.width = '20px';\n    term.textarea.style.height = '20px';\n    term.textarea.style.left = left + \"px\";\n    term.textarea.style.top = top + \"px\";\n    term.textarea.style.zIndex = '1000';\n    term.textarea.focus();\n    setTimeout(function () {\n        term.textarea.style.position = null;\n        term.textarea.style.width = null;\n        term.textarea.style.height = null;\n        term.textarea.style.left = null;\n        term.textarea.style.top = null;\n        term.textarea.style.zIndex = null;\n    }, 200);\n}\nexports.moveTextAreaUnderMouseCursor = moveTextAreaUnderMouseCursor;\nfunction rightClickHandler(ev, term, selectionManager, shouldSelectWord) {\n    moveTextAreaUnderMouseCursor(ev, term);\n    if (shouldSelectWord && !selectionManager.isClickInSelection(ev)) {\n        selectionManager.selectWordAtCursor(ev);\n    }\n    term.textarea.value = selectionManager.selectionText;\n    term.textarea.select();\n}\nexports.rightClickHandler = rightClickHandler;\n//# sourceMappingURL=Clipboard.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = require(\"./common/data/EscapeSequences\");\nvar Charsets_1 = require(\"./core/data/Charsets\");\nvar CharWidth_1 = require(\"./CharWidth\");\nvar EscapeSequenceParser_1 = require(\"./EscapeSequenceParser\");\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar TypedArrayUtils_1 = require(\"./common/TypedArrayUtils\");\nvar TextDecoder_1 = require(\"./core/input/TextDecoder\");\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar GLEVEL = { '(': 0, ')': 1, '*': 2, '+': 3, '-': 1, '.': 2 };\nvar DECRQSS = (function () {\n    function DECRQSS(_terminal) {\n        this._terminal = _terminal;\n        this._data = new Uint32Array(0);\n    }\n    DECRQSS.prototype.hook = function (collect, params, flag) {\n        this._data = new Uint32Array(0);\n    };\n    DECRQSS.prototype.put = function (data, start, end) {\n        this._data = TypedArrayUtils_1.concat(this._data, data.subarray(start, end));\n    };\n    DECRQSS.prototype.unhook = function () {\n        var data = TextDecoder_1.utf32ToString(this._data);\n        this._data = new Uint32Array(0);\n        switch (data) {\n            case '\"q':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r0\\\"q\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case '\"p':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r61\\\"p\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case 'r':\n                var pt = '' + (this._terminal.buffer.scrollTop + 1) +\n                    ';' + (this._terminal.buffer.scrollBottom + 1) + 'r';\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r\" + pt + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case 'm':\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r0m\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            case ' q':\n                var STYLES = { 'block': 2, 'underline': 4, 'bar': 6 };\n                var style = STYLES[this._terminal.getOption('cursorStyle')];\n                style -= this._terminal.getOption('cursorBlink');\n                return this._terminal.handler(EscapeSequences_1.C0.ESC + \"P1$r\" + style + \" q\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n            default:\n                this._terminal.error('Unknown DCS $q %s', data);\n                this._terminal.handler(EscapeSequences_1.C0.ESC + \"P0$r\" + EscapeSequences_1.C0.ESC + \"\\\\\");\n        }\n    };\n    return DECRQSS;\n}());\nvar InputHandler = (function (_super) {\n    __extends(InputHandler, _super);\n    function InputHandler(_terminal, _parser) {\n        if (_parser === void 0) { _parser = new EscapeSequenceParser_1.EscapeSequenceParser(); }\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._parser = _parser;\n        _this._parseBuffer = new Uint32Array(4096);\n        _this._stringDecoder = new TextDecoder_1.StringToUtf32();\n        _this._utf8Decoder = new TextDecoder_1.Utf8ToUtf32();\n        _this._workCell = new BufferLine_1.CellData();\n        _this._onCursorMove = new EventEmitter2_1.EventEmitter2();\n        _this._onData = new EventEmitter2_1.EventEmitter2();\n        _this._onLineFeed = new EventEmitter2_1.EventEmitter2();\n        _this._onScroll = new EventEmitter2_1.EventEmitter2();\n        _this.register(_this._parser);\n        _this._parser.setCsiHandlerFallback(function (collect, params, flag) {\n            _this._terminal.error('Unknown CSI code: ', { collect: collect, params: params, flag: String.fromCharCode(flag) });\n        });\n        _this._parser.setEscHandlerFallback(function (collect, flag) {\n            _this._terminal.error('Unknown ESC code: ', { collect: collect, flag: String.fromCharCode(flag) });\n        });\n        _this._parser.setExecuteHandlerFallback(function (code) {\n            _this._terminal.error('Unknown EXECUTE code: ', { code: code });\n        });\n        _this._parser.setOscHandlerFallback(function (identifier, data) {\n            _this._terminal.error('Unknown OSC code: ', { identifier: identifier, data: data });\n        });\n        _this._parser.setPrintHandler(function (data, start, end) { return _this.print(data, start, end); });\n        _this._parser.setCsiHandler('@', function (params, collect) { return _this.insertChars(params); });\n        _this._parser.setCsiHandler('A', function (params, collect) { return _this.cursorUp(params); });\n        _this._parser.setCsiHandler('B', function (params, collect) { return _this.cursorDown(params); });\n        _this._parser.setCsiHandler('C', function (params, collect) { return _this.cursorForward(params); });\n        _this._parser.setCsiHandler('D', function (params, collect) { return _this.cursorBackward(params); });\n        _this._parser.setCsiHandler('E', function (params, collect) { return _this.cursorNextLine(params); });\n        _this._parser.setCsiHandler('F', function (params, collect) { return _this.cursorPrecedingLine(params); });\n        _this._parser.setCsiHandler('G', function (params, collect) { return _this.cursorCharAbsolute(params); });\n        _this._parser.setCsiHandler('H', function (params, collect) { return _this.cursorPosition(params); });\n        _this._parser.setCsiHandler('I', function (params, collect) { return _this.cursorForwardTab(params); });\n        _this._parser.setCsiHandler('J', function (params, collect) { return _this.eraseInDisplay(params); });\n        _this._parser.setCsiHandler('K', function (params, collect) { return _this.eraseInLine(params); });\n        _this._parser.setCsiHandler('L', function (params, collect) { return _this.insertLines(params); });\n        _this._parser.setCsiHandler('M', function (params, collect) { return _this.deleteLines(params); });\n        _this._parser.setCsiHandler('P', function (params, collect) { return _this.deleteChars(params); });\n        _this._parser.setCsiHandler('S', function (params, collect) { return _this.scrollUp(params); });\n        _this._parser.setCsiHandler('T', function (params, collect) { return _this.scrollDown(params, collect); });\n        _this._parser.setCsiHandler('X', function (params, collect) { return _this.eraseChars(params); });\n        _this._parser.setCsiHandler('Z', function (params, collect) { return _this.cursorBackwardTab(params); });\n        _this._parser.setCsiHandler('`', function (params, collect) { return _this.charPosAbsolute(params); });\n        _this._parser.setCsiHandler('a', function (params, collect) { return _this.hPositionRelative(params); });\n        _this._parser.setCsiHandler('b', function (params, collect) { return _this.repeatPrecedingCharacter(params); });\n        _this._parser.setCsiHandler('c', function (params, collect) { return _this.sendDeviceAttributes(params, collect); });\n        _this._parser.setCsiHandler('d', function (params, collect) { return _this.linePosAbsolute(params); });\n        _this._parser.setCsiHandler('e', function (params, collect) { return _this.vPositionRelative(params); });\n        _this._parser.setCsiHandler('f', function (params, collect) { return _this.hVPosition(params); });\n        _this._parser.setCsiHandler('g', function (params, collect) { return _this.tabClear(params); });\n        _this._parser.setCsiHandler('h', function (params, collect) { return _this.setMode(params, collect); });\n        _this._parser.setCsiHandler('l', function (params, collect) { return _this.resetMode(params, collect); });\n        _this._parser.setCsiHandler('m', function (params, collect) { return _this.charAttributes(params); });\n        _this._parser.setCsiHandler('n', function (params, collect) { return _this.deviceStatus(params, collect); });\n        _this._parser.setCsiHandler('p', function (params, collect) { return _this.softReset(params, collect); });\n        _this._parser.setCsiHandler('q', function (params, collect) { return _this.setCursorStyle(params, collect); });\n        _this._parser.setCsiHandler('r', function (params, collect) { return _this.setScrollRegion(params, collect); });\n        _this._parser.setCsiHandler('s', function (params, collect) { return _this.saveCursor(params); });\n        _this._parser.setCsiHandler('u', function (params, collect) { return _this.restoreCursor(params); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BEL, function () { return _this.bell(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.LF, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.VT, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.FF, function () { return _this.lineFeed(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.CR, function () { return _this.carriageReturn(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BS, function () { return _this.backspace(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.HT, function () { return _this.tab(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SO, function () { return _this.shiftOut(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SI, function () { return _this.shiftIn(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.IND, function () { return _this.index(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.NEL, function () { return _this.nextLine(); });\n        _this._parser.setExecuteHandler(EscapeSequences_1.C1.HTS, function () { return _this.tabSet(); });\n        _this._parser.setOscHandler(0, function (data) { return _this.setTitle(data); });\n        _this._parser.setOscHandler(2, function (data) { return _this.setTitle(data); });\n        _this._parser.setEscHandler('7', function () { return _this.saveCursor([]); });\n        _this._parser.setEscHandler('8', function () { return _this.restoreCursor([]); });\n        _this._parser.setEscHandler('D', function () { return _this.index(); });\n        _this._parser.setEscHandler('E', function () { return _this.nextLine(); });\n        _this._parser.setEscHandler('H', function () { return _this.tabSet(); });\n        _this._parser.setEscHandler('M', function () { return _this.reverseIndex(); });\n        _this._parser.setEscHandler('=', function () { return _this.keypadApplicationMode(); });\n        _this._parser.setEscHandler('>', function () { return _this.keypadNumericMode(); });\n        _this._parser.setEscHandler('c', function () { return _this.reset(); });\n        _this._parser.setEscHandler('n', function () { return _this.setgLevel(2); });\n        _this._parser.setEscHandler('o', function () { return _this.setgLevel(3); });\n        _this._parser.setEscHandler('|', function () { return _this.setgLevel(3); });\n        _this._parser.setEscHandler('}', function () { return _this.setgLevel(2); });\n        _this._parser.setEscHandler('~', function () { return _this.setgLevel(1); });\n        _this._parser.setEscHandler('%@', function () { return _this.selectDefaultCharset(); });\n        _this._parser.setEscHandler('%G', function () { return _this.selectDefaultCharset(); });\n        var _loop_1 = function (flag) {\n            this_1._parser.setEscHandler('(' + flag, function () { return _this.selectCharset('(' + flag); });\n            this_1._parser.setEscHandler(')' + flag, function () { return _this.selectCharset(')' + flag); });\n            this_1._parser.setEscHandler('*' + flag, function () { return _this.selectCharset('*' + flag); });\n            this_1._parser.setEscHandler('+' + flag, function () { return _this.selectCharset('+' + flag); });\n            this_1._parser.setEscHandler('-' + flag, function () { return _this.selectCharset('-' + flag); });\n            this_1._parser.setEscHandler('.' + flag, function () { return _this.selectCharset('.' + flag); });\n            this_1._parser.setEscHandler('/' + flag, function () { return _this.selectCharset('/' + flag); });\n        };\n        var this_1 = this;\n        for (var flag in Charsets_1.CHARSETS) {\n            _loop_1(flag);\n        }\n        _this._parser.setErrorHandler(function (state) {\n            _this._terminal.error('Parsing error: ', state);\n            return state;\n        });\n        _this._parser.setDcsHandler('$q', new DECRQSS(_this._terminal));\n        return _this;\n    }\n    Object.defineProperty(InputHandler.prototype, \"onCursorMove\", {\n        get: function () { return this._onCursorMove.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputHandler.prototype, \"onData\", {\n        get: function () { return this._onData.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputHandler.prototype, \"onLineFeed\", {\n        get: function () { return this._onLineFeed.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InputHandler.prototype, \"onScroll\", {\n        get: function () { return this._onScroll.event; },\n        enumerable: true,\n        configurable: true\n    });\n    InputHandler.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._terminal = null;\n    };\n    InputHandler.prototype.parse = function (data) {\n        if (!this._terminal) {\n            return;\n        }\n        var buffer = this._terminal.buffer;\n        var cursorStartX = buffer.x;\n        var cursorStartY = buffer.y;\n        if (this._terminal.debug) {\n            this._terminal.log('data: ' + data);\n        }\n        if (this._parseBuffer.length < data.length) {\n            this._parseBuffer = new Uint32Array(data.length);\n        }\n        this._parser.parse(this._parseBuffer, this._stringDecoder.decode(data, this._parseBuffer));\n        buffer = this._terminal.buffer;\n        if (buffer.x !== cursorStartX || buffer.y !== cursorStartY) {\n            this._onCursorMove.fire();\n        }\n    };\n    InputHandler.prototype.parseUtf8 = function (data) {\n        if (!this._terminal) {\n            return;\n        }\n        var buffer = this._terminal.buffer;\n        var cursorStartX = buffer.x;\n        var cursorStartY = buffer.y;\n        if (this._terminal.debug) {\n            this._terminal.log('data: ' + data);\n        }\n        if (this._parseBuffer.length < data.length) {\n            this._parseBuffer = new Uint32Array(data.length);\n        }\n        this._parser.parse(this._parseBuffer, this._utf8Decoder.decode(data, this._parseBuffer));\n        buffer = this._terminal.buffer;\n        if (buffer.x !== cursorStartX || buffer.y !== cursorStartY) {\n            this._terminal.emit('cursormove');\n        }\n    };\n    InputHandler.prototype.print = function (data, start, end) {\n        var code;\n        var chWidth;\n        var buffer = this._terminal.buffer;\n        var charset = this._terminal.charset;\n        var screenReaderMode = this._terminal.options.screenReaderMode;\n        var cols = this._terminal.cols;\n        var wraparoundMode = this._terminal.wraparoundMode;\n        var insertMode = this._terminal.insertMode;\n        var curAttr = this._terminal.curAttrData;\n        var bufferRow = buffer.lines.get(buffer.y + buffer.ybase);\n        this._terminal.updateRange(buffer.y);\n        for (var pos = start; pos < end; ++pos) {\n            code = data[pos];\n            chWidth = CharWidth_1.wcwidth(code);\n            if (code < 127 && charset) {\n                var ch = charset[String.fromCharCode(code)];\n                if (ch) {\n                    code = ch.charCodeAt(0);\n                }\n            }\n            if (screenReaderMode) {\n                this._terminal.emit('a11y.char', TextDecoder_1.stringFromCodePoint(code));\n            }\n            if (!chWidth && buffer.x) {\n                if (!bufferRow.getWidth(buffer.x - 1)) {\n                    bufferRow.addCodepointToCell(buffer.x - 2, code);\n                }\n                else {\n                    bufferRow.addCodepointToCell(buffer.x - 1, code);\n                }\n                continue;\n            }\n            if (buffer.x + chWidth - 1 >= cols) {\n                if (wraparoundMode) {\n                    buffer.x = 0;\n                    buffer.y++;\n                    if (buffer.y > buffer.scrollBottom) {\n                        buffer.y--;\n                        this._terminal.scroll(true);\n                    }\n                    else {\n                        buffer.lines.get(buffer.y).isWrapped = true;\n                    }\n                    bufferRow = buffer.lines.get(buffer.y + buffer.ybase);\n                }\n                else {\n                    if (chWidth === 2) {\n                        continue;\n                    }\n                }\n            }\n            if (insertMode) {\n                bufferRow.insertCells(buffer.x, chWidth, buffer.getNullCell(curAttr));\n                if (bufferRow.getWidth(cols - 1) === 2) {\n                    bufferRow.setCellFromCodePoint(cols - 1, BufferLine_1.NULL_CELL_CODE, BufferLine_1.NULL_CELL_WIDTH, curAttr.fg, curAttr.bg);\n                }\n            }\n            bufferRow.setCellFromCodePoint(buffer.x++, code, chWidth, curAttr.fg, curAttr.bg);\n            if (chWidth > 0) {\n                while (--chWidth) {\n                    bufferRow.setCellFromCodePoint(buffer.x++, 0, 0, curAttr.fg, curAttr.bg);\n                }\n            }\n        }\n        this._terminal.updateRange(buffer.y);\n    };\n    InputHandler.prototype.addCsiHandler = function (flag, callback) {\n        return this._parser.addCsiHandler(flag, callback);\n    };\n    InputHandler.prototype.addOscHandler = function (ident, callback) {\n        return this._parser.addOscHandler(ident, callback);\n    };\n    InputHandler.prototype.bell = function () {\n        this._terminal.bell();\n    };\n    InputHandler.prototype.lineFeed = function () {\n        var buffer = this._terminal.buffer;\n        if (this._terminal.options.convertEol) {\n            buffer.x = 0;\n        }\n        buffer.y++;\n        if (buffer.y > buffer.scrollBottom) {\n            buffer.y--;\n            this._terminal.scroll();\n        }\n        if (buffer.x >= this._terminal.cols) {\n            buffer.x--;\n        }\n        this._onLineFeed.fire();\n    };\n    InputHandler.prototype.carriageReturn = function () {\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.backspace = function () {\n        if (this._terminal.buffer.x > 0) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.tab = function () {\n        var originalX = this._terminal.buffer.x;\n        this._terminal.buffer.x = this._terminal.buffer.nextStop();\n        if (this._terminal.options.screenReaderMode) {\n            this._terminal.emit('a11y.tab', this._terminal.buffer.x - originalX);\n        }\n    };\n    InputHandler.prototype.shiftOut = function () {\n        this._terminal.setgLevel(1);\n    };\n    InputHandler.prototype.shiftIn = function () {\n        this._terminal.setgLevel(0);\n    };\n    InputHandler.prototype.insertChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).insertCells(this._terminal.buffer.x, params[0] || 1, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.cursorUp = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y -= param;\n        if (this._terminal.buffer.y < 0) {\n            this._terminal.buffer.y = 0;\n        }\n    };\n    InputHandler.prototype.cursorDown = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.cursorForward = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x += param;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.cursorBackward = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n        this._terminal.buffer.x -= param;\n        if (this._terminal.buffer.x < 0) {\n            this._terminal.buffer.x = 0;\n        }\n    };\n    InputHandler.prototype.cursorNextLine = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.cursorPrecedingLine = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y -= param;\n        if (this._terminal.buffer.y < 0) {\n            this._terminal.buffer.y = 0;\n        }\n        this._terminal.buffer.x = 0;\n    };\n    InputHandler.prototype.cursorCharAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x = param - 1;\n    };\n    InputHandler.prototype.cursorPosition = function (params) {\n        var col;\n        var row = params[0] - 1;\n        if (params.length >= 2) {\n            col = params[1] - 1;\n        }\n        else {\n            col = 0;\n        }\n        if (row < 0) {\n            row = 0;\n        }\n        else if (row >= this._terminal.rows) {\n            row = this._terminal.rows - 1;\n        }\n        if (col < 0) {\n            col = 0;\n        }\n        else if (col >= this._terminal.cols) {\n            col = this._terminal.cols - 1;\n        }\n        this._terminal.buffer.x = col;\n        this._terminal.buffer.y = row;\n    };\n    InputHandler.prototype.cursorForwardTab = function (params) {\n        var param = params[0] || 1;\n        while (param--) {\n            this._terminal.buffer.x = this._terminal.buffer.nextStop();\n        }\n    };\n    InputHandler.prototype._eraseInBufferLine = function (y, start, end, clearWrap) {\n        if (clearWrap === void 0) { clearWrap = false; }\n        var line = this._terminal.buffer.lines.get(this._terminal.buffer.ybase + y);\n        line.replaceCells(start, end, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n        if (clearWrap) {\n            line.isWrapped = false;\n        }\n    };\n    InputHandler.prototype._resetBufferLine = function (y) {\n        this._eraseInBufferLine(y, 0, this._terminal.cols, true);\n    };\n    InputHandler.prototype.eraseInDisplay = function (params) {\n        var j;\n        switch (params[0]) {\n            case 0:\n                j = this._terminal.buffer.y;\n                this._terminal.updateRange(j);\n                this._eraseInBufferLine(j++, this._terminal.buffer.x, this._terminal.cols, this._terminal.buffer.x === 0);\n                for (; j < this._terminal.rows; j++) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(j);\n                break;\n            case 1:\n                j = this._terminal.buffer.y;\n                this._terminal.updateRange(j);\n                this._eraseInBufferLine(j, 0, this._terminal.buffer.x + 1, true);\n                if (this._terminal.buffer.x + 1 >= this._terminal.cols) {\n                    this._terminal.buffer.lines.get(j + 1).isWrapped = false;\n                }\n                while (j--) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(0);\n                break;\n            case 2:\n                j = this._terminal.rows;\n                this._terminal.updateRange(j - 1);\n                while (j--) {\n                    this._resetBufferLine(j);\n                }\n                this._terminal.updateRange(0);\n                break;\n            case 3:\n                var scrollBackSize = this._terminal.buffer.lines.length - this._terminal.rows;\n                if (scrollBackSize > 0) {\n                    this._terminal.buffer.lines.trimStart(scrollBackSize);\n                    this._terminal.buffer.ybase = Math.max(this._terminal.buffer.ybase - scrollBackSize, 0);\n                    this._terminal.buffer.ydisp = Math.max(this._terminal.buffer.ydisp - scrollBackSize, 0);\n                    this._onScroll.fire(0);\n                }\n                break;\n        }\n    };\n    InputHandler.prototype.eraseInLine = function (params) {\n        switch (params[0]) {\n            case 0:\n                this._eraseInBufferLine(this._terminal.buffer.y, this._terminal.buffer.x, this._terminal.cols);\n                break;\n            case 1:\n                this._eraseInBufferLine(this._terminal.buffer.y, 0, this._terminal.buffer.x + 1);\n                break;\n            case 2:\n                this._eraseInBufferLine(this._terminal.buffer.y, 0, this._terminal.cols);\n                break;\n        }\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.insertLines = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        var buffer = this._terminal.buffer;\n        var row = buffer.y + buffer.ybase;\n        var scrollBottomRowsOffset = this._terminal.rows - 1 - buffer.scrollBottom;\n        var scrollBottomAbsolute = this._terminal.rows - 1 + buffer.ybase - scrollBottomRowsOffset + 1;\n        while (param--) {\n            buffer.lines.splice(scrollBottomAbsolute - 1, 1);\n            buffer.lines.splice(row, 0, buffer.getBlankLine(this._terminal.eraseAttrData()));\n        }\n        this._terminal.updateRange(buffer.y);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.deleteLines = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        var buffer = this._terminal.buffer;\n        var row = buffer.y + buffer.ybase;\n        var j;\n        j = this._terminal.rows - 1 - buffer.scrollBottom;\n        j = this._terminal.rows - 1 + buffer.ybase - j;\n        while (param--) {\n            buffer.lines.splice(row, 1);\n            buffer.lines.splice(j, 0, buffer.getBlankLine(this._terminal.eraseAttrData()));\n        }\n        this._terminal.updateRange(buffer.y);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.deleteChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).deleteCells(this._terminal.buffer.x, params[0] || 1, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n        this._terminal.updateRange(this._terminal.buffer.y);\n    };\n    InputHandler.prototype.scrollUp = function (params) {\n        var param = params[0] || 1;\n        var buffer = this._terminal.buffer;\n        while (param--) {\n            buffer.lines.splice(buffer.ybase + buffer.scrollTop, 1);\n            buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 0, buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));\n        }\n        this._terminal.updateRange(buffer.scrollTop);\n        this._terminal.updateRange(buffer.scrollBottom);\n    };\n    InputHandler.prototype.scrollDown = function (params, collect) {\n        if (params.length < 2 && !collect) {\n            var param = params[0] || 1;\n            var buffer = this._terminal.buffer;\n            while (param--) {\n                buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 1);\n                buffer.lines.splice(buffer.ybase + buffer.scrollTop, 0, buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));\n            }\n            this._terminal.updateRange(buffer.scrollTop);\n            this._terminal.updateRange(buffer.scrollBottom);\n        }\n    };\n    InputHandler.prototype.eraseChars = function (params) {\n        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).replaceCells(this._terminal.buffer.x, this._terminal.buffer.x + (params[0] || 1), this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));\n    };\n    InputHandler.prototype.cursorBackwardTab = function (params) {\n        var param = params[0] || 1;\n        var buffer = this._terminal.buffer;\n        while (param--) {\n            buffer.x = buffer.prevStop();\n        }\n    };\n    InputHandler.prototype.charPosAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x = param - 1;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.hPositionRelative = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.x += param;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.repeatPrecedingCharacter = function (params) {\n        var buffer = this._terminal.buffer;\n        var line = buffer.lines.get(buffer.ybase + buffer.y);\n        line.loadCell(buffer.x - 1, this._workCell);\n        line.replaceCells(buffer.x, buffer.x + (params[0] || 1), (this._workCell.content !== undefined) ? this._workCell : buffer.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA));\n    };\n    InputHandler.prototype.sendDeviceAttributes = function (params, collect) {\n        if (params[0] > 0) {\n            return;\n        }\n        if (!collect) {\n            if (this._terminal.is('xterm') || this._terminal.is('rxvt-unicode') || this._terminal.is('screen')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[?1;2c');\n            }\n            else if (this._terminal.is('linux')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[?6c');\n            }\n        }\n        else if (collect === '>') {\n            if (this._terminal.is('xterm')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>0;276;0c');\n            }\n            else if (this._terminal.is('rxvt-unicode')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>85;95;0c');\n            }\n            else if (this._terminal.is('linux')) {\n                this._terminal.handler(params[0] + 'c');\n            }\n            else if (this._terminal.is('screen')) {\n                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>83;40003;0c');\n            }\n        }\n    };\n    InputHandler.prototype.linePosAbsolute = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y = param - 1;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n    };\n    InputHandler.prototype.vPositionRelative = function (params) {\n        var param = params[0];\n        if (param < 1) {\n            param = 1;\n        }\n        this._terminal.buffer.y += param;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x--;\n        }\n    };\n    InputHandler.prototype.hVPosition = function (params) {\n        if (params[0] < 1)\n            params[0] = 1;\n        if (params[1] < 1)\n            params[1] = 1;\n        this._terminal.buffer.y = params[0] - 1;\n        if (this._terminal.buffer.y >= this._terminal.rows) {\n            this._terminal.buffer.y = this._terminal.rows - 1;\n        }\n        this._terminal.buffer.x = params[1] - 1;\n        if (this._terminal.buffer.x >= this._terminal.cols) {\n            this._terminal.buffer.x = this._terminal.cols - 1;\n        }\n    };\n    InputHandler.prototype.tabClear = function (params) {\n        var param = params[0];\n        if (param <= 0) {\n            delete this._terminal.buffer.tabs[this._terminal.buffer.x];\n        }\n        else if (param === 3) {\n            this._terminal.buffer.tabs = {};\n        }\n    };\n    InputHandler.prototype.setMode = function (params, collect) {\n        if (params.length > 1) {\n            for (var i = 0; i < params.length; i++) {\n                this.setMode([params[i]]);\n            }\n            return;\n        }\n        if (!collect) {\n            switch (params[0]) {\n                case 4:\n                    this._terminal.insertMode = true;\n                    break;\n                case 20:\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 1:\n                    this._terminal.applicationCursor = true;\n                    break;\n                case 2:\n                    this._terminal.setgCharset(0, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(1, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(2, Charsets_1.DEFAULT_CHARSET);\n                    this._terminal.setgCharset(3, Charsets_1.DEFAULT_CHARSET);\n                    break;\n                case 3:\n                    this._terminal.savedCols = this._terminal.cols;\n                    this._terminal.resize(132, this._terminal.rows);\n                    break;\n                case 6:\n                    this._terminal.originMode = true;\n                    break;\n                case 7:\n                    this._terminal.wraparoundMode = true;\n                    break;\n                case 12:\n                    break;\n                case 66:\n                    this._terminal.log('Serial port requested application keypad.');\n                    this._terminal.applicationKeypad = true;\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    break;\n                case 9:\n                case 1000:\n                case 1002:\n                case 1003:\n                    this._terminal.x10Mouse = params[0] === 9;\n                    this._terminal.vt200Mouse = params[0] === 1000;\n                    this._terminal.normalMouse = params[0] > 1000;\n                    this._terminal.mouseEvents = true;\n                    if (this._terminal.element) {\n                        this._terminal.element.classList.add('enable-mouse-events');\n                    }\n                    if (this._terminal.selectionManager) {\n                        this._terminal.selectionManager.disable();\n                    }\n                    this._terminal.log('Binding to mouse events.');\n                    break;\n                case 1004:\n                    this._terminal.sendFocus = true;\n                    break;\n                case 1005:\n                    this._terminal.utfMouse = true;\n                    break;\n                case 1006:\n                    this._terminal.sgrMouse = true;\n                    break;\n                case 1015:\n                    this._terminal.urxvtMouse = true;\n                    break;\n                case 25:\n                    this._terminal.cursorHidden = false;\n                    break;\n                case 1048:\n                    this.saveCursor(params);\n                    break;\n                case 1049:\n                    this.saveCursor(params);\n                case 47:\n                case 1047:\n                    this._terminal.buffers.activateAltBuffer(this._terminal.eraseAttrData());\n                    this._terminal.refresh(0, this._terminal.rows - 1);\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    this._terminal.showCursor();\n                    break;\n                case 2004:\n                    this._terminal.bracketedPasteMode = true;\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.resetMode = function (params, collect) {\n        if (params.length > 1) {\n            for (var i = 0; i < params.length; i++) {\n                this.resetMode([params[i]]);\n            }\n            return;\n        }\n        if (!collect) {\n            switch (params[0]) {\n                case 4:\n                    this._terminal.insertMode = false;\n                    break;\n                case 20:\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 1:\n                    this._terminal.applicationCursor = false;\n                    break;\n                case 3:\n                    if (this._terminal.cols === 132 && this._terminal.savedCols) {\n                        this._terminal.resize(this._terminal.savedCols, this._terminal.rows);\n                    }\n                    delete this._terminal.savedCols;\n                    break;\n                case 6:\n                    this._terminal.originMode = false;\n                    break;\n                case 7:\n                    this._terminal.wraparoundMode = false;\n                    break;\n                case 12:\n                    break;\n                case 66:\n                    this._terminal.log('Switching back to normal keypad.');\n                    this._terminal.applicationKeypad = false;\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    break;\n                case 9:\n                case 1000:\n                case 1002:\n                case 1003:\n                    this._terminal.x10Mouse = false;\n                    this._terminal.vt200Mouse = false;\n                    this._terminal.normalMouse = false;\n                    this._terminal.mouseEvents = false;\n                    if (this._terminal.element) {\n                        this._terminal.element.classList.remove('enable-mouse-events');\n                    }\n                    if (this._terminal.selectionManager) {\n                        this._terminal.selectionManager.enable();\n                    }\n                    break;\n                case 1004:\n                    this._terminal.sendFocus = false;\n                    break;\n                case 1005:\n                    this._terminal.utfMouse = false;\n                    break;\n                case 1006:\n                    this._terminal.sgrMouse = false;\n                    break;\n                case 1015:\n                    this._terminal.urxvtMouse = false;\n                    break;\n                case 25:\n                    this._terminal.cursorHidden = true;\n                    break;\n                case 1048:\n                    this.restoreCursor(params);\n                    break;\n                case 1049:\n                case 47:\n                case 1047:\n                    this._terminal.buffers.activateNormalBuffer();\n                    if (params[0] === 1049) {\n                        this.restoreCursor(params);\n                    }\n                    this._terminal.refresh(0, this._terminal.rows - 1);\n                    if (this._terminal.viewport) {\n                        this._terminal.viewport.syncScrollArea();\n                    }\n                    this._terminal.showCursor();\n                    break;\n                case 2004:\n                    this._terminal.bracketedPasteMode = false;\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.charAttributes = function (params) {\n        if (params.length === 1 && params[0] === 0) {\n            this._terminal.curAttrData.fg = BufferLine_1.DEFAULT_ATTR_DATA.fg;\n            this._terminal.curAttrData.bg = BufferLine_1.DEFAULT_ATTR_DATA.bg;\n            return;\n        }\n        var l = params.length;\n        var p;\n        var attr = this._terminal.curAttrData;\n        for (var i = 0; i < l; i++) {\n            p = params[i];\n            if (p >= 30 && p <= 37) {\n                attr.fg &= ~(50331648 | 255);\n                attr.fg |= 16777216 | (p - 30);\n            }\n            else if (p >= 40 && p <= 47) {\n                attr.bg &= ~(50331648 | 255);\n                attr.bg |= 16777216 | (p - 40);\n            }\n            else if (p >= 90 && p <= 97) {\n                attr.fg &= ~(50331648 | 255);\n                attr.fg |= 16777216 | (p - 90) | 8;\n            }\n            else if (p >= 100 && p <= 107) {\n                attr.bg &= ~(50331648 | 255);\n                attr.bg |= 16777216 | (p - 100) | 8;\n            }\n            else if (p === 0) {\n                attr.fg = BufferLine_1.DEFAULT_ATTR_DATA.fg;\n                attr.bg = BufferLine_1.DEFAULT_ATTR_DATA.bg;\n            }\n            else if (p === 1) {\n                attr.fg |= 134217728;\n            }\n            else if (p === 3) {\n                attr.bg |= 67108864;\n            }\n            else if (p === 4) {\n                attr.fg |= 268435456;\n            }\n            else if (p === 5) {\n                attr.fg |= 536870912;\n            }\n            else if (p === 7) {\n                attr.fg |= 67108864;\n            }\n            else if (p === 8) {\n                attr.fg |= 1073741824;\n            }\n            else if (p === 2) {\n                attr.bg |= 134217728;\n            }\n            else if (p === 22) {\n                attr.fg &= ~134217728;\n                attr.bg &= ~134217728;\n            }\n            else if (p === 23) {\n                attr.bg &= ~67108864;\n            }\n            else if (p === 24) {\n                attr.fg &= ~268435456;\n            }\n            else if (p === 25) {\n                attr.fg &= ~536870912;\n            }\n            else if (p === 27) {\n                attr.fg &= ~67108864;\n            }\n            else if (p === 28) {\n                attr.fg &= ~1073741824;\n            }\n            else if (p === 39) {\n                attr.fg &= ~(50331648 | 16777215);\n                attr.fg |= BufferLine_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);\n            }\n            else if (p === 49) {\n                attr.bg &= ~(50331648 | 16777215);\n                attr.bg |= BufferLine_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);\n            }\n            else if (p === 38) {\n                if (params[i + 1] === 2) {\n                    i += 2;\n                    attr.fg |= 50331648;\n                    attr.fg &= ~16777215;\n                    attr.fg |= BufferLine_1.AttributeData.fromColorRGB([params[i], params[i + 1], params[i + 2]]);\n                    i += 2;\n                }\n                else if (params[i + 1] === 5) {\n                    i += 2;\n                    p = params[i] & 0xff;\n                    attr.fg &= ~(50331648 | 255);\n                    attr.fg |= 33554432 | p;\n                }\n            }\n            else if (p === 48) {\n                if (params[i + 1] === 2) {\n                    i += 2;\n                    attr.bg |= 50331648;\n                    attr.bg &= ~16777215;\n                    attr.bg |= BufferLine_1.AttributeData.fromColorRGB([params[i], params[i + 1], params[i + 2]]);\n                    i += 2;\n                }\n                else if (params[i + 1] === 5) {\n                    i += 2;\n                    p = params[i] & 0xff;\n                    attr.bg &= ~(50331648 | 255);\n                    attr.bg |= 33554432 | p;\n                }\n            }\n            else if (p === 100) {\n                attr.fg &= ~(50331648 | 16777215);\n                attr.fg |= BufferLine_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);\n                attr.bg &= ~(50331648 | 16777215);\n                attr.bg |= BufferLine_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);\n            }\n            else {\n                this._terminal.error('Unknown SGR attribute: %d.', p);\n            }\n        }\n    };\n    InputHandler.prototype.deviceStatus = function (params, collect) {\n        if (!collect) {\n            switch (params[0]) {\n                case 5:\n                    this._onData.fire(EscapeSequences_1.C0.ESC + \"[0n\");\n                    break;\n                case 6:\n                    var y = this._terminal.buffer.y + 1;\n                    var x = this._terminal.buffer.x + 1;\n                    this._onData.fire(EscapeSequences_1.C0.ESC + \"[\" + y + \";\" + x + \"R\");\n                    break;\n            }\n        }\n        else if (collect === '?') {\n            switch (params[0]) {\n                case 6:\n                    var y = this._terminal.buffer.y + 1;\n                    var x = this._terminal.buffer.x + 1;\n                    this._onData.fire(EscapeSequences_1.C0.ESC + \"[?\" + y + \";\" + x + \"R\");\n                    break;\n                case 15:\n                    break;\n                case 25:\n                    break;\n                case 26:\n                    break;\n                case 53:\n                    break;\n            }\n        }\n    };\n    InputHandler.prototype.softReset = function (params, collect) {\n        if (collect === '!') {\n            this._terminal.cursorHidden = false;\n            this._terminal.insertMode = false;\n            this._terminal.originMode = false;\n            this._terminal.wraparoundMode = true;\n            this._terminal.applicationKeypad = false;\n            if (this._terminal.viewport) {\n                this._terminal.viewport.syncScrollArea();\n            }\n            this._terminal.applicationCursor = false;\n            this._terminal.buffer.scrollTop = 0;\n            this._terminal.buffer.scrollBottom = this._terminal.rows - 1;\n            this._terminal.curAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();\n            this._terminal.buffer.x = this._terminal.buffer.y = 0;\n            this._terminal.charset = null;\n            this._terminal.glevel = 0;\n            this._terminal.charsets = [null];\n        }\n    };\n    InputHandler.prototype.setCursorStyle = function (params, collect) {\n        if (collect === ' ') {\n            var param = params[0] < 1 ? 1 : params[0];\n            switch (param) {\n                case 1:\n                case 2:\n                    this._terminal.setOption('cursorStyle', 'block');\n                    break;\n                case 3:\n                case 4:\n                    this._terminal.setOption('cursorStyle', 'underline');\n                    break;\n                case 5:\n                case 6:\n                    this._terminal.setOption('cursorStyle', 'bar');\n                    break;\n            }\n            var isBlinking = param % 2 === 1;\n            this._terminal.setOption('cursorBlink', isBlinking);\n        }\n    };\n    InputHandler.prototype.setScrollRegion = function (params, collect) {\n        if (collect) {\n            return;\n        }\n        this._terminal.buffer.scrollTop = (params[0] || 1) - 1;\n        this._terminal.buffer.scrollBottom = (params[1] && params[1] <= this._terminal.rows ? params[1] : this._terminal.rows) - 1;\n        this._terminal.buffer.x = 0;\n        this._terminal.buffer.y = 0;\n    };\n    InputHandler.prototype.saveCursor = function (params) {\n        this._terminal.buffer.savedX = this._terminal.buffer.x;\n        this._terminal.buffer.savedY = this._terminal.buffer.y;\n        this._terminal.buffer.savedCurAttrData.fg = this._terminal.curAttrData.fg;\n        this._terminal.buffer.savedCurAttrData.bg = this._terminal.curAttrData.bg;\n    };\n    InputHandler.prototype.restoreCursor = function (params) {\n        this._terminal.buffer.x = this._terminal.buffer.savedX || 0;\n        this._terminal.buffer.y = this._terminal.buffer.savedY || 0;\n        this._terminal.curAttrData.fg = this._terminal.buffer.savedCurAttrData.fg;\n        this._terminal.curAttrData.bg = this._terminal.buffer.savedCurAttrData.bg;\n    };\n    InputHandler.prototype.setTitle = function (data) {\n        this._terminal.handleTitle(data);\n    };\n    InputHandler.prototype.nextLine = function () {\n        this._terminal.buffer.x = 0;\n        this.index();\n    };\n    InputHandler.prototype.keypadApplicationMode = function () {\n        this._terminal.log('Serial port requested application keypad.');\n        this._terminal.applicationKeypad = true;\n        if (this._terminal.viewport) {\n            this._terminal.viewport.syncScrollArea();\n        }\n    };\n    InputHandler.prototype.keypadNumericMode = function () {\n        this._terminal.log('Switching back to normal keypad.');\n        this._terminal.applicationKeypad = false;\n        if (this._terminal.viewport) {\n            this._terminal.viewport.syncScrollArea();\n        }\n    };\n    InputHandler.prototype.selectDefaultCharset = function () {\n        this._terminal.setgLevel(0);\n        this._terminal.setgCharset(0, Charsets_1.DEFAULT_CHARSET);\n    };\n    InputHandler.prototype.selectCharset = function (collectAndFlag) {\n        if (collectAndFlag.length !== 2) {\n            this.selectDefaultCharset();\n            return;\n        }\n        if (collectAndFlag[0] === '/') {\n            return;\n        }\n        this._terminal.setgCharset(GLEVEL[collectAndFlag[0]], Charsets_1.CHARSETS[collectAndFlag[1]] || Charsets_1.DEFAULT_CHARSET);\n        return;\n    };\n    InputHandler.prototype.index = function () {\n        this._terminal.index();\n    };\n    InputHandler.prototype.tabSet = function () {\n        this._terminal.tabSet();\n    };\n    InputHandler.prototype.reverseIndex = function () {\n        this._terminal.reverseIndex();\n    };\n    InputHandler.prototype.reset = function () {\n        this._parser.reset();\n        this._terminal.reset();\n    };\n    InputHandler.prototype.setgLevel = function (level) {\n        this._terminal.setgLevel(level);\n    };\n    return InputHandler;\n}(Lifecycle_1.Disposable));\nexports.InputHandler = InputHandler;\n//# sourceMappingURL=InputHandler.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CHARSETS = {};\nexports.DEFAULT_CHARSET = exports.CHARSETS['B'];\nexports.CHARSETS['0'] = {\n    '`': '\\u25c6',\n    'a': '\\u2592',\n    'b': '\\u0009',\n    'c': '\\u000c',\n    'd': '\\u000d',\n    'e': '\\u000a',\n    'f': '\\u00b0',\n    'g': '\\u00b1',\n    'h': '\\u2424',\n    'i': '\\u000b',\n    'j': '\\u2518',\n    'k': '\\u2510',\n    'l': '\\u250c',\n    'm': '\\u2514',\n    'n': '\\u253c',\n    'o': '\\u23ba',\n    'p': '\\u23bb',\n    'q': '\\u2500',\n    'r': '\\u23bc',\n    's': '\\u23bd',\n    't': '\\u251c',\n    'u': '\\u2524',\n    'v': '\\u2534',\n    'w': '\\u252c',\n    'x': '\\u2502',\n    'y': '\\u2264',\n    'z': '\\u2265',\n    '{': '\\u03c0',\n    '|': '\\u2260',\n    '}': '\\u00a3',\n    '~': '\\u00b7'\n};\nexports.CHARSETS['A'] = {\n    '#': '£'\n};\nexports.CHARSETS['B'] = null;\nexports.CHARSETS['4'] = {\n    '#': '£',\n    '@': '¾',\n    '[': 'ij',\n    '\\\\': '½',\n    ']': '|',\n    '{': '¨',\n    '|': 'f',\n    '}': '¼',\n    '~': '´'\n};\nexports.CHARSETS['C'] =\n    exports.CHARSETS['5'] = {\n        '[': 'Ä',\n        '\\\\': 'Ö',\n        ']': 'Å',\n        '^': 'Ü',\n        '`': 'é',\n        '{': 'ä',\n        '|': 'ö',\n        '}': 'å',\n        '~': 'ü'\n    };\nexports.CHARSETS['R'] = {\n    '#': '£',\n    '@': 'à',\n    '[': '°',\n    '\\\\': 'ç',\n    ']': '§',\n    '{': 'é',\n    '|': 'ù',\n    '}': 'è',\n    '~': '¨'\n};\nexports.CHARSETS['Q'] = {\n    '@': 'à',\n    '[': 'â',\n    '\\\\': 'ç',\n    ']': 'ê',\n    '^': 'î',\n    '`': 'ô',\n    '{': 'é',\n    '|': 'ù',\n    '}': 'è',\n    '~': 'û'\n};\nexports.CHARSETS['K'] = {\n    '@': '§',\n    '[': 'Ä',\n    '\\\\': 'Ö',\n    ']': 'Ü',\n    '{': 'ä',\n    '|': 'ö',\n    '}': 'ü',\n    '~': 'ß'\n};\nexports.CHARSETS['Y'] = {\n    '#': '£',\n    '@': '§',\n    '[': '°',\n    '\\\\': 'ç',\n    ']': 'é',\n    '`': 'ù',\n    '{': 'à',\n    '|': 'ò',\n    '}': 'è',\n    '~': 'ì'\n};\nexports.CHARSETS['E'] =\n    exports.CHARSETS['6'] = {\n        '@': 'Ä',\n        '[': 'Æ',\n        '\\\\': 'Ø',\n        ']': 'Å',\n        '^': 'Ü',\n        '`': 'ä',\n        '{': 'æ',\n        '|': 'ø',\n        '}': 'å',\n        '~': 'ü'\n    };\nexports.CHARSETS['Z'] = {\n    '#': '£',\n    '@': '§',\n    '[': '¡',\n    '\\\\': 'Ñ',\n    ']': '¿',\n    '{': '°',\n    '|': 'ñ',\n    '}': 'ç'\n};\nexports.CHARSETS['H'] =\n    exports.CHARSETS['7'] = {\n        '@': 'É',\n        '[': 'Ä',\n        '\\\\': 'Ö',\n        ']': 'Å',\n        '^': 'Ü',\n        '`': 'é',\n        '{': 'ä',\n        '|': 'ö',\n        '}': 'å',\n        '~': 'ü'\n    };\nexports.CHARSETS['='] = {\n    '#': 'ù',\n    '@': 'à',\n    '[': 'é',\n    '\\\\': 'ç',\n    ']': 'ê',\n    '^': 'î',\n    '_': 'è',\n    '`': 'ô',\n    '{': 'ä',\n    '|': 'ö',\n    '}': 'ü',\n    '~': 'û'\n};\n//# sourceMappingURL=Charsets.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Lifecycle_1 = require(\"./common/Lifecycle\");\nvar TextDecoder_1 = require(\"./core/input/TextDecoder\");\nfunction r(low, high) {\n    var c = high - low;\n    var arr = new Array(c);\n    while (c--) {\n        arr[c] = --high;\n    }\n    return arr;\n}\nvar TransitionTable = (function () {\n    function TransitionTable(length) {\n        this.table = (typeof Uint8Array === 'undefined')\n            ? new Array(length)\n            : new Uint8Array(length);\n    }\n    TransitionTable.prototype.add = function (code, state, action, next) {\n        this.table[state << 8 | code] = ((action | 0) << 4) | ((next === undefined) ? state : next);\n    };\n    TransitionTable.prototype.addMany = function (codes, state, action, next) {\n        for (var i = 0; i < codes.length; i++) {\n            this.add(codes[i], state, action, next);\n        }\n    };\n    return TransitionTable;\n}());\nexports.TransitionTable = TransitionTable;\nvar PRINTABLES = r(0x20, 0x7f);\nvar EXECUTABLES = r(0x00, 0x18);\nEXECUTABLES.push(0x19);\nEXECUTABLES.push.apply(EXECUTABLES, r(0x1c, 0x20));\nvar NON_ASCII_PRINTABLE = 0xA0;\nexports.VT500_TRANSITION_TABLE = (function () {\n    var table = new TransitionTable(4095);\n    var states = r(0, 13 + 1);\n    var state;\n    for (state in states) {\n        for (var code = 0; code <= NON_ASCII_PRINTABLE; ++code) {\n            table.add(code, state, 1, 0);\n        }\n    }\n    table.addMany(PRINTABLES, 0, 2, 0);\n    for (state in states) {\n        table.addMany([0x18, 0x1a, 0x99, 0x9a], state, 3, 0);\n        table.addMany(r(0x80, 0x90), state, 3, 0);\n        table.addMany(r(0x90, 0x98), state, 3, 0);\n        table.add(0x9c, state, 0, 0);\n        table.add(0x1b, state, 11, 1);\n        table.add(0x9d, state, 4, 8);\n        table.addMany([0x98, 0x9e, 0x9f], state, 0, 7);\n        table.add(0x9b, state, 11, 3);\n        table.add(0x90, state, 11, 9);\n    }\n    table.addMany(EXECUTABLES, 0, 3, 0);\n    table.addMany(EXECUTABLES, 1, 3, 1);\n    table.add(0x7f, 1, 0, 1);\n    table.addMany(EXECUTABLES, 8, 0, 8);\n    table.addMany(EXECUTABLES, 3, 3, 3);\n    table.add(0x7f, 3, 0, 3);\n    table.addMany(EXECUTABLES, 4, 3, 4);\n    table.add(0x7f, 4, 0, 4);\n    table.addMany(EXECUTABLES, 6, 3, 6);\n    table.addMany(EXECUTABLES, 5, 3, 5);\n    table.add(0x7f, 5, 0, 5);\n    table.addMany(EXECUTABLES, 2, 3, 2);\n    table.add(0x7f, 2, 0, 2);\n    table.add(0x5d, 1, 4, 8);\n    table.addMany(PRINTABLES, 8, 5, 8);\n    table.add(0x7f, 8, 5, 8);\n    table.addMany([0x9c, 0x1b, 0x18, 0x1a, 0x07], 8, 6, 0);\n    table.addMany(r(0x1c, 0x20), 8, 0, 8);\n    table.addMany([0x58, 0x5e, 0x5f], 1, 0, 7);\n    table.addMany(PRINTABLES, 7, 0, 7);\n    table.addMany(EXECUTABLES, 7, 0, 7);\n    table.add(0x9c, 7, 0, 0);\n    table.add(0x7f, 7, 0, 7);\n    table.add(0x5b, 1, 11, 3);\n    table.addMany(r(0x40, 0x7f), 3, 7, 0);\n    table.addMany(r(0x30, 0x3a), 3, 8, 4);\n    table.add(0x3b, 3, 8, 4);\n    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 3, 9, 4);\n    table.addMany(r(0x30, 0x3a), 4, 8, 4);\n    table.add(0x3b, 4, 8, 4);\n    table.addMany(r(0x40, 0x7f), 4, 7, 0);\n    table.addMany([0x3a, 0x3c, 0x3d, 0x3e, 0x3f], 4, 0, 6);\n    table.addMany(r(0x20, 0x40), 6, 0, 6);\n    table.add(0x7f, 6, 0, 6);\n    table.addMany(r(0x40, 0x7f), 6, 0, 0);\n    table.add(0x3a, 3, 0, 6);\n    table.addMany(r(0x20, 0x30), 3, 9, 5);\n    table.addMany(r(0x20, 0x30), 5, 9, 5);\n    table.addMany(r(0x30, 0x40), 5, 0, 6);\n    table.addMany(r(0x40, 0x7f), 5, 7, 0);\n    table.addMany(r(0x20, 0x30), 4, 9, 5);\n    table.addMany(r(0x20, 0x30), 1, 9, 2);\n    table.addMany(r(0x20, 0x30), 2, 9, 2);\n    table.addMany(r(0x30, 0x7f), 2, 10, 0);\n    table.addMany(r(0x30, 0x50), 1, 10, 0);\n    table.addMany(r(0x51, 0x58), 1, 10, 0);\n    table.addMany([0x59, 0x5a, 0x5c], 1, 10, 0);\n    table.addMany(r(0x60, 0x7f), 1, 10, 0);\n    table.add(0x50, 1, 11, 9);\n    table.addMany(EXECUTABLES, 9, 0, 9);\n    table.add(0x7f, 9, 0, 9);\n    table.addMany(r(0x1c, 0x20), 9, 0, 9);\n    table.addMany(r(0x20, 0x30), 9, 9, 12);\n    table.add(0x3a, 9, 0, 11);\n    table.addMany(r(0x30, 0x3a), 9, 8, 10);\n    table.add(0x3b, 9, 8, 10);\n    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 9, 9, 10);\n    table.addMany(EXECUTABLES, 11, 0, 11);\n    table.addMany(r(0x20, 0x80), 11, 0, 11);\n    table.addMany(r(0x1c, 0x20), 11, 0, 11);\n    table.addMany(EXECUTABLES, 10, 0, 10);\n    table.add(0x7f, 10, 0, 10);\n    table.addMany(r(0x1c, 0x20), 10, 0, 10);\n    table.addMany(r(0x30, 0x3a), 10, 8, 10);\n    table.add(0x3b, 10, 8, 10);\n    table.addMany([0x3a, 0x3c, 0x3d, 0x3e, 0x3f], 10, 0, 11);\n    table.addMany(r(0x20, 0x30), 10, 9, 12);\n    table.addMany(EXECUTABLES, 12, 0, 12);\n    table.add(0x7f, 12, 0, 12);\n    table.addMany(r(0x1c, 0x20), 12, 0, 12);\n    table.addMany(r(0x20, 0x30), 12, 9, 12);\n    table.addMany(r(0x30, 0x40), 12, 0, 11);\n    table.addMany(r(0x40, 0x7f), 12, 12, 13);\n    table.addMany(r(0x40, 0x7f), 10, 12, 13);\n    table.addMany(r(0x40, 0x7f), 9, 12, 13);\n    table.addMany(EXECUTABLES, 13, 13, 13);\n    table.addMany(PRINTABLES, 13, 13, 13);\n    table.add(0x7f, 13, 0, 13);\n    table.addMany([0x1b, 0x9c], 13, 14, 0);\n    table.add(NON_ASCII_PRINTABLE, 8, 5, 8);\n    return table;\n})();\nvar DcsDummy = (function () {\n    function DcsDummy() {\n    }\n    DcsDummy.prototype.hook = function (collect, params, flag) { };\n    DcsDummy.prototype.put = function (data, start, end) { };\n    DcsDummy.prototype.unhook = function () { };\n    return DcsDummy;\n}());\nvar EscapeSequenceParser = (function (_super) {\n    __extends(EscapeSequenceParser, _super);\n    function EscapeSequenceParser(TRANSITIONS) {\n        if (TRANSITIONS === void 0) { TRANSITIONS = exports.VT500_TRANSITION_TABLE; }\n        var _this = _super.call(this) || this;\n        _this.TRANSITIONS = TRANSITIONS;\n        _this.initialState = 0;\n        _this.currentState = _this.initialState;\n        _this._osc = '';\n        _this._params = [0];\n        _this._collect = '';\n        _this._printHandlerFb = function (data, start, end) { };\n        _this._executeHandlerFb = function (code) { };\n        _this._csiHandlerFb = function (collect, params, flag) { };\n        _this._escHandlerFb = function (collect, flag) { };\n        _this._oscHandlerFb = function (identifier, data) { };\n        _this._dcsHandlerFb = new DcsDummy();\n        _this._errorHandlerFb = function (state) { return state; };\n        _this._printHandler = _this._printHandlerFb;\n        _this._executeHandlers = Object.create(null);\n        _this._csiHandlers = Object.create(null);\n        _this._escHandlers = Object.create(null);\n        _this._oscHandlers = Object.create(null);\n        _this._dcsHandlers = Object.create(null);\n        _this._activeDcsHandler = null;\n        _this._errorHandler = _this._errorHandlerFb;\n        _this.setEscHandler('\\\\', function () { });\n        return _this;\n    }\n    EscapeSequenceParser.prototype.dispose = function () {\n        this._printHandlerFb = null;\n        this._executeHandlerFb = null;\n        this._csiHandlerFb = null;\n        this._escHandlerFb = null;\n        this._oscHandlerFb = null;\n        this._dcsHandlerFb = null;\n        this._errorHandlerFb = null;\n        this._printHandler = null;\n        this._executeHandlers = null;\n        this._escHandlers = null;\n        this._csiHandlers = null;\n        this._oscHandlers = null;\n        this._dcsHandlers = null;\n        this._activeDcsHandler = null;\n        this._errorHandler = null;\n    };\n    EscapeSequenceParser.prototype.setPrintHandler = function (callback) {\n        this._printHandler = callback;\n    };\n    EscapeSequenceParser.prototype.clearPrintHandler = function () {\n        this._printHandler = this._printHandlerFb;\n    };\n    EscapeSequenceParser.prototype.setExecuteHandler = function (flag, callback) {\n        this._executeHandlers[flag.charCodeAt(0)] = callback;\n    };\n    EscapeSequenceParser.prototype.clearExecuteHandler = function (flag) {\n        if (this._executeHandlers[flag.charCodeAt(0)])\n            delete this._executeHandlers[flag.charCodeAt(0)];\n    };\n    EscapeSequenceParser.prototype.setExecuteHandlerFallback = function (callback) {\n        this._executeHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.addCsiHandler = function (flag, callback) {\n        var index = flag.charCodeAt(0);\n        if (this._csiHandlers[index] === undefined) {\n            this._csiHandlers[index] = [];\n        }\n        var handlerList = this._csiHandlers[index];\n        handlerList.push(callback);\n        return {\n            dispose: function () {\n                var handlerIndex = handlerList.indexOf(callback);\n                if (handlerIndex !== -1) {\n                    handlerList.splice(handlerIndex, 1);\n                }\n            }\n        };\n    };\n    EscapeSequenceParser.prototype.setCsiHandler = function (flag, callback) {\n        this._csiHandlers[flag.charCodeAt(0)] = [callback];\n    };\n    EscapeSequenceParser.prototype.clearCsiHandler = function (flag) {\n        if (this._csiHandlers[flag.charCodeAt(0)])\n            delete this._csiHandlers[flag.charCodeAt(0)];\n    };\n    EscapeSequenceParser.prototype.setCsiHandlerFallback = function (callback) {\n        this._csiHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.setEscHandler = function (collectAndFlag, callback) {\n        this._escHandlers[collectAndFlag] = callback;\n    };\n    EscapeSequenceParser.prototype.clearEscHandler = function (collectAndFlag) {\n        if (this._escHandlers[collectAndFlag])\n            delete this._escHandlers[collectAndFlag];\n    };\n    EscapeSequenceParser.prototype.setEscHandlerFallback = function (callback) {\n        this._escHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.addOscHandler = function (ident, callback) {\n        if (this._oscHandlers[ident] === undefined) {\n            this._oscHandlers[ident] = [];\n        }\n        var handlerList = this._oscHandlers[ident];\n        handlerList.push(callback);\n        return {\n            dispose: function () {\n                var handlerIndex = handlerList.indexOf(callback);\n                if (handlerIndex !== -1) {\n                    handlerList.splice(handlerIndex, 1);\n                }\n            }\n        };\n    };\n    EscapeSequenceParser.prototype.setOscHandler = function (ident, callback) {\n        this._oscHandlers[ident] = [callback];\n    };\n    EscapeSequenceParser.prototype.clearOscHandler = function (ident) {\n        if (this._oscHandlers[ident])\n            delete this._oscHandlers[ident];\n    };\n    EscapeSequenceParser.prototype.setOscHandlerFallback = function (callback) {\n        this._oscHandlerFb = callback;\n    };\n    EscapeSequenceParser.prototype.setDcsHandler = function (collectAndFlag, handler) {\n        this._dcsHandlers[collectAndFlag] = handler;\n    };\n    EscapeSequenceParser.prototype.clearDcsHandler = function (collectAndFlag) {\n        if (this._dcsHandlers[collectAndFlag])\n            delete this._dcsHandlers[collectAndFlag];\n    };\n    EscapeSequenceParser.prototype.setDcsHandlerFallback = function (handler) {\n        this._dcsHandlerFb = handler;\n    };\n    EscapeSequenceParser.prototype.setErrorHandler = function (callback) {\n        this._errorHandler = callback;\n    };\n    EscapeSequenceParser.prototype.clearErrorHandler = function () {\n        this._errorHandler = this._errorHandlerFb;\n    };\n    EscapeSequenceParser.prototype.reset = function () {\n        this.currentState = this.initialState;\n        this._osc = '';\n        this._params = [0];\n        this._collect = '';\n        this._activeDcsHandler = null;\n    };\n    EscapeSequenceParser.prototype.parse = function (data, length) {\n        var code = 0;\n        var transition = 0;\n        var error = false;\n        var currentState = this.currentState;\n        var print = -1;\n        var dcs = -1;\n        var osc = this._osc;\n        var collect = this._collect;\n        var params = this._params;\n        var table = this.TRANSITIONS.table;\n        var dcsHandler = this._activeDcsHandler;\n        var callback = null;\n        for (var i = 0; i < length; ++i) {\n            code = data[i];\n            if (currentState === 0 && code > 0x1f && code < 0x80) {\n                print = (~print) ? print : i;\n                do\n                    i++;\n                while (i < length && data[i] > 0x1f && data[i] < 0x80);\n                i--;\n                continue;\n            }\n            if (currentState === 4 && (code > 0x2f && code < 0x39)) {\n                params[params.length - 1] = params[params.length - 1] * 10 + code - 48;\n                continue;\n            }\n            transition = table[currentState << 8 | (code < 0xa0 ? code : NON_ASCII_PRINTABLE)];\n            switch (transition >> 4) {\n                case 2:\n                    print = (~print) ? print : i;\n                    break;\n                case 3:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    callback = this._executeHandlers[code];\n                    if (callback)\n                        callback();\n                    else\n                        this._executeHandlerFb(code);\n                    break;\n                case 0:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    else if (~dcs) {\n                        dcsHandler.put(data, dcs, i);\n                        dcs = -1;\n                    }\n                    break;\n                case 1:\n                    if (code > 0x9f) {\n                        switch (currentState) {\n                            case 0:\n                                print = (~print) ? print : i;\n                                break;\n                            case 6:\n                                transition |= 6;\n                                break;\n                            case 11:\n                                transition |= 11;\n                                break;\n                            case 13:\n                                dcs = (~dcs) ? dcs : i;\n                                transition |= 13;\n                                break;\n                            default:\n                                error = true;\n                        }\n                    }\n                    else {\n                        error = true;\n                    }\n                    if (error) {\n                        var inject = this._errorHandler({\n                            position: i,\n                            code: code,\n                            currentState: currentState,\n                            print: print,\n                            dcs: dcs,\n                            osc: osc,\n                            collect: collect,\n                            params: params,\n                            abort: false\n                        });\n                        if (inject.abort)\n                            return;\n                        error = false;\n                    }\n                    break;\n                case 7:\n                    var handlers = this._csiHandlers[code];\n                    var j = handlers ? handlers.length - 1 : -1;\n                    for (; j >= 0; j--) {\n                        if (handlers[j](params, collect) !== false) {\n                            break;\n                        }\n                    }\n                    if (j < 0) {\n                        this._csiHandlerFb(collect, params, code);\n                    }\n                    break;\n                case 8:\n                    if (code === 0x3b)\n                        params.push(0);\n                    else\n                        params[params.length - 1] = params[params.length - 1] * 10 + code - 48;\n                    break;\n                case 9:\n                    collect += String.fromCharCode(code);\n                    break;\n                case 10:\n                    callback = this._escHandlers[collect + String.fromCharCode(code)];\n                    if (callback)\n                        callback(collect, code);\n                    else\n                        this._escHandlerFb(collect, code);\n                    break;\n                case 11:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n                case 12:\n                    dcsHandler = this._dcsHandlers[collect + String.fromCharCode(code)];\n                    if (!dcsHandler)\n                        dcsHandler = this._dcsHandlerFb;\n                    dcsHandler.hook(collect, params, code);\n                    break;\n                case 13:\n                    dcs = (~dcs) ? dcs : i;\n                    break;\n                case 14:\n                    if (dcsHandler) {\n                        if (~dcs)\n                            dcsHandler.put(data, dcs, i);\n                        dcsHandler.unhook();\n                        dcsHandler = null;\n                    }\n                    if (code === 0x1b)\n                        transition |= 1;\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n                case 4:\n                    if (~print) {\n                        this._printHandler(data, print, i);\n                        print = -1;\n                    }\n                    osc = '';\n                    break;\n                case 5:\n                    for (var j_1 = i + 1;; j_1++) {\n                        if (j_1 >= length\n                            || (code = data[j_1]) < 0x20\n                            || (code > 0x7f && code <= 0x9f)) {\n                            osc += TextDecoder_1.utf32ToString(data, i, j_1);\n                            i = j_1 - 1;\n                            break;\n                        }\n                    }\n                    break;\n                case 6:\n                    if (osc && code !== 0x18 && code !== 0x1a) {\n                        var idx = osc.indexOf(';');\n                        if (idx === -1) {\n                            this._oscHandlerFb(-1, osc);\n                        }\n                        else {\n                            var identifier = parseInt(osc.substring(0, idx));\n                            var content = osc.substring(idx + 1);\n                            var handlers_1 = this._oscHandlers[identifier];\n                            var j_2 = handlers_1 ? handlers_1.length - 1 : -1;\n                            for (; j_2 >= 0; j_2--) {\n                                if (handlers_1[j_2](content) !== false) {\n                                    break;\n                                }\n                            }\n                            if (j_2 < 0) {\n                                this._oscHandlerFb(identifier, content);\n                            }\n                        }\n                    }\n                    if (code === 0x1b)\n                        transition |= 1;\n                    osc = '';\n                    params = [0];\n                    collect = '';\n                    dcs = -1;\n                    break;\n            }\n            currentState = transition & 15;\n        }\n        if (currentState === 0 && ~print) {\n            this._printHandler(data, print, length);\n        }\n        else if (currentState === 13 && ~dcs && dcsHandler) {\n            dcsHandler.put(data, dcs, length);\n        }\n        this._osc = osc;\n        this._collect = collect;\n        this._params = params;\n        this._activeDcsHandler = dcsHandler;\n        this.currentState = currentState;\n    };\n    return EscapeSequenceParser;\n}(Lifecycle_1.Disposable));\nexports.EscapeSequenceParser = EscapeSequenceParser;\n//# sourceMappingURL=EscapeSequenceParser.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TextRenderLayer_1 = require(\"./TextRenderLayer\");\nvar SelectionRenderLayer_1 = require(\"./SelectionRenderLayer\");\nvar CursorRenderLayer_1 = require(\"./CursorRenderLayer\");\nvar LinkRenderLayer_1 = require(\"./LinkRenderLayer\");\nvar CharacterJoinerRegistry_1 = require(\"../renderer/CharacterJoinerRegistry\");\nvar Lifecycle_1 = require(\"../common/Lifecycle\");\nvar Renderer = (function (_super) {\n    __extends(Renderer, _super);\n    function Renderer(_terminal, _colors) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._colors = _colors;\n        var allowTransparency = _this._terminal.options.allowTransparency;\n        _this._characterJoinerRegistry = new CharacterJoinerRegistry_1.CharacterJoinerRegistry(_terminal);\n        _this._renderLayers = [\n            new TextRenderLayer_1.TextRenderLayer(_this._terminal.screenElement, 0, _this._colors, _this._characterJoinerRegistry, allowTransparency),\n            new SelectionRenderLayer_1.SelectionRenderLayer(_this._terminal.screenElement, 1, _this._colors),\n            new LinkRenderLayer_1.LinkRenderLayer(_this._terminal.screenElement, 2, _this._colors, _this._terminal),\n            new CursorRenderLayer_1.CursorRenderLayer(_this._terminal.screenElement, 3, _this._colors)\n        ];\n        _this.dimensions = {\n            scaledCharWidth: null,\n            scaledCharHeight: null,\n            scaledCellWidth: null,\n            scaledCellHeight: null,\n            scaledCharLeft: null,\n            scaledCharTop: null,\n            scaledCanvasWidth: null,\n            scaledCanvasHeight: null,\n            canvasWidth: null,\n            canvasHeight: null,\n            actualCellWidth: null,\n            actualCellHeight: null\n        };\n        _this._devicePixelRatio = window.devicePixelRatio;\n        _this._updateDimensions();\n        _this.onOptionsChanged();\n        return _this;\n    }\n    Renderer.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._renderLayers.forEach(function (l) { return l.dispose(); });\n    };\n    Renderer.prototype.onDevicePixelRatioChange = function () {\n        if (this._devicePixelRatio !== window.devicePixelRatio) {\n            this._devicePixelRatio = window.devicePixelRatio;\n            this.onResize(this._terminal.cols, this._terminal.rows);\n        }\n    };\n    Renderer.prototype.setColors = function (colors) {\n        var _this = this;\n        this._colors = colors;\n        this._renderLayers.forEach(function (l) {\n            l.setColors(_this._terminal, _this._colors);\n            l.reset(_this._terminal);\n        });\n    };\n    Renderer.prototype.onResize = function (cols, rows) {\n        var _this = this;\n        this._updateDimensions();\n        this._renderLayers.forEach(function (l) { return l.resize(_this._terminal, _this.dimensions); });\n        this._terminal.screenElement.style.width = this.dimensions.canvasWidth + \"px\";\n        this._terminal.screenElement.style.height = this.dimensions.canvasHeight + \"px\";\n    };\n    Renderer.prototype.onCharSizeChanged = function () {\n        this.onResize(this._terminal.cols, this._terminal.rows);\n    };\n    Renderer.prototype.onBlur = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onBlur(_this._terminal); });\n    };\n    Renderer.prototype.onFocus = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onFocus(_this._terminal); });\n    };\n    Renderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        var _this = this;\n        if (columnSelectMode === void 0) { columnSelectMode = false; }\n        this._runOperation(function (l) { return l.onSelectionChanged(_this._terminal, start, end, columnSelectMode); });\n    };\n    Renderer.prototype.onCursorMove = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onCursorMove(_this._terminal); });\n    };\n    Renderer.prototype.onOptionsChanged = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.onOptionsChanged(_this._terminal); });\n    };\n    Renderer.prototype.clear = function () {\n        var _this = this;\n        this._runOperation(function (l) { return l.reset(_this._terminal); });\n    };\n    Renderer.prototype._runOperation = function (operation) {\n        this._renderLayers.forEach(function (l) { return operation(l); });\n    };\n    Renderer.prototype.renderRows = function (start, end) {\n        var _this = this;\n        this._renderLayers.forEach(function (l) { return l.onGridChanged(_this._terminal, start, end); });\n    };\n    Renderer.prototype._updateDimensions = function () {\n        if (!this._terminal.charMeasure.width || !this._terminal.charMeasure.height) {\n            return;\n        }\n        this.dimensions.scaledCharWidth = Math.floor(this._terminal.charMeasure.width * window.devicePixelRatio);\n        this.dimensions.scaledCharHeight = Math.ceil(this._terminal.charMeasure.height * window.devicePixelRatio);\n        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.options.lineHeight);\n        this.dimensions.scaledCharTop = this._terminal.options.lineHeight === 1 ? 0 : Math.round((this.dimensions.scaledCellHeight - this.dimensions.scaledCharHeight) / 2);\n        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.options.letterSpacing);\n        this.dimensions.scaledCharLeft = Math.floor(this._terminal.options.letterSpacing / 2);\n        this.dimensions.scaledCanvasHeight = this._terminal.rows * this.dimensions.scaledCellHeight;\n        this.dimensions.scaledCanvasWidth = this._terminal.cols * this.dimensions.scaledCellWidth;\n        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);\n        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);\n        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._terminal.rows;\n        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._terminal.cols;\n    };\n    Renderer.prototype.registerCharacterJoiner = function (handler) {\n        return this._characterJoinerRegistry.registerCharacterJoiner(handler);\n    };\n    Renderer.prototype.deregisterCharacterJoiner = function (joinerId) {\n        return this._characterJoinerRegistry.deregisterCharacterJoiner(joinerId);\n    };\n    return Renderer;\n}(Lifecycle_1.Disposable));\nexports.Renderer = Renderer;\n//# sourceMappingURL=Renderer.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GridCache_1 = require(\"./GridCache\");\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar BufferLine_1 = require(\"../core/buffer/BufferLine\");\nvar CharacterJoinerRegistry_1 = require(\"./CharacterJoinerRegistry\");\nvar TextRenderLayer = (function (_super) {\n    __extends(TextRenderLayer, _super);\n    function TextRenderLayer(container, zIndex, colors, characterJoinerRegistry, alpha) {\n        var _this = _super.call(this, container, 'text', zIndex, alpha, colors) || this;\n        _this._characterOverlapCache = {};\n        _this._workCell = new BufferLine_1.CellData();\n        _this._state = new GridCache_1.GridCache();\n        _this._characterJoinerRegistry = characterJoinerRegistry;\n        return _this;\n    }\n    TextRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        var terminalFont = this._getFont(terminal, false, false);\n        if (this._characterWidth !== dim.scaledCharWidth || this._characterFont !== terminalFont) {\n            this._characterWidth = dim.scaledCharWidth;\n            this._characterFont = terminalFont;\n            this._characterOverlapCache = {};\n        }\n        this._state.clear();\n        this._state.resize(terminal.cols, terminal.rows);\n    };\n    TextRenderLayer.prototype.reset = function (terminal) {\n        this._state.clear();\n        this.clearAll();\n    };\n    TextRenderLayer.prototype._forEachCell = function (terminal, firstRow, lastRow, joinerRegistry, callback) {\n        for (var y = firstRow; y <= lastRow; y++) {\n            var row = y + terminal.buffer.ydisp;\n            var line = terminal.buffer.lines.get(row);\n            var joinedRanges = joinerRegistry ? joinerRegistry.getJoinedCharacters(row) : [];\n            for (var x = 0; x < terminal.cols; x++) {\n                line.loadCell(x, this._workCell);\n                var cell = this._workCell;\n                var isJoined = false;\n                var lastCharX = x;\n                if (cell.getWidth() === 0) {\n                    continue;\n                }\n                if (joinedRanges.length > 0 && x === joinedRanges[0][0]) {\n                    isJoined = true;\n                    var range = joinedRanges.shift();\n                    cell = new CharacterJoinerRegistry_1.JoinedCellData(this._workCell, line.translateToString(true, range[0], range[1]), range[1] - range[0]);\n                    lastCharX = range[1] - 1;\n                }\n                if (!isJoined && this._isOverlapping(cell)) {\n                    if (lastCharX < line.length - 1 && line.getCodePoint(lastCharX + 1) === BufferLine_1.NULL_CELL_CODE) {\n                        cell.content &= ~12582912;\n                        cell.content |= 2 << 22;\n                    }\n                }\n                callback(cell, x, y);\n                x = lastCharX;\n            }\n        }\n    };\n    TextRenderLayer.prototype._drawBackground = function (terminal, firstRow, lastRow) {\n        var _this = this;\n        var ctx = this._ctx;\n        var cols = terminal.cols;\n        var startX = 0;\n        var startY = 0;\n        var prevFillStyle = null;\n        ctx.save();\n        this._forEachCell(terminal, firstRow, lastRow, null, function (cell, x, y) {\n            var nextFillStyle = null;\n            if (cell.isInverse()) {\n                if (cell.isFgDefault()) {\n                    nextFillStyle = _this._colors.foreground.css;\n                }\n                else if (cell.isFgRGB()) {\n                    nextFillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + \")\";\n                }\n                else {\n                    nextFillStyle = _this._colors.ansi[cell.getFgColor()].css;\n                }\n            }\n            else if (cell.isBgRGB()) {\n                nextFillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + \")\";\n            }\n            else if (cell.isBgPalette()) {\n                nextFillStyle = _this._colors.ansi[cell.getBgColor()].css;\n            }\n            if (prevFillStyle === null) {\n                startX = x;\n                startY = y;\n            }\n            if (y !== startY) {\n                ctx.fillStyle = prevFillStyle;\n                _this.fillCells(startX, startY, cols - startX, 1);\n                startX = x;\n                startY = y;\n            }\n            else if (prevFillStyle !== nextFillStyle) {\n                ctx.fillStyle = prevFillStyle;\n                _this.fillCells(startX, startY, x - startX, 1);\n                startX = x;\n                startY = y;\n            }\n            prevFillStyle = nextFillStyle;\n        });\n        if (prevFillStyle !== null) {\n            ctx.fillStyle = prevFillStyle;\n            this.fillCells(startX, startY, cols - startX, 1);\n        }\n        ctx.restore();\n    };\n    TextRenderLayer.prototype._drawForeground = function (terminal, firstRow, lastRow) {\n        var _this = this;\n        this._forEachCell(terminal, firstRow, lastRow, this._characterJoinerRegistry, function (cell, x, y) {\n            if (cell.isInvisible()) {\n                return;\n            }\n            _this.drawChars(terminal, cell, x, y);\n            if (cell.isUnderline()) {\n                _this._ctx.save();\n                if (cell.isInverse()) {\n                    if (cell.isBgDefault()) {\n                        _this._ctx.fillStyle = _this._colors.background.css;\n                    }\n                    else if (cell.isBgRGB()) {\n                        _this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + \")\";\n                    }\n                    else {\n                        _this._ctx.fillStyle = _this._colors.ansi[cell.getBgColor()].css;\n                    }\n                }\n                else {\n                    if (cell.isFgDefault()) {\n                        _this._ctx.fillStyle = _this._colors.foreground.css;\n                    }\n                    else if (cell.isFgRGB()) {\n                        _this._ctx.fillStyle = \"rgb(\" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + \")\";\n                    }\n                    else {\n                        var fg = cell.getFgColor();\n                        if (terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {\n                            fg += 8;\n                        }\n                        _this._ctx.fillStyle = _this._colors.ansi[fg].css;\n                    }\n                }\n                _this.fillBottomLineAtCells(x, y, cell.getWidth());\n                _this._ctx.restore();\n            }\n        });\n    };\n    TextRenderLayer.prototype.onGridChanged = function (terminal, firstRow, lastRow) {\n        if (this._state.cache.length === 0) {\n            return;\n        }\n        if (this._charAtlas) {\n            this._charAtlas.beginFrame();\n        }\n        this.clearCells(0, firstRow, terminal.cols, lastRow - firstRow + 1);\n        this._drawBackground(terminal, firstRow, lastRow);\n        this._drawForeground(terminal, firstRow, lastRow);\n    };\n    TextRenderLayer.prototype.onOptionsChanged = function (terminal) {\n        this.setTransparency(terminal, terminal.options.allowTransparency);\n    };\n    TextRenderLayer.prototype._isOverlapping = function (cell) {\n        if (cell.getWidth() !== 1) {\n            return false;\n        }\n        if (cell.getCode() < 256) {\n            return false;\n        }\n        var chars = cell.getChars();\n        if (this._characterOverlapCache.hasOwnProperty(chars)) {\n            return this._characterOverlapCache[chars];\n        }\n        this._ctx.save();\n        this._ctx.font = this._characterFont;\n        var overlaps = Math.floor(this._ctx.measureText(chars).width) > this._characterWidth;\n        this._ctx.restore();\n        this._characterOverlapCache[chars] = overlaps;\n        return overlaps;\n    };\n    return TextRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.TextRenderLayer = TextRenderLayer;\n//# sourceMappingURL=TextRenderLayer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar GridCache = (function () {\n    function GridCache() {\n        this.cache = [];\n    }\n    GridCache.prototype.resize = function (width, height) {\n        for (var x = 0; x < width; x++) {\n            if (this.cache.length <= x) {\n                this.cache.push([]);\n            }\n            for (var y = this.cache[x].length; y < height; y++) {\n                this.cache[x].push(null);\n            }\n            this.cache[x].length = height;\n        }\n        this.cache.length = width;\n    };\n    GridCache.prototype.clear = function () {\n        for (var x = 0; x < this.cache.length; x++) {\n            for (var y = 0; y < this.cache[x].length; y++) {\n                this.cache[x][y] = null;\n            }\n        }\n    };\n    return GridCache;\n}());\nexports.GridCache = GridCache;\n//# sourceMappingURL=GridCache.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"./Types\");\nvar BaseCharAtlas_1 = require(\"./BaseCharAtlas\");\nvar ColorManager_1 = require(\"../../ui/ColorManager\");\nvar CharAtlasGenerator_1 = require(\"./CharAtlasGenerator\");\nvar LRUMap_1 = require(\"./LRUMap\");\nvar Platform_1 = require(\"../../common/Platform\");\nvar TEXTURE_WIDTH = 1024;\nvar TEXTURE_HEIGHT = 1024;\nvar TRANSPARENT_COLOR = {\n    css: 'rgba(0, 0, 0, 0)',\n    rgba: 0\n};\nvar FRAME_CACHE_DRAW_LIMIT = 100;\nvar GLYPH_BITMAP_COMMIT_DELAY = 100;\nfunction getGlyphCacheKey(glyph) {\n    return glyph.code << 21 | glyph.bg << 12 | glyph.fg << 3 | (glyph.bold ? 0 : 4) + (glyph.dim ? 0 : 2) + (glyph.italic ? 0 : 1);\n}\nexports.getGlyphCacheKey = getGlyphCacheKey;\nvar DynamicCharAtlas = (function (_super) {\n    __extends(DynamicCharAtlas, _super);\n    function DynamicCharAtlas(document, _config) {\n        var _this = _super.call(this) || this;\n        _this._config = _config;\n        _this._drawToCacheCount = 0;\n        _this._glyphsWaitingOnBitmap = [];\n        _this._bitmapCommitTimeout = null;\n        _this._bitmap = null;\n        _this._cacheCanvas = document.createElement('canvas');\n        _this._cacheCanvas.width = TEXTURE_WIDTH;\n        _this._cacheCanvas.height = TEXTURE_HEIGHT;\n        _this._cacheCtx = _this._cacheCanvas.getContext('2d', { alpha: true });\n        var tmpCanvas = document.createElement('canvas');\n        tmpCanvas.width = _this._config.scaledCharWidth;\n        tmpCanvas.height = _this._config.scaledCharHeight;\n        _this._tmpCtx = tmpCanvas.getContext('2d', { alpha: _this._config.allowTransparency });\n        _this._width = Math.floor(TEXTURE_WIDTH / _this._config.scaledCharWidth);\n        _this._height = Math.floor(TEXTURE_HEIGHT / _this._config.scaledCharHeight);\n        var capacity = _this._width * _this._height;\n        _this._cacheMap = new LRUMap_1.default(capacity);\n        _this._cacheMap.prealloc(capacity);\n        return _this;\n    }\n    DynamicCharAtlas.prototype.dispose = function () {\n        if (this._bitmapCommitTimeout !== null) {\n            window.clearTimeout(this._bitmapCommitTimeout);\n            this._bitmapCommitTimeout = null;\n        }\n    };\n    DynamicCharAtlas.prototype.beginFrame = function () {\n        this._drawToCacheCount = 0;\n    };\n    DynamicCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        if (glyph.code === 32) {\n            return true;\n        }\n        if (!this._canCache(glyph)) {\n            return false;\n        }\n        var glyphKey = getGlyphCacheKey(glyph);\n        var cacheValue = this._cacheMap.get(glyphKey);\n        if (cacheValue !== null && cacheValue !== undefined) {\n            this._drawFromCache(ctx, cacheValue, x, y);\n            return true;\n        }\n        else if (this._drawToCacheCount < FRAME_CACHE_DRAW_LIMIT) {\n            var index = void 0;\n            if (this._cacheMap.size < this._cacheMap.capacity) {\n                index = this._cacheMap.size;\n            }\n            else {\n                index = this._cacheMap.peek().index;\n            }\n            var cacheValue_1 = this._drawToCache(glyph, index);\n            this._cacheMap.set(glyphKey, cacheValue_1);\n            this._drawFromCache(ctx, cacheValue_1, x, y);\n            return true;\n        }\n        return false;\n    };\n    DynamicCharAtlas.prototype._canCache = function (glyph) {\n        return glyph.code < 256;\n    };\n    DynamicCharAtlas.prototype._toCoordinateX = function (index) {\n        return (index % this._width) * this._config.scaledCharWidth;\n    };\n    DynamicCharAtlas.prototype._toCoordinateY = function (index) {\n        return Math.floor(index / this._width) * this._config.scaledCharHeight;\n    };\n    DynamicCharAtlas.prototype._drawFromCache = function (ctx, cacheValue, x, y) {\n        if (cacheValue.isEmpty) {\n            return;\n        }\n        var cacheX = this._toCoordinateX(cacheValue.index);\n        var cacheY = this._toCoordinateY(cacheValue.index);\n        ctx.drawImage(cacheValue.inBitmap ? this._bitmap : this._cacheCanvas, cacheX, cacheY, this._config.scaledCharWidth, this._config.scaledCharHeight, x, y, this._config.scaledCharWidth, this._config.scaledCharHeight);\n    };\n    DynamicCharAtlas.prototype._getColorFromAnsiIndex = function (idx) {\n        if (idx < this._config.colors.ansi.length) {\n            return this._config.colors.ansi[idx];\n        }\n        return ColorManager_1.DEFAULT_ANSI_COLORS[idx];\n    };\n    DynamicCharAtlas.prototype._getBackgroundColor = function (glyph) {\n        if (this._config.allowTransparency) {\n            return TRANSPARENT_COLOR;\n        }\n        else if (glyph.bg === Types_1.INVERTED_DEFAULT_COLOR) {\n            return this._config.colors.foreground;\n        }\n        else if (glyph.bg < 256) {\n            return this._getColorFromAnsiIndex(glyph.bg);\n        }\n        return this._config.colors.background;\n    };\n    DynamicCharAtlas.prototype._getForegroundColor = function (glyph) {\n        if (glyph.fg === Types_1.INVERTED_DEFAULT_COLOR) {\n            return this._config.colors.background;\n        }\n        else if (glyph.fg < 256) {\n            return this._getColorFromAnsiIndex(glyph.fg);\n        }\n        return this._config.colors.foreground;\n    };\n    DynamicCharAtlas.prototype._drawToCache = function (glyph, index) {\n        this._drawToCacheCount++;\n        this._tmpCtx.save();\n        var backgroundColor = this._getBackgroundColor(glyph);\n        this._tmpCtx.globalCompositeOperation = 'copy';\n        this._tmpCtx.fillStyle = backgroundColor.css;\n        this._tmpCtx.fillRect(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);\n        this._tmpCtx.globalCompositeOperation = 'source-over';\n        var fontWeight = glyph.bold ? this._config.fontWeightBold : this._config.fontWeight;\n        var fontStyle = glyph.italic ? 'italic' : '';\n        this._tmpCtx.font =\n            fontStyle + \" \" + fontWeight + \" \" + this._config.fontSize * this._config.devicePixelRatio + \"px \" + this._config.fontFamily;\n        this._tmpCtx.textBaseline = 'middle';\n        this._tmpCtx.fillStyle = this._getForegroundColor(glyph).css;\n        if (glyph.dim) {\n            this._tmpCtx.globalAlpha = Types_1.DIM_OPACITY;\n        }\n        this._tmpCtx.fillText(glyph.chars, 0, this._config.scaledCharHeight / 2);\n        this._tmpCtx.restore();\n        var imageData = this._tmpCtx.getImageData(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);\n        var isEmpty = false;\n        if (!this._config.allowTransparency) {\n            isEmpty = CharAtlasGenerator_1.clearColor(imageData, backgroundColor);\n        }\n        var x = this._toCoordinateX(index);\n        var y = this._toCoordinateY(index);\n        this._cacheCtx.putImageData(imageData, x, y);\n        var cacheValue = {\n            index: index,\n            isEmpty: isEmpty,\n            inBitmap: false\n        };\n        this._addGlyphToBitmap(cacheValue);\n        return cacheValue;\n    };\n    DynamicCharAtlas.prototype._addGlyphToBitmap = function (cacheValue) {\n        var _this = this;\n        if (!('createImageBitmap' in window) || Platform_1.isFirefox || Platform_1.isSafari) {\n            return;\n        }\n        this._glyphsWaitingOnBitmap.push(cacheValue);\n        if (this._bitmapCommitTimeout !== null) {\n            return;\n        }\n        this._bitmapCommitTimeout = window.setTimeout(function () { return _this._generateBitmap(); }, GLYPH_BITMAP_COMMIT_DELAY);\n    };\n    DynamicCharAtlas.prototype._generateBitmap = function () {\n        var _this = this;\n        var glyphsMovingToBitmap = this._glyphsWaitingOnBitmap;\n        this._glyphsWaitingOnBitmap = [];\n        window.createImageBitmap(this._cacheCanvas).then(function (bitmap) {\n            _this._bitmap = bitmap;\n            for (var i = 0; i < glyphsMovingToBitmap.length; i++) {\n                var value = glyphsMovingToBitmap[i];\n                value.inBitmap = true;\n            }\n        });\n        this._bitmapCommitTimeout = null;\n    };\n    return DynamicCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = DynamicCharAtlas;\n//# sourceMappingURL=DynamicCharAtlas.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LRUMap = (function () {\n    function LRUMap(capacity) {\n        this.capacity = capacity;\n        this._map = {};\n        this._head = null;\n        this._tail = null;\n        this._nodePool = [];\n        this.size = 0;\n    }\n    LRUMap.prototype._unlinkNode = function (node) {\n        var prev = node.prev;\n        var next = node.next;\n        if (node === this._head) {\n            this._head = next;\n        }\n        if (node === this._tail) {\n            this._tail = prev;\n        }\n        if (prev !== null) {\n            prev.next = next;\n        }\n        if (next !== null) {\n            next.prev = prev;\n        }\n    };\n    LRUMap.prototype._appendNode = function (node) {\n        var tail = this._tail;\n        if (tail !== null) {\n            tail.next = node;\n        }\n        node.prev = tail;\n        node.next = null;\n        this._tail = node;\n        if (this._head === null) {\n            this._head = node;\n        }\n    };\n    LRUMap.prototype.prealloc = function (count) {\n        var nodePool = this._nodePool;\n        for (var i = 0; i < count; i++) {\n            nodePool.push({\n                prev: null,\n                next: null,\n                key: null,\n                value: null\n            });\n        }\n    };\n    LRUMap.prototype.get = function (key) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            this._unlinkNode(node);\n            this._appendNode(node);\n            return node.value;\n        }\n        return null;\n    };\n    LRUMap.prototype.peekValue = function (key) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            return node.value;\n        }\n        return null;\n    };\n    LRUMap.prototype.peek = function () {\n        var head = this._head;\n        return head === null ? null : head.value;\n    };\n    LRUMap.prototype.set = function (key, value) {\n        var node = this._map[key];\n        if (node !== undefined) {\n            node = this._map[key];\n            this._unlinkNode(node);\n            node.value = value;\n        }\n        else if (this.size >= this.capacity) {\n            node = this._head;\n            this._unlinkNode(node);\n            delete this._map[node.key];\n            node.key = key;\n            node.value = value;\n            this._map[key] = node;\n        }\n        else {\n            var nodePool = this._nodePool;\n            if (nodePool.length > 0) {\n                node = nodePool.pop();\n                node.key = key;\n                node.value = value;\n            }\n            else {\n                node = {\n                    prev: null,\n                    next: null,\n                    key: key,\n                    value: value\n                };\n            }\n            this._map[key] = node;\n            this.size++;\n        }\n        this._appendNode(node);\n    };\n    return LRUMap;\n}());\nexports.default = LRUMap;\n//# sourceMappingURL=LRUMap.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseCharAtlas_1 = require(\"./BaseCharAtlas\");\nvar NoneCharAtlas = (function (_super) {\n    __extends(NoneCharAtlas, _super);\n    function NoneCharAtlas(document, config) {\n        return _super.call(this) || this;\n    }\n    NoneCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        return false;\n    };\n    return NoneCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = NoneCharAtlas;\n//# sourceMappingURL=NoneCharAtlas.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"./Types\");\nvar CharAtlasGenerator_1 = require(\"./CharAtlasGenerator\");\nvar BaseCharAtlas_1 = require(\"./BaseCharAtlas\");\nvar CharAtlasUtils_1 = require(\"./CharAtlasUtils\");\nvar Types_2 = require(\"../../common/Types\");\nvar StaticCharAtlas = (function (_super) {\n    __extends(StaticCharAtlas, _super);\n    function StaticCharAtlas(_document, _config) {\n        var _this = _super.call(this) || this;\n        _this._document = _document;\n        _this._config = _config;\n        _this._canvasFactory = function (width, height) {\n            var canvas = _this._document.createElement('canvas');\n            canvas.width = width;\n            canvas.height = height;\n            return canvas;\n        };\n        return _this;\n    }\n    StaticCharAtlas.prototype._doWarmUp = function () {\n        var _this = this;\n        var result = CharAtlasGenerator_1.generateStaticCharAtlasTexture(window, this._canvasFactory, this._config);\n        if (result instanceof HTMLCanvasElement) {\n            this._texture = result;\n        }\n        else {\n            result.then(function (texture) {\n                _this._texture = texture;\n            });\n        }\n    };\n    StaticCharAtlas.prototype._isCached = function (glyph, colorIndex) {\n        var isAscii = glyph.code < 256;\n        var isBasicColor = glyph.fg < 16;\n        var isDefaultColor = glyph.fg === Types_2.DEFAULT_COLOR;\n        var isDefaultBackground = glyph.bg === Types_2.DEFAULT_COLOR;\n        return isAscii && (isBasicColor || isDefaultColor) && isDefaultBackground && !glyph.italic;\n    };\n    StaticCharAtlas.prototype.draw = function (ctx, glyph, x, y) {\n        if (this._texture === null || this._texture === undefined) {\n            return false;\n        }\n        var colorIndex = 0;\n        if (CharAtlasUtils_1.is256Color(glyph.fg)) {\n            colorIndex = 2 + glyph.fg + (glyph.bold ? 16 : 0);\n        }\n        else if (glyph.fg === Types_2.DEFAULT_COLOR) {\n            if (glyph.bold) {\n                colorIndex = 1;\n            }\n        }\n        if (!this._isCached(glyph, colorIndex)) {\n            return false;\n        }\n        ctx.save();\n        var charAtlasCellWidth = this._config.scaledCharWidth + Types_1.CHAR_ATLAS_CELL_SPACING;\n        var charAtlasCellHeight = this._config.scaledCharHeight + Types_1.CHAR_ATLAS_CELL_SPACING;\n        if (glyph.dim) {\n            ctx.globalAlpha = Types_1.DIM_OPACITY;\n        }\n        ctx.drawImage(this._texture, glyph.code * charAtlasCellWidth, colorIndex * charAtlasCellHeight, charAtlasCellWidth, this._config.scaledCharHeight, x, y, charAtlasCellWidth, this._config.scaledCharHeight);\n        ctx.restore();\n        return true;\n    };\n    return StaticCharAtlas;\n}(BaseCharAtlas_1.default));\nexports.default = StaticCharAtlas;\n//# sourceMappingURL=StaticCharAtlas.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar SelectionRenderLayer = (function (_super) {\n    __extends(SelectionRenderLayer, _super);\n    function SelectionRenderLayer(container, zIndex, colors) {\n        var _this = _super.call(this, container, 'selection', zIndex, true, colors) || this;\n        _this._clearState();\n        return _this;\n    }\n    SelectionRenderLayer.prototype._clearState = function () {\n        this._state = {\n            start: null,\n            end: null,\n            columnSelectMode: null,\n            ydisp: null\n        };\n    };\n    SelectionRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._clearState();\n    };\n    SelectionRenderLayer.prototype.reset = function (terminal) {\n        if (this._state.start && this._state.end) {\n            this._clearState();\n            this.clearAll();\n        }\n    };\n    SelectionRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {\n        if (!this._didStateChange(start, end, columnSelectMode, terminal.buffer.ydisp)) {\n            return;\n        }\n        this.clearAll();\n        if (!start || !end) {\n            this._clearState();\n            return;\n        }\n        var viewportStartRow = start[1] - terminal.buffer.ydisp;\n        var viewportEndRow = end[1] - terminal.buffer.ydisp;\n        var viewportCappedStartRow = Math.max(viewportStartRow, 0);\n        var viewportCappedEndRow = Math.min(viewportEndRow, terminal.rows - 1);\n        if (viewportCappedStartRow >= terminal.rows || viewportCappedEndRow < 0) {\n            return;\n        }\n        this._ctx.fillStyle = this._colors.selection.css;\n        if (columnSelectMode) {\n            var startCol = start[0];\n            var width = end[0] - startCol;\n            var height = viewportCappedEndRow - viewportCappedStartRow + 1;\n            this.fillCells(startCol, viewportCappedStartRow, width, height);\n        }\n        else {\n            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;\n            var startRowEndCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : terminal.cols;\n            this.fillCells(startCol, viewportCappedStartRow, startRowEndCol - startCol, 1);\n            var middleRowsCount = Math.max(viewportCappedEndRow - viewportCappedStartRow - 1, 0);\n            this.fillCells(0, viewportCappedStartRow + 1, terminal.cols, middleRowsCount);\n            if (viewportCappedStartRow !== viewportCappedEndRow) {\n                var endCol = viewportEndRow === viewportCappedEndRow ? end[0] : terminal.cols;\n                this.fillCells(0, viewportCappedEndRow, endCol, 1);\n            }\n        }\n        this._state.start = [start[0], start[1]];\n        this._state.end = [end[0], end[1]];\n        this._state.columnSelectMode = columnSelectMode;\n        this._state.ydisp = terminal.buffer.ydisp;\n    };\n    SelectionRenderLayer.prototype._didStateChange = function (start, end, columnSelectMode, ydisp) {\n        return !this._areCoordinatesEqual(start, this._state.start) ||\n            !this._areCoordinatesEqual(end, this._state.end) ||\n            columnSelectMode !== this._state.columnSelectMode ||\n            ydisp !== this._state.ydisp;\n    };\n    SelectionRenderLayer.prototype._areCoordinatesEqual = function (coord1, coord2) {\n        if (!coord1 || !coord2) {\n            return false;\n        }\n        return coord1[0] === coord2[0] && coord1[1] === coord2[1];\n    };\n    return SelectionRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.SelectionRenderLayer = SelectionRenderLayer;\n//# sourceMappingURL=SelectionRenderLayer.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar BufferLine_1 = require(\"../core/buffer/BufferLine\");\nvar BLINK_INTERVAL = 600;\nvar CursorRenderLayer = (function (_super) {\n    __extends(CursorRenderLayer, _super);\n    function CursorRenderLayer(container, zIndex, colors) {\n        var _this = _super.call(this, container, 'cursor', zIndex, true, colors) || this;\n        _this._cell = new BufferLine_1.CellData();\n        _this._state = {\n            x: null,\n            y: null,\n            isFocused: null,\n            style: null,\n            width: null\n        };\n        _this._cursorRenderers = {\n            'bar': _this._renderBarCursor.bind(_this),\n            'block': _this._renderBlockCursor.bind(_this),\n            'underline': _this._renderUnderlineCursor.bind(_this)\n        };\n        return _this;\n    }\n    CursorRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._state = {\n            x: null,\n            y: null,\n            isFocused: null,\n            style: null,\n            width: null\n        };\n    };\n    CursorRenderLayer.prototype.reset = function (terminal) {\n        this._clearCursor();\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.dispose();\n            this._cursorBlinkStateManager = null;\n            this.onOptionsChanged(terminal);\n        }\n    };\n    CursorRenderLayer.prototype.onBlur = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.pause();\n        }\n        terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n    };\n    CursorRenderLayer.prototype.onFocus = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.resume(terminal);\n        }\n        else {\n            terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n        }\n    };\n    CursorRenderLayer.prototype.onOptionsChanged = function (terminal) {\n        var _this = this;\n        if (terminal.options.cursorBlink) {\n            if (!this._cursorBlinkStateManager) {\n                this._cursorBlinkStateManager = new CursorBlinkStateManager(terminal, function () {\n                    _this._render(terminal, true);\n                });\n            }\n        }\n        else {\n            if (this._cursorBlinkStateManager) {\n                this._cursorBlinkStateManager.dispose();\n                this._cursorBlinkStateManager = null;\n            }\n            terminal.refresh(terminal.buffer.y, terminal.buffer.y);\n        }\n    };\n    CursorRenderLayer.prototype.onCursorMove = function (terminal) {\n        if (this._cursorBlinkStateManager) {\n            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);\n        }\n    };\n    CursorRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) {\n        if (!this._cursorBlinkStateManager || this._cursorBlinkStateManager.isPaused) {\n            this._render(terminal, false);\n        }\n        else {\n            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);\n        }\n    };\n    CursorRenderLayer.prototype._render = function (terminal, triggeredByAnimationFrame) {\n        if (!terminal.cursorState || terminal.cursorHidden) {\n            this._clearCursor();\n            return;\n        }\n        var cursorY = terminal.buffer.ybase + terminal.buffer.y;\n        var viewportRelativeCursorY = cursorY - terminal.buffer.ydisp;\n        if (viewportRelativeCursorY < 0 || viewportRelativeCursorY >= terminal.rows) {\n            this._clearCursor();\n            return;\n        }\n        terminal.buffer.lines.get(cursorY).loadCell(terminal.buffer.x, this._cell);\n        if (this._cell.content === undefined) {\n            return;\n        }\n        if (!terminal.isFocused) {\n            this._clearCursor();\n            this._ctx.save();\n            this._ctx.fillStyle = this._colors.cursor.css;\n            this._renderBlurCursor(terminal, terminal.buffer.x, viewportRelativeCursorY, this._cell);\n            this._ctx.restore();\n            this._state.x = terminal.buffer.x;\n            this._state.y = viewportRelativeCursorY;\n            this._state.isFocused = false;\n            this._state.style = terminal.options.cursorStyle;\n            this._state.width = this._cell.getWidth();\n            return;\n        }\n        if (this._cursorBlinkStateManager && !this._cursorBlinkStateManager.isCursorVisible) {\n            this._clearCursor();\n            return;\n        }\n        if (this._state) {\n            if (this._state.x === terminal.buffer.x &&\n                this._state.y === viewportRelativeCursorY &&\n                this._state.isFocused === terminal.isFocused &&\n                this._state.style === terminal.options.cursorStyle &&\n                this._state.width === this._cell.getWidth()) {\n                return;\n            }\n            this._clearCursor();\n        }\n        this._ctx.save();\n        this._cursorRenderers[terminal.options.cursorStyle || 'block'](terminal, terminal.buffer.x, viewportRelativeCursorY, this._cell);\n        this._ctx.restore();\n        this._state.x = terminal.buffer.x;\n        this._state.y = viewportRelativeCursorY;\n        this._state.isFocused = false;\n        this._state.style = terminal.options.cursorStyle;\n        this._state.width = this._cell.getWidth();\n    };\n    CursorRenderLayer.prototype._clearCursor = function () {\n        if (this._state) {\n            this.clearCells(this._state.x, this._state.y, this._state.width, 1);\n            this._state = {\n                x: null,\n                y: null,\n                isFocused: null,\n                style: null,\n                width: null\n            };\n        }\n    };\n    CursorRenderLayer.prototype._renderBarCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillLeftLineAtCell(x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderBlockCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillCells(x, y, cell.getWidth(), 1);\n        this._ctx.fillStyle = this._colors.cursorAccent.css;\n        this.fillCharTrueColor(terminal, cell, x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderUnderlineCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.fillStyle = this._colors.cursor.css;\n        this.fillBottomLineAtCells(x, y);\n        this._ctx.restore();\n    };\n    CursorRenderLayer.prototype._renderBlurCursor = function (terminal, x, y, cell) {\n        this._ctx.save();\n        this._ctx.strokeStyle = this._colors.cursor.css;\n        this.strokeRectAtCell(x, y, cell.getWidth(), 1);\n        this._ctx.restore();\n    };\n    return CursorRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.CursorRenderLayer = CursorRenderLayer;\nvar CursorBlinkStateManager = (function () {\n    function CursorBlinkStateManager(terminal, _renderCallback) {\n        this._renderCallback = _renderCallback;\n        this.isCursorVisible = true;\n        if (terminal.isFocused) {\n            this._restartInterval();\n        }\n    }\n    Object.defineProperty(CursorBlinkStateManager.prototype, \"isPaused\", {\n        get: function () { return !(this._blinkStartTimeout || this._blinkInterval); },\n        enumerable: true,\n        configurable: true\n    });\n    CursorBlinkStateManager.prototype.dispose = function () {\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n            this._blinkInterval = null;\n        }\n        if (this._blinkStartTimeout) {\n            window.clearTimeout(this._blinkStartTimeout);\n            this._blinkStartTimeout = null;\n        }\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = null;\n        }\n    };\n    CursorBlinkStateManager.prototype.restartBlinkAnimation = function (terminal) {\n        var _this = this;\n        if (this.isPaused) {\n            return;\n        }\n        this._animationTimeRestarted = Date.now();\n        this.isCursorVisible = true;\n        if (!this._animationFrame) {\n            this._animationFrame = window.requestAnimationFrame(function () {\n                _this._renderCallback();\n                _this._animationFrame = null;\n            });\n        }\n    };\n    CursorBlinkStateManager.prototype._restartInterval = function (timeToStart) {\n        var _this = this;\n        if (timeToStart === void 0) { timeToStart = BLINK_INTERVAL; }\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n        }\n        this._blinkStartTimeout = setTimeout(function () {\n            if (_this._animationTimeRestarted) {\n                var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);\n                _this._animationTimeRestarted = null;\n                if (time > 0) {\n                    _this._restartInterval(time);\n                    return;\n                }\n            }\n            _this.isCursorVisible = false;\n            _this._animationFrame = window.requestAnimationFrame(function () {\n                _this._renderCallback();\n                _this._animationFrame = null;\n            });\n            _this._blinkInterval = setInterval(function () {\n                if (_this._animationTimeRestarted) {\n                    var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);\n                    _this._animationTimeRestarted = null;\n                    _this._restartInterval(time);\n                    return;\n                }\n                _this.isCursorVisible = !_this.isCursorVisible;\n                _this._animationFrame = window.requestAnimationFrame(function () {\n                    _this._renderCallback();\n                    _this._animationFrame = null;\n                });\n            }, BLINK_INTERVAL);\n        }, timeToStart);\n    };\n    CursorBlinkStateManager.prototype.pause = function () {\n        this.isCursorVisible = true;\n        if (this._blinkInterval) {\n            window.clearInterval(this._blinkInterval);\n            this._blinkInterval = null;\n        }\n        if (this._blinkStartTimeout) {\n            window.clearTimeout(this._blinkStartTimeout);\n            this._blinkStartTimeout = null;\n        }\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n            this._animationFrame = null;\n        }\n    };\n    CursorBlinkStateManager.prototype.resume = function (terminal) {\n        this._animationTimeRestarted = null;\n        this._restartInterval();\n        this.restartBlinkAnimation(terminal);\n    };\n    return CursorBlinkStateManager;\n}());\n//# sourceMappingURL=CursorRenderLayer.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BaseRenderLayer_1 = require(\"./BaseRenderLayer\");\nvar Types_1 = require(\"./atlas/Types\");\nvar CharAtlasUtils_1 = require(\"./atlas/CharAtlasUtils\");\nvar LinkRenderLayer = (function (_super) {\n    __extends(LinkRenderLayer, _super);\n    function LinkRenderLayer(container, zIndex, colors, terminal) {\n        var _this = _super.call(this, container, 'link', zIndex, true, colors) || this;\n        _this._state = null;\n        terminal.linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });\n        terminal.linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });\n        return _this;\n    }\n    LinkRenderLayer.prototype.resize = function (terminal, dim) {\n        _super.prototype.resize.call(this, terminal, dim);\n        this._state = null;\n    };\n    LinkRenderLayer.prototype.reset = function (terminal) {\n        this._clearCurrentLink();\n    };\n    LinkRenderLayer.prototype._clearCurrentLink = function () {\n        if (this._state) {\n            this.clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);\n            var middleRowCount = this._state.y2 - this._state.y1 - 1;\n            if (middleRowCount > 0) {\n                this.clearCells(0, this._state.y1 + 1, this._state.cols, middleRowCount);\n            }\n            this.clearCells(0, this._state.y2, this._state.x2, 1);\n            this._state = null;\n        }\n    };\n    LinkRenderLayer.prototype._onLinkHover = function (e) {\n        if (e.fg === Types_1.INVERTED_DEFAULT_COLOR) {\n            this._ctx.fillStyle = this._colors.background.css;\n        }\n        else if (CharAtlasUtils_1.is256Color(e.fg)) {\n            this._ctx.fillStyle = this._colors.ansi[e.fg].css;\n        }\n        else {\n            this._ctx.fillStyle = this._colors.foreground.css;\n        }\n        if (e.y1 === e.y2) {\n            this.fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);\n        }\n        else {\n            this.fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);\n            for (var y = e.y1 + 1; y < e.y2; y++) {\n                this.fillBottomLineAtCells(0, y, e.cols);\n            }\n            this.fillBottomLineAtCells(0, e.y2, e.x2);\n        }\n        this._state = e;\n    };\n    LinkRenderLayer.prototype._onLinkLeave = function (e) {\n        this._clearCurrentLink();\n    };\n    return LinkRenderLayer;\n}(BaseRenderLayer_1.BaseRenderLayer));\nexports.LinkRenderLayer = LinkRenderLayer;\n//# sourceMappingURL=LinkRenderLayer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseZoneManager_1 = require(\"./MouseZoneManager\");\nvar CharWidth_1 = require(\"./CharWidth\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar Linkifier = (function () {\n    function Linkifier(_terminal) {\n        this._terminal = _terminal;\n        this._linkMatchers = [];\n        this._nextLinkMatcherId = 0;\n        this._onLinkHover = new EventEmitter2_1.EventEmitter2();\n        this._onLinkLeave = new EventEmitter2_1.EventEmitter2();\n        this._onLinkTooltip = new EventEmitter2_1.EventEmitter2();\n        this._rowsToLinkify = {\n            start: null,\n            end: null\n        };\n    }\n    Object.defineProperty(Linkifier.prototype, \"onLinkHover\", {\n        get: function () { return this._onLinkHover.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Linkifier.prototype, \"onLinkLeave\", {\n        get: function () { return this._onLinkLeave.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Linkifier.prototype, \"onLinkTooltip\", {\n        get: function () { return this._onLinkTooltip.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Linkifier.prototype.attachToDom = function (mouseZoneManager) {\n        this._mouseZoneManager = mouseZoneManager;\n    };\n    Linkifier.prototype.linkifyRows = function (start, end) {\n        var _this = this;\n        if (!this._mouseZoneManager) {\n            return;\n        }\n        if (this._rowsToLinkify.start === null) {\n            this._rowsToLinkify.start = start;\n            this._rowsToLinkify.end = end;\n        }\n        else {\n            this._rowsToLinkify.start = Math.min(this._rowsToLinkify.start, start);\n            this._rowsToLinkify.end = Math.max(this._rowsToLinkify.end, end);\n        }\n        this._mouseZoneManager.clearAll(start, end);\n        if (this._rowsTimeoutId) {\n            clearTimeout(this._rowsTimeoutId);\n        }\n        this._rowsTimeoutId = setTimeout(function () { return _this._linkifyRows(); }, Linkifier.TIME_BEFORE_LINKIFY);\n    };\n    Linkifier.prototype._linkifyRows = function () {\n        this._rowsTimeoutId = null;\n        var buffer = this._terminal.buffer;\n        var absoluteRowIndexStart = buffer.ydisp + this._rowsToLinkify.start;\n        if (absoluteRowIndexStart >= buffer.lines.length) {\n            return;\n        }\n        var absoluteRowIndexEnd = buffer.ydisp + Math.min(this._rowsToLinkify.end, this._terminal.rows) + 1;\n        var overscanLineLimit = Math.ceil(Linkifier.OVERSCAN_CHAR_LIMIT / this._terminal.cols);\n        var iterator = this._terminal.buffer.iterator(false, absoluteRowIndexStart, absoluteRowIndexEnd, overscanLineLimit, overscanLineLimit);\n        while (iterator.hasNext()) {\n            var lineData = iterator.next();\n            for (var i = 0; i < this._linkMatchers.length; i++) {\n                this._doLinkifyRow(lineData.range.first, lineData.content, this._linkMatchers[i]);\n            }\n        }\n        this._rowsToLinkify.start = null;\n        this._rowsToLinkify.end = null;\n    };\n    Linkifier.prototype.registerLinkMatcher = function (regex, handler, options) {\n        if (options === void 0) { options = {}; }\n        if (!handler) {\n            throw new Error('handler must be defined');\n        }\n        var matcher = {\n            id: this._nextLinkMatcherId++,\n            regex: regex,\n            handler: handler,\n            matchIndex: options.matchIndex,\n            validationCallback: options.validationCallback,\n            hoverTooltipCallback: options.tooltipCallback,\n            hoverLeaveCallback: options.leaveCallback,\n            willLinkActivate: options.willLinkActivate,\n            priority: options.priority || 0\n        };\n        this._addLinkMatcherToList(matcher);\n        return matcher.id;\n    };\n    Linkifier.prototype._addLinkMatcherToList = function (matcher) {\n        if (this._linkMatchers.length === 0) {\n            this._linkMatchers.push(matcher);\n            return;\n        }\n        for (var i = this._linkMatchers.length - 1; i >= 0; i--) {\n            if (matcher.priority <= this._linkMatchers[i].priority) {\n                this._linkMatchers.splice(i + 1, 0, matcher);\n                return;\n            }\n        }\n        this._linkMatchers.splice(0, 0, matcher);\n    };\n    Linkifier.prototype.deregisterLinkMatcher = function (matcherId) {\n        for (var i = 0; i < this._linkMatchers.length; i++) {\n            if (this._linkMatchers[i].id === matcherId) {\n                this._linkMatchers.splice(i, 1);\n                return true;\n            }\n        }\n        return false;\n    };\n    Linkifier.prototype._doLinkifyRow = function (rowIndex, text, matcher) {\n        var _this = this;\n        var rex = new RegExp(matcher.regex.source, matcher.regex.flags + 'g');\n        var match;\n        var stringIndex = -1;\n        var _loop_1 = function () {\n            var uri = match[typeof matcher.matchIndex !== 'number' ? 0 : matcher.matchIndex];\n            if (!uri) {\n                if (this_1._terminal.debug) {\n                    console.log({ match: match, matcher: matcher });\n                    throw new Error('match found without corresponding matchIndex');\n                }\n                return \"break\";\n            }\n            stringIndex = text.indexOf(uri, stringIndex + 1);\n            rex.lastIndex = stringIndex + uri.length;\n            if (stringIndex < 0) {\n                return \"break\";\n            }\n            var bufferIndex = this_1._terminal.buffer.stringIndexToBufferIndex(rowIndex, stringIndex);\n            if (bufferIndex[0] < 0) {\n                return \"break\";\n            }\n            var line = this_1._terminal.buffer.lines.get(bufferIndex[0]);\n            var attr = line.getFg(bufferIndex[1]);\n            var fg;\n            if (attr) {\n                fg = (attr >> 9) & 0x1ff;\n            }\n            if (matcher.validationCallback) {\n                matcher.validationCallback(uri, function (isValid) {\n                    if (_this._rowsTimeoutId) {\n                        return;\n                    }\n                    if (isValid) {\n                        _this._addLink(bufferIndex[1], bufferIndex[0] - _this._terminal.buffer.ydisp, uri, matcher, fg);\n                    }\n                });\n            }\n            else {\n                this_1._addLink(bufferIndex[1], bufferIndex[0] - this_1._terminal.buffer.ydisp, uri, matcher, fg);\n            }\n        };\n        var this_1 = this;\n        while ((match = rex.exec(text)) !== null) {\n            var state_1 = _loop_1();\n            if (state_1 === \"break\")\n                break;\n        }\n    };\n    Linkifier.prototype._addLink = function (x, y, uri, matcher, fg) {\n        var _this = this;\n        var width = CharWidth_1.getStringCellWidth(uri);\n        var x1 = x % this._terminal.cols;\n        var y1 = y + Math.floor(x / this._terminal.cols);\n        var x2 = (x1 + width) % this._terminal.cols;\n        var y2 = y1 + Math.floor((x1 + width) / this._terminal.cols);\n        if (x2 === 0) {\n            x2 = this._terminal.cols;\n            y2--;\n        }\n        this._mouseZoneManager.add(new MouseZoneManager_1.MouseZone(x1 + 1, y1 + 1, x2 + 1, y2 + 1, function (e) {\n            if (matcher.handler) {\n                return matcher.handler(e, uri);\n            }\n            window.open(uri, '_blank');\n        }, function () {\n            _this._onLinkHover.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            _this._terminal.element.classList.add('xterm-cursor-pointer');\n        }, function (e) {\n            _this._onLinkTooltip.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            if (matcher.hoverTooltipCallback) {\n                matcher.hoverTooltipCallback(e, uri);\n            }\n        }, function () {\n            _this._onLinkLeave.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));\n            _this._terminal.element.classList.remove('xterm-cursor-pointer');\n            if (matcher.hoverLeaveCallback) {\n                matcher.hoverLeaveCallback();\n            }\n        }, function (e) {\n            if (matcher.willLinkActivate) {\n                return matcher.willLinkActivate(e, uri);\n            }\n            return true;\n        }));\n    };\n    Linkifier.prototype._createLinkHoverEvent = function (x1, y1, x2, y2, fg) {\n        return { x1: x1, y1: y1, x2: x2, y2: y2, cols: this._terminal.cols, fg: fg };\n    };\n    Linkifier.TIME_BEFORE_LINKIFY = 200;\n    Linkifier.OVERSCAN_CHAR_LIMIT = 2000;\n    return Linkifier;\n}());\nexports.Linkifier = Linkifier;\n//# sourceMappingURL=Linkifier.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseHelper_1 = require(\"./MouseHelper\");\nvar Browser = require(\"./common/Platform\");\nvar SelectionModel_1 = require(\"./SelectionModel\");\nvar AltClickHandler_1 = require(\"./handlers/AltClickHandler\");\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar DRAG_SCROLL_MAX_THRESHOLD = 50;\nvar DRAG_SCROLL_MAX_SPEED = 15;\nvar DRAG_SCROLL_INTERVAL = 50;\nvar ALT_CLICK_MOVE_CURSOR_TIME = 500;\nvar WORD_SEPARATORS = ' ()[]{}\\'\"';\nvar NON_BREAKING_SPACE_CHAR = String.fromCharCode(160);\nvar ALL_NON_BREAKING_SPACE_REGEX = new RegExp(NON_BREAKING_SPACE_CHAR, 'g');\nvar SelectionManager = (function () {\n    function SelectionManager(_terminal, _charMeasure) {\n        this._terminal = _terminal;\n        this._charMeasure = _charMeasure;\n        this._enabled = true;\n        this._workCell = new BufferLine_1.CellData();\n        this._onLinuxMouseSelection = new EventEmitter2_1.EventEmitter2();\n        this._onRedrawRequest = new EventEmitter2_1.EventEmitter2();\n        this._onSelectionChange = new EventEmitter2_1.EventEmitter2();\n        this._initListeners();\n        this.enable();\n        this._model = new SelectionModel_1.SelectionModel(_terminal);\n        this._activeSelectionMode = 0;\n    }\n    Object.defineProperty(SelectionManager.prototype, \"onLinuxMouseSelection\", {\n        get: function () { return this._onLinuxMouseSelection.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"onRedrawRequest\", {\n        get: function () { return this._onRedrawRequest.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"onSelectionChange\", {\n        get: function () { return this._onSelectionChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype.dispose = function () {\n        this._removeMouseDownListeners();\n    };\n    Object.defineProperty(SelectionManager.prototype, \"_buffer\", {\n        get: function () {\n            return this._terminal.buffers.active;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype._initListeners = function () {\n        var _this = this;\n        this._mouseMoveListener = function (event) { return _this._onMouseMove(event); };\n        this._mouseUpListener = function (event) { return _this._onMouseUp(event); };\n        this.initBuffersListeners();\n    };\n    SelectionManager.prototype.initBuffersListeners = function () {\n        var _this = this;\n        this._trimListener = this._terminal.buffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });\n        this._terminal.buffers.onBufferActivate(function (e) { return _this._onBufferActivate(e); });\n    };\n    SelectionManager.prototype.disable = function () {\n        this.clearSelection();\n        this._enabled = false;\n    };\n    SelectionManager.prototype.enable = function () {\n        this._enabled = true;\n    };\n    Object.defineProperty(SelectionManager.prototype, \"selectionStart\", {\n        get: function () { return this._model.finalSelectionStart; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"selectionEnd\", {\n        get: function () { return this._model.finalSelectionEnd; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"hasSelection\", {\n        get: function () {\n            var start = this._model.finalSelectionStart;\n            var end = this._model.finalSelectionEnd;\n            if (!start || !end) {\n                return false;\n            }\n            return start[0] !== end[0] || start[1] !== end[1];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionManager.prototype, \"selectionText\", {\n        get: function () {\n            var start = this._model.finalSelectionStart;\n            var end = this._model.finalSelectionEnd;\n            if (!start || !end) {\n                return '';\n            }\n            var result = [];\n            if (this._activeSelectionMode === 3) {\n                if (start[0] === end[0]) {\n                    return '';\n                }\n                for (var i = start[1]; i <= end[1]; i++) {\n                    var lineText = this._buffer.translateBufferLineToString(i, true, start[0], end[0]);\n                    result.push(lineText);\n                }\n            }\n            else {\n                var startRowEndCol = start[1] === end[1] ? end[0] : undefined;\n                result.push(this._buffer.translateBufferLineToString(start[1], true, start[0], startRowEndCol));\n                for (var i = start[1] + 1; i <= end[1] - 1; i++) {\n                    var bufferLine = this._buffer.lines.get(i);\n                    var lineText = this._buffer.translateBufferLineToString(i, true);\n                    if (bufferLine.isWrapped) {\n                        result[result.length - 1] += lineText;\n                    }\n                    else {\n                        result.push(lineText);\n                    }\n                }\n                if (start[1] !== end[1]) {\n                    var bufferLine = this._buffer.lines.get(end[1]);\n                    var lineText = this._buffer.translateBufferLineToString(end[1], true, 0, end[0]);\n                    if (bufferLine.isWrapped) {\n                        result[result.length - 1] += lineText;\n                    }\n                    else {\n                        result.push(lineText);\n                    }\n                }\n            }\n            var formattedResult = result.map(function (line) {\n                return line.replace(ALL_NON_BREAKING_SPACE_REGEX, ' ');\n            }).join(Browser.isMSWindows ? '\\r\\n' : '\\n');\n            return formattedResult;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionManager.prototype.clearSelection = function () {\n        this._model.clearSelection();\n        this._removeMouseDownListeners();\n        this.refresh();\n        this._onSelectionChange.fire();\n    };\n    SelectionManager.prototype.refresh = function (isLinuxMouseSelection) {\n        var _this = this;\n        if (!this._refreshAnimationFrame) {\n            this._refreshAnimationFrame = window.requestAnimationFrame(function () { return _this._refresh(); });\n        }\n        if (Browser.isLinux && isLinuxMouseSelection) {\n            var selectionText = this.selectionText;\n            if (selectionText.length) {\n                this._onLinuxMouseSelection.fire(this.selectionText);\n            }\n        }\n    };\n    SelectionManager.prototype._refresh = function () {\n        this._refreshAnimationFrame = null;\n        this._onRedrawRequest.fire({\n            start: this._model.finalSelectionStart,\n            end: this._model.finalSelectionEnd,\n            columnSelectMode: this._activeSelectionMode === 3\n        });\n    };\n    SelectionManager.prototype.isClickInSelection = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        var start = this._model.finalSelectionStart;\n        var end = this._model.finalSelectionEnd;\n        if (!start || !end) {\n            return false;\n        }\n        return this._areCoordsInSelection(coords, start, end);\n    };\n    SelectionManager.prototype._areCoordsInSelection = function (coords, start, end) {\n        return (coords[1] > start[1] && coords[1] < end[1]) ||\n            (start[1] === end[1] && coords[1] === start[1] && coords[0] >= start[0] && coords[0] < end[0]) ||\n            (start[1] < end[1] && coords[1] === end[1] && coords[0] < end[0]) ||\n            (start[1] < end[1] && coords[1] === start[1] && coords[0] >= start[0]);\n    };\n    SelectionManager.prototype.selectWordAtCursor = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._selectWordAt(coords, false);\n            this._model.selectionEnd = null;\n            this.refresh(true);\n        }\n    };\n    SelectionManager.prototype.selectAll = function () {\n        this._model.isSelectAllActive = true;\n        this.refresh();\n        this._onSelectionChange.fire();\n    };\n    SelectionManager.prototype.selectLines = function (start, end) {\n        this._model.clearSelection();\n        start = Math.max(start, 0);\n        end = Math.min(end, this._terminal.buffer.lines.length - 1);\n        this._model.selectionStart = [0, start];\n        this._model.selectionEnd = [this._terminal.cols, end];\n        this.refresh();\n        this._onSelectionChange.fire();\n    };\n    SelectionManager.prototype._onTrim = function (amount) {\n        var needsRefresh = this._model.onTrim(amount);\n        if (needsRefresh) {\n            this.refresh();\n        }\n    };\n    SelectionManager.prototype._getMouseBufferCoords = function (event) {\n        var coords = this._terminal.mouseHelper.getCoords(event, this._terminal.screenElement, this._charMeasure, this._terminal.cols, this._terminal.rows, true);\n        if (!coords) {\n            return null;\n        }\n        coords[0]--;\n        coords[1]--;\n        coords[1] += this._terminal.buffer.ydisp;\n        return coords;\n    };\n    SelectionManager.prototype._getMouseEventScrollAmount = function (event) {\n        var offset = MouseHelper_1.MouseHelper.getCoordsRelativeToElement(event, this._terminal.screenElement)[1];\n        var terminalHeight = this._terminal.rows * Math.ceil(this._charMeasure.height * this._terminal.options.lineHeight);\n        if (offset >= 0 && offset <= terminalHeight) {\n            return 0;\n        }\n        if (offset > terminalHeight) {\n            offset -= terminalHeight;\n        }\n        offset = Math.min(Math.max(offset, -DRAG_SCROLL_MAX_THRESHOLD), DRAG_SCROLL_MAX_THRESHOLD);\n        offset /= DRAG_SCROLL_MAX_THRESHOLD;\n        return (offset / Math.abs(offset)) + Math.round(offset * (DRAG_SCROLL_MAX_SPEED - 1));\n    };\n    SelectionManager.prototype.shouldForceSelection = function (event) {\n        if (Browser.isMac) {\n            return event.altKey && this._terminal.options.macOptionClickForcesSelection;\n        }\n        return event.shiftKey;\n    };\n    SelectionManager.prototype.onMouseDown = function (event) {\n        this._mouseDownTimeStamp = event.timeStamp;\n        if (event.button === 2 && this.hasSelection) {\n            return;\n        }\n        if (event.button !== 0) {\n            return;\n        }\n        if (!this._enabled) {\n            if (!this.shouldForceSelection(event)) {\n                return;\n            }\n            event.stopPropagation();\n        }\n        event.preventDefault();\n        this._dragScrollAmount = 0;\n        if (this._enabled && event.shiftKey) {\n            this._onIncrementalClick(event);\n        }\n        else {\n            if (event.detail === 1) {\n                this._onSingleClick(event);\n            }\n            else if (event.detail === 2) {\n                this._onDoubleClick(event);\n            }\n            else if (event.detail === 3) {\n                this._onTripleClick(event);\n            }\n        }\n        this._addMouseDownListeners();\n        this.refresh(true);\n    };\n    SelectionManager.prototype._addMouseDownListeners = function () {\n        var _this = this;\n        this._terminal.element.ownerDocument.addEventListener('mousemove', this._mouseMoveListener);\n        this._terminal.element.ownerDocument.addEventListener('mouseup', this._mouseUpListener);\n        this._dragScrollIntervalTimer = setInterval(function () { return _this._dragScroll(); }, DRAG_SCROLL_INTERVAL);\n    };\n    SelectionManager.prototype._removeMouseDownListeners = function () {\n        if (this._terminal.element.ownerDocument) {\n            this._terminal.element.ownerDocument.removeEventListener('mousemove', this._mouseMoveListener);\n            this._terminal.element.ownerDocument.removeEventListener('mouseup', this._mouseUpListener);\n        }\n        clearInterval(this._dragScrollIntervalTimer);\n        this._dragScrollIntervalTimer = null;\n    };\n    SelectionManager.prototype._onIncrementalClick = function (event) {\n        if (this._model.selectionStart) {\n            this._model.selectionEnd = this._getMouseBufferCoords(event);\n        }\n    };\n    SelectionManager.prototype._onSingleClick = function (event) {\n        this._model.selectionStartLength = 0;\n        this._model.isSelectAllActive = false;\n        this._activeSelectionMode = this.shouldColumnSelect(event) ? 3 : 0;\n        this._model.selectionStart = this._getMouseBufferCoords(event);\n        if (!this._model.selectionStart) {\n            return;\n        }\n        this._model.selectionEnd = null;\n        var line = this._buffer.lines.get(this._model.selectionStart[1]);\n        if (!line) {\n            return;\n        }\n        if (line.length >= this._model.selectionStart[0]) {\n            return;\n        }\n        if (line.hasWidth(this._model.selectionStart[0]) === 0) {\n            this._model.selectionStart[0]++;\n        }\n    };\n    SelectionManager.prototype._onDoubleClick = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._activeSelectionMode = 1;\n            this._selectWordAt(coords, true);\n        }\n    };\n    SelectionManager.prototype._onTripleClick = function (event) {\n        var coords = this._getMouseBufferCoords(event);\n        if (coords) {\n            this._activeSelectionMode = 2;\n            this._selectLineAt(coords[1]);\n        }\n    };\n    SelectionManager.prototype.shouldColumnSelect = function (event) {\n        return event.altKey && !(Browser.isMac && this._terminal.options.macOptionClickForcesSelection);\n    };\n    SelectionManager.prototype._onMouseMove = function (event) {\n        event.stopImmediatePropagation();\n        var previousSelectionEnd = this._model.selectionEnd ? [this._model.selectionEnd[0], this._model.selectionEnd[1]] : null;\n        this._model.selectionEnd = this._getMouseBufferCoords(event);\n        if (!this._model.selectionEnd) {\n            this.refresh(true);\n            return;\n        }\n        if (this._activeSelectionMode === 2) {\n            if (this._model.selectionEnd[1] < this._model.selectionStart[1]) {\n                this._model.selectionEnd[0] = 0;\n            }\n            else {\n                this._model.selectionEnd[0] = this._terminal.cols;\n            }\n        }\n        else if (this._activeSelectionMode === 1) {\n            this._selectToWordAt(this._model.selectionEnd);\n        }\n        this._dragScrollAmount = this._getMouseEventScrollAmount(event);\n        if (this._activeSelectionMode !== 3) {\n            if (this._dragScrollAmount > 0) {\n                this._model.selectionEnd[0] = this._terminal.cols;\n            }\n            else if (this._dragScrollAmount < 0) {\n                this._model.selectionEnd[0] = 0;\n            }\n        }\n        if (this._model.selectionEnd[1] < this._buffer.lines.length) {\n            if (this._buffer.lines.get(this._model.selectionEnd[1]).hasWidth(this._model.selectionEnd[0]) === 0) {\n                this._model.selectionEnd[0]++;\n            }\n        }\n        if (!previousSelectionEnd ||\n            previousSelectionEnd[0] !== this._model.selectionEnd[0] ||\n            previousSelectionEnd[1] !== this._model.selectionEnd[1]) {\n            this.refresh(true);\n        }\n    };\n    SelectionManager.prototype._dragScroll = function () {\n        if (this._dragScrollAmount) {\n            this._terminal.scrollLines(this._dragScrollAmount, false);\n            if (this._dragScrollAmount > 0) {\n                if (this._activeSelectionMode !== 3) {\n                    this._model.selectionEnd[0] = this._terminal.cols;\n                }\n                this._model.selectionEnd[1] = Math.min(this._terminal.buffer.ydisp + this._terminal.rows, this._terminal.buffer.lines.length - 1);\n            }\n            else {\n                if (this._activeSelectionMode !== 3) {\n                    this._model.selectionEnd[0] = 0;\n                }\n                this._model.selectionEnd[1] = this._terminal.buffer.ydisp;\n            }\n            this.refresh();\n        }\n    };\n    SelectionManager.prototype._onMouseUp = function (event) {\n        var timeElapsed = event.timeStamp - this._mouseDownTimeStamp;\n        this._removeMouseDownListeners();\n        if (this.selectionText.length <= 1 && timeElapsed < ALT_CLICK_MOVE_CURSOR_TIME) {\n            (new AltClickHandler_1.AltClickHandler(event, this._terminal)).move();\n        }\n        else if (this.hasSelection) {\n            this._onSelectionChange.fire();\n        }\n    };\n    SelectionManager.prototype._onBufferActivate = function (e) {\n        var _this = this;\n        this.clearSelection();\n        if (this._trimListener) {\n            this._trimListener.dispose();\n        }\n        this._trimListener = e.activeBuffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });\n    };\n    SelectionManager.prototype._convertViewportColToCharacterIndex = function (bufferLine, coords) {\n        var charIndex = coords[0];\n        for (var i = 0; coords[0] >= i; i++) {\n            var length_1 = bufferLine.loadCell(i, this._workCell).getChars().length;\n            if (this._workCell.getWidth() === 0) {\n                charIndex--;\n            }\n            else if (length_1 > 1 && coords[0] !== i) {\n                charIndex += length_1 - 1;\n            }\n        }\n        return charIndex;\n    };\n    SelectionManager.prototype.setSelection = function (col, row, length) {\n        this._model.clearSelection();\n        this._removeMouseDownListeners();\n        this._model.selectionStart = [col, row];\n        this._model.selectionStartLength = length;\n        this.refresh();\n    };\n    SelectionManager.prototype._getWordAt = function (coords, allowWhitespaceOnlySelection, followWrappedLinesAbove, followWrappedLinesBelow) {\n        if (followWrappedLinesAbove === void 0) { followWrappedLinesAbove = true; }\n        if (followWrappedLinesBelow === void 0) { followWrappedLinesBelow = true; }\n        if (coords[0] >= this._terminal.cols) {\n            return null;\n        }\n        var bufferLine = this._buffer.lines.get(coords[1]);\n        if (!bufferLine) {\n            return null;\n        }\n        var line = this._buffer.translateBufferLineToString(coords[1], false);\n        var startIndex = this._convertViewportColToCharacterIndex(bufferLine, coords);\n        var endIndex = startIndex;\n        var charOffset = coords[0] - startIndex;\n        var leftWideCharCount = 0;\n        var rightWideCharCount = 0;\n        var leftLongCharOffset = 0;\n        var rightLongCharOffset = 0;\n        if (line.charAt(startIndex) === ' ') {\n            while (startIndex > 0 && line.charAt(startIndex - 1) === ' ') {\n                startIndex--;\n            }\n            while (endIndex < line.length && line.charAt(endIndex + 1) === ' ') {\n                endIndex++;\n            }\n        }\n        else {\n            var startCol = coords[0];\n            var endCol = coords[0];\n            if (bufferLine.getWidth(startCol) === 0) {\n                leftWideCharCount++;\n                startCol--;\n            }\n            if (bufferLine.getWidth(endCol) === 2) {\n                rightWideCharCount++;\n                endCol++;\n            }\n            var length_2 = bufferLine.getString(endCol).length;\n            if (length_2 > 1) {\n                rightLongCharOffset += length_2 - 1;\n                endIndex += length_2 - 1;\n            }\n            while (startCol > 0 && startIndex > 0 && !this._isCharWordSeparator(bufferLine.loadCell(startCol - 1, this._workCell))) {\n                bufferLine.loadCell(startCol - 1, this._workCell);\n                var length_3 = this._workCell.getChars().length;\n                if (this._workCell.getWidth() === 0) {\n                    leftWideCharCount++;\n                    startCol--;\n                }\n                else if (length_3 > 1) {\n                    leftLongCharOffset += length_3 - 1;\n                    startIndex -= length_3 - 1;\n                }\n                startIndex--;\n                startCol--;\n            }\n            while (endCol < bufferLine.length && endIndex + 1 < line.length && !this._isCharWordSeparator(bufferLine.loadCell(endCol + 1, this._workCell))) {\n                bufferLine.loadCell(endCol + 1, this._workCell);\n                var length_4 = this._workCell.getChars().length;\n                if (this._workCell.getWidth() === 2) {\n                    rightWideCharCount++;\n                    endCol++;\n                }\n                else if (length_4 > 1) {\n                    rightLongCharOffset += length_4 - 1;\n                    endIndex += length_4 - 1;\n                }\n                endIndex++;\n                endCol++;\n            }\n        }\n        endIndex++;\n        var start = startIndex\n            + charOffset\n            - leftWideCharCount\n            + leftLongCharOffset;\n        var length = Math.min(this._terminal.cols, endIndex\n            - startIndex\n            + leftWideCharCount\n            + rightWideCharCount\n            - leftLongCharOffset\n            - rightLongCharOffset);\n        if (!allowWhitespaceOnlySelection && line.slice(startIndex, endIndex).trim() === '') {\n            return null;\n        }\n        if (followWrappedLinesAbove) {\n            if (start === 0 && bufferLine.getCodePoint(0) !== 32) {\n                var previousBufferLine = this._buffer.lines.get(coords[1] - 1);\n                if (previousBufferLine && bufferLine.isWrapped && previousBufferLine.getCodePoint(this._terminal.cols - 1) !== 32) {\n                    var previousLineWordPosition = this._getWordAt([this._terminal.cols - 1, coords[1] - 1], false, true, false);\n                    if (previousLineWordPosition) {\n                        var offset = this._terminal.cols - previousLineWordPosition.start;\n                        start -= offset;\n                        length += offset;\n                    }\n                }\n            }\n        }\n        if (followWrappedLinesBelow) {\n            if (start + length === this._terminal.cols && bufferLine.getCodePoint(this._terminal.cols - 1) !== 32) {\n                var nextBufferLine = this._buffer.lines.get(coords[1] + 1);\n                if (nextBufferLine && nextBufferLine.isWrapped && nextBufferLine.getCodePoint(0) !== 32) {\n                    var nextLineWordPosition = this._getWordAt([0, coords[1] + 1], false, false, true);\n                    if (nextLineWordPosition) {\n                        length += nextLineWordPosition.length;\n                    }\n                }\n            }\n        }\n        return { start: start, length: length };\n    };\n    SelectionManager.prototype._selectWordAt = function (coords, allowWhitespaceOnlySelection) {\n        var wordPosition = this._getWordAt(coords, allowWhitespaceOnlySelection);\n        if (wordPosition) {\n            while (wordPosition.start < 0) {\n                wordPosition.start += this._terminal.cols;\n                coords[1]--;\n            }\n            this._model.selectionStart = [wordPosition.start, coords[1]];\n            this._model.selectionStartLength = wordPosition.length;\n        }\n    };\n    SelectionManager.prototype._selectToWordAt = function (coords) {\n        var wordPosition = this._getWordAt(coords, true);\n        if (wordPosition) {\n            var endRow = coords[1];\n            while (wordPosition.start < 0) {\n                wordPosition.start += this._terminal.cols;\n                endRow--;\n            }\n            if (!this._model.areSelectionValuesReversed()) {\n                while (wordPosition.start + wordPosition.length > this._terminal.cols) {\n                    wordPosition.length -= this._terminal.cols;\n                    endRow++;\n                }\n            }\n            this._model.selectionEnd = [this._model.areSelectionValuesReversed() ? wordPosition.start : wordPosition.start + wordPosition.length, endRow];\n        }\n    };\n    SelectionManager.prototype._isCharWordSeparator = function (cell) {\n        if (cell.getWidth() === 0) {\n            return false;\n        }\n        return WORD_SEPARATORS.indexOf(cell.getChars()) >= 0;\n    };\n    SelectionManager.prototype._selectLineAt = function (line) {\n        var wrappedRange = this._buffer.getWrappedRangeForLine(line);\n        this._model.selectionStart = [0, wrappedRange.first];\n        this._model.selectionEnd = [this._terminal.cols, wrappedRange.last];\n        this._model.selectionStartLength = 0;\n    };\n    return SelectionManager;\n}());\nexports.SelectionManager = SelectionManager;\n//# sourceMappingURL=SelectionManager.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar SelectionModel = (function () {\n    function SelectionModel(_terminal) {\n        this._terminal = _terminal;\n        this.clearSelection();\n    }\n    SelectionModel.prototype.clearSelection = function () {\n        this.selectionStart = null;\n        this.selectionEnd = null;\n        this.isSelectAllActive = false;\n        this.selectionStartLength = 0;\n    };\n    Object.defineProperty(SelectionModel.prototype, \"finalSelectionStart\", {\n        get: function () {\n            if (this.isSelectAllActive) {\n                return [0, 0];\n            }\n            if (!this.selectionEnd || !this.selectionStart) {\n                return this.selectionStart;\n            }\n            return this.areSelectionValuesReversed() ? this.selectionEnd : this.selectionStart;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SelectionModel.prototype, \"finalSelectionEnd\", {\n        get: function () {\n            if (this.isSelectAllActive) {\n                return [this._terminal.cols, this._terminal.buffer.ybase + this._terminal.rows - 1];\n            }\n            if (!this.selectionStart) {\n                return null;\n            }\n            if (!this.selectionEnd || this.areSelectionValuesReversed()) {\n                var startPlusLength = this.selectionStart[0] + this.selectionStartLength;\n                if (startPlusLength > this._terminal.cols) {\n                    return [startPlusLength % this._terminal.cols, this.selectionStart[1] + Math.floor(startPlusLength / this._terminal.cols)];\n                }\n                return [startPlusLength, this.selectionStart[1]];\n            }\n            if (this.selectionStartLength) {\n                if (this.selectionEnd[1] === this.selectionStart[1]) {\n                    return [Math.max(this.selectionStart[0] + this.selectionStartLength, this.selectionEnd[0]), this.selectionEnd[1]];\n                }\n            }\n            return this.selectionEnd;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SelectionModel.prototype.areSelectionValuesReversed = function () {\n        var start = this.selectionStart;\n        var end = this.selectionEnd;\n        if (!start || !end) {\n            return false;\n        }\n        return start[1] > end[1] || (start[1] === end[1] && start[0] > end[0]);\n    };\n    SelectionModel.prototype.onTrim = function (amount) {\n        if (this.selectionStart) {\n            this.selectionStart[1] -= amount;\n        }\n        if (this.selectionEnd) {\n            this.selectionEnd[1] -= amount;\n        }\n        if (this.selectionEnd && this.selectionEnd[1] < 0) {\n            this.clearSelection();\n            return true;\n        }\n        if (this.selectionStart && this.selectionStart[1] < 0) {\n            this.selectionStart[1] = 0;\n        }\n        return false;\n    };\n    return SelectionModel;\n}());\nexports.SelectionModel = SelectionModel;\n//# sourceMappingURL=SelectionModel.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = require(\"../common/data/EscapeSequences\");\nvar AltClickHandler = (function () {\n    function AltClickHandler(_mouseEvent, _terminal) {\n        var _a;\n        this._mouseEvent = _mouseEvent;\n        this._terminal = _terminal;\n        this._lines = this._terminal.buffer.lines;\n        this._startCol = this._terminal.buffer.x;\n        this._startRow = this._terminal.buffer.y;\n        var coordinates = this._terminal.mouseHelper.getCoords(this._mouseEvent, this._terminal.element, this._terminal.charMeasure, this._terminal.cols, this._terminal.rows, false);\n        if (coordinates) {\n            _a = coordinates.map(function (coordinate) {\n                return coordinate - 1;\n            }), this._endCol = _a[0], this._endRow = _a[1];\n        }\n    }\n    AltClickHandler.prototype.move = function () {\n        if (this._mouseEvent.altKey && this._endCol !== undefined && this._endRow !== undefined) {\n            this._terminal.handler(this._arrowSequences());\n        }\n    };\n    AltClickHandler.prototype._arrowSequences = function () {\n        if (!this._terminal.buffer.hasScrollback) {\n            return this._resetStartingRow() + this._moveToRequestedRow() + this._moveToRequestedCol();\n        }\n        return this._moveHorizontallyOnly();\n    };\n    AltClickHandler.prototype._resetStartingRow = function () {\n        if (this._moveToRequestedRow().length === 0) {\n            return '';\n        }\n        return repeat(this._bufferLine(this._startCol, this._startRow, this._startCol, this._startRow - this._wrappedRowsForRow(this._startRow), false).length, this._sequence(\"D\"));\n    };\n    AltClickHandler.prototype._moveToRequestedRow = function () {\n        var startRow = this._startRow - this._wrappedRowsForRow(this._startRow);\n        var endRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        var rowsToMove = Math.abs(startRow - endRow) - this._wrappedRowsCount();\n        return repeat(rowsToMove, this._sequence(this._verticalDirection()));\n    };\n    AltClickHandler.prototype._moveToRequestedCol = function () {\n        var startRow;\n        if (this._moveToRequestedRow().length > 0) {\n            startRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        }\n        else {\n            startRow = this._startRow;\n        }\n        var endRow = this._endRow;\n        var direction = this._horizontalDirection();\n        return repeat(this._bufferLine(this._startCol, startRow, this._endCol, endRow, direction === \"C\").length, this._sequence(direction));\n    };\n    AltClickHandler.prototype._moveHorizontallyOnly = function () {\n        var direction = this._horizontalDirection();\n        return repeat(Math.abs(this._startCol - this._endCol), this._sequence(direction));\n    };\n    AltClickHandler.prototype._wrappedRowsCount = function () {\n        var wrappedRows = 0;\n        var startRow = this._startRow - this._wrappedRowsForRow(this._startRow);\n        var endRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        for (var i = 0; i < Math.abs(startRow - endRow); i++) {\n            var direction = this._verticalDirection() === \"A\" ? -1 : 1;\n            if (this._lines.get(startRow + (direction * i)).isWrapped) {\n                wrappedRows++;\n            }\n        }\n        return wrappedRows;\n    };\n    AltClickHandler.prototype._wrappedRowsForRow = function (currentRow) {\n        var rowCount = 0;\n        var lineWraps = this._lines.get(currentRow).isWrapped;\n        while (lineWraps && currentRow >= 0 && currentRow < this._terminal.rows) {\n            rowCount++;\n            currentRow--;\n            lineWraps = this._lines.get(currentRow).isWrapped;\n        }\n        return rowCount;\n    };\n    AltClickHandler.prototype._horizontalDirection = function () {\n        var startRow;\n        if (this._moveToRequestedRow().length > 0) {\n            startRow = this._endRow - this._wrappedRowsForRow(this._endRow);\n        }\n        else {\n            startRow = this._startRow;\n        }\n        if ((this._startCol < this._endCol &&\n            startRow <= this._endRow) ||\n            (this._startCol >= this._endCol &&\n                startRow < this._endRow)) {\n            return \"C\";\n        }\n        return \"D\";\n    };\n    AltClickHandler.prototype._verticalDirection = function () {\n        if (this._startRow > this._endRow) {\n            return \"A\";\n        }\n        return \"B\";\n    };\n    AltClickHandler.prototype._bufferLine = function (startCol, startRow, endCol, endRow, forward) {\n        var currentCol = startCol;\n        var currentRow = startRow;\n        var bufferStr = '';\n        while (currentCol !== endCol || currentRow !== endRow) {\n            currentCol += forward ? 1 : -1;\n            if (forward && currentCol > this._terminal.cols - 1) {\n                bufferStr += this._terminal.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);\n                currentCol = 0;\n                startCol = 0;\n                currentRow++;\n            }\n            else if (!forward && currentCol < 0) {\n                bufferStr += this._terminal.buffer.translateBufferLineToString(currentRow, false, 0, startCol + 1);\n                currentCol = this._terminal.cols - 1;\n                startCol = currentCol;\n                currentRow--;\n            }\n        }\n        return bufferStr + this._terminal.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);\n    };\n    AltClickHandler.prototype._sequence = function (direction) {\n        var mod = this._terminal.applicationCursor ? 'O' : '[';\n        return EscapeSequences_1.C0.ESC + mod + direction;\n    };\n    return AltClickHandler;\n}());\nexports.AltClickHandler = AltClickHandler;\nfunction repeat(count, str) {\n    count = Math.floor(count);\n    var rpt = '';\n    for (var i = 0; i < count; i++) {\n        rpt += str;\n    }\n    return rpt;\n}\n//# sourceMappingURL=AltClickHandler.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter2_1 = require(\"./common/EventEmitter2\");\nvar CharMeasure = (function () {\n    function CharMeasure(document, parentElement) {\n        this._onCharSizeChanged = new EventEmitter2_1.EventEmitter2();\n        this._document = document;\n        this._parentElement = parentElement;\n        this._measureElement = this._document.createElement('span');\n        this._measureElement.classList.add('xterm-char-measure-element');\n        this._measureElement.textContent = 'W';\n        this._measureElement.setAttribute('aria-hidden', 'true');\n        this._parentElement.appendChild(this._measureElement);\n    }\n    Object.defineProperty(CharMeasure.prototype, \"onCharSizeChanged\", {\n        get: function () { return this._onCharSizeChanged.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CharMeasure.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CharMeasure.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CharMeasure.prototype.measure = function (options) {\n        this._measureElement.style.fontFamily = options.fontFamily;\n        this._measureElement.style.fontSize = options.fontSize + \"px\";\n        var geometry = this._measureElement.getBoundingClientRect();\n        if (geometry.width === 0 || geometry.height === 0) {\n            return;\n        }\n        var adjustedHeight = Math.ceil(geometry.height);\n        if (this._width !== geometry.width || this._height !== adjustedHeight) {\n            this._width = geometry.width;\n            this._height = adjustedHeight;\n            this._onCharSizeChanged.fire();\n        }\n    };\n    return CharMeasure;\n}());\nexports.CharMeasure = CharMeasure;\n//# sourceMappingURL=CharMeasure.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_BELL_SOUND = 'data:audio/wav;base64,UklGRigBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQBAADpAFgCwAMlBZoG/wdmCcoKRAypDQ8PbRDBEQQTOxRtFYcWlBePGIUZXhoiG88bcBz7HHIdzh0WHlMeZx51HmkeUx4WHs8dah0AHXwc3hs9G4saxRnyGBIYGBcQFv8U4RPAEoYRQBACD70NWwwHC6gJOwjWBloF7gOBAhABkf8b/qv8R/ve+Xf4Ife79W/0JfPZ8Z/wde9N7ijtE+wU6xvqM+lb6H7nw+YX5mrlxuQz5Mzje+Ma49fioeKD4nXiYeJy4pHitOL04j/jn+MN5IPkFOWs5U3mDefM55/ogOl36m7rdOyE7abuyu8D8Unyj/Pg9D/2qfcb+Yn6/vuK/Qj/lAAlAg==';\nvar SoundManager = (function () {\n    function SoundManager(_terminal) {\n        this._terminal = _terminal;\n    }\n    Object.defineProperty(SoundManager, \"audioContext\", {\n        get: function () {\n            if (!SoundManager._audioContext) {\n                var audioContextCtor = window.AudioContext || window.webkitAudioContext;\n                if (!audioContextCtor) {\n                    console.warn('Web Audio API is not supported by this browser. Consider upgrading to the latest version');\n                    return null;\n                }\n                SoundManager._audioContext = new audioContextCtor();\n            }\n            return SoundManager._audioContext;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SoundManager.prototype.playBellSound = function () {\n        var ctx = SoundManager.audioContext;\n        if (!ctx) {\n            return;\n        }\n        var bellAudioSource = ctx.createBufferSource();\n        ctx.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._terminal.options.bellSound)), function (buffer) {\n            bellAudioSource.buffer = buffer;\n            bellAudioSource.connect(ctx.destination);\n            bellAudioSource.start(0);\n        });\n    };\n    SoundManager.prototype._base64ToArrayBuffer = function (base64) {\n        var binaryString = window.atob(base64);\n        var len = binaryString.length;\n        var bytes = new Uint8Array(len);\n        for (var i = 0; i < len; i++) {\n            bytes[i] = binaryString.charCodeAt(i);\n        }\n        return bytes.buffer;\n    };\n    SoundManager.prototype._removeMimeType = function (dataURI) {\n        var splitUri = dataURI.split(',');\n        return splitUri[1];\n    };\n    return SoundManager;\n}());\nexports.SoundManager = SoundManager;\n//# sourceMappingURL=SoundManager.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Strings = require(\"./Strings\");\nvar Platform_1 = require(\"./common/Platform\");\nvar RenderDebouncer_1 = require(\"./ui/RenderDebouncer\");\nvar Lifecycle_1 = require(\"./ui/Lifecycle\");\nvar Lifecycle_2 = require(\"./common/Lifecycle\");\nvar ScreenDprMonitor_1 = require(\"./ui/ScreenDprMonitor\");\nvar MAX_ROWS_TO_READ = 20;\nvar AccessibilityManager = (function (_super) {\n    __extends(AccessibilityManager, _super);\n    function AccessibilityManager(_terminal, _dimensions) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._dimensions = _dimensions;\n        _this._liveRegionLineCount = 0;\n        _this._charsToConsume = [];\n        _this._charsToAnnounce = '';\n        _this._accessibilityTreeRoot = document.createElement('div');\n        _this._accessibilityTreeRoot.classList.add('xterm-accessibility');\n        _this._rowContainer = document.createElement('div');\n        _this._rowContainer.classList.add('xterm-accessibility-tree');\n        _this._rowElements = [];\n        for (var i = 0; i < _this._terminal.rows; i++) {\n            _this._rowElements[i] = _this._createAccessibilityTreeNode();\n            _this._rowContainer.appendChild(_this._rowElements[i]);\n        }\n        _this._topBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 0); };\n        _this._bottomBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 1); };\n        _this._rowElements[0].addEventListener('focus', _this._topBoundaryFocusListener);\n        _this._rowElements[_this._rowElements.length - 1].addEventListener('focus', _this._bottomBoundaryFocusListener);\n        _this._refreshRowsDimensions();\n        _this._accessibilityTreeRoot.appendChild(_this._rowContainer);\n        _this._renderRowsDebouncer = new RenderDebouncer_1.RenderDebouncer(_this._renderRows.bind(_this));\n        _this._refreshRows();\n        _this._liveRegion = document.createElement('div');\n        _this._liveRegion.classList.add('live-region');\n        _this._liveRegion.setAttribute('aria-live', 'assertive');\n        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);\n        _this._terminal.element.insertAdjacentElement('afterbegin', _this._accessibilityTreeRoot);\n        _this.register(_this._renderRowsDebouncer);\n        _this.register(_this._terminal.onResize(function (e) { return _this._onResize(e.rows); }));\n        _this.register(_this._terminal.onRender(function (e) { return _this._refreshRows(e.start, e.end); }));\n        _this.register(_this._terminal.onScroll(function () { return _this._refreshRows(); }));\n        _this.register(_this._terminal.addDisposableListener('a11y.char', function (char) { return _this._onChar(char); }));\n        _this.register(_this._terminal.onLineFeed(function () { return _this._onChar('\\n'); }));\n        _this.register(_this._terminal.addDisposableListener('a11y.tab', function (spaceCount) { return _this._onTab(spaceCount); }));\n        _this.register(_this._terminal.onKey(function (e) { return _this._onKey(e.key); }));\n        _this.register(_this._terminal.addDisposableListener('blur', function () { return _this._clearLiveRegion(); }));\n        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();\n        _this.register(_this._screenDprMonitor);\n        _this._screenDprMonitor.setListener(function () { return _this._refreshRowsDimensions(); });\n        _this.register(Lifecycle_1.addDisposableDomListener(window, 'resize', function () { return _this._refreshRowsDimensions(); }));\n        return _this;\n    }\n    AccessibilityManager.prototype.dispose = function () {\n        _super.prototype.dispose.call(this);\n        this._terminal.element.removeChild(this._accessibilityTreeRoot);\n        this._rowElements.length = 0;\n    };\n    AccessibilityManager.prototype._onBoundaryFocus = function (e, position) {\n        var boundaryElement = e.target;\n        var beforeBoundaryElement = this._rowElements[position === 0 ? 1 : this._rowElements.length - 2];\n        var posInSet = boundaryElement.getAttribute('aria-posinset');\n        var lastRowPos = position === 0 ? '1' : \"\" + this._terminal.buffer.lines.length;\n        if (posInSet === lastRowPos) {\n            return;\n        }\n        if (e.relatedTarget !== beforeBoundaryElement) {\n            return;\n        }\n        var topBoundaryElement;\n        var bottomBoundaryElement;\n        if (position === 0) {\n            topBoundaryElement = boundaryElement;\n            bottomBoundaryElement = this._rowElements.pop();\n            this._rowContainer.removeChild(bottomBoundaryElement);\n        }\n        else {\n            topBoundaryElement = this._rowElements.shift();\n            bottomBoundaryElement = boundaryElement;\n            this._rowContainer.removeChild(topBoundaryElement);\n        }\n        topBoundaryElement.removeEventListener('focus', this._topBoundaryFocusListener);\n        bottomBoundaryElement.removeEventListener('focus', this._bottomBoundaryFocusListener);\n        if (position === 0) {\n            var newElement = this._createAccessibilityTreeNode();\n            this._rowElements.unshift(newElement);\n            this._rowContainer.insertAdjacentElement('afterbegin', newElement);\n        }\n        else {\n            var newElement = this._createAccessibilityTreeNode();\n            this._rowElements.push(newElement);\n            this._rowContainer.appendChild(newElement);\n        }\n        this._rowElements[0].addEventListener('focus', this._topBoundaryFocusListener);\n        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n        this._terminal.scrollLines(position === 0 ? -1 : 1);\n        this._rowElements[position === 0 ? 1 : this._rowElements.length - 2].focus();\n        e.preventDefault();\n        e.stopImmediatePropagation();\n    };\n    AccessibilityManager.prototype._onResize = function (rows) {\n        this._rowElements[this._rowElements.length - 1].removeEventListener('focus', this._bottomBoundaryFocusListener);\n        for (var i = this._rowContainer.children.length; i < this._terminal.rows; i++) {\n            this._rowElements[i] = this._createAccessibilityTreeNode();\n            this._rowContainer.appendChild(this._rowElements[i]);\n        }\n        while (this._rowElements.length > rows) {\n            this._rowContainer.removeChild(this._rowElements.pop());\n        }\n        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);\n        this._refreshRowsDimensions();\n    };\n    AccessibilityManager.prototype._createAccessibilityTreeNode = function () {\n        var element = document.createElement('div');\n        element.setAttribute('role', 'listitem');\n        element.tabIndex = -1;\n        this._refreshRowDimensions(element);\n        return element;\n    };\n    AccessibilityManager.prototype._onTab = function (spaceCount) {\n        for (var i = 0; i < spaceCount; i++) {\n            this._onChar(' ');\n        }\n    };\n    AccessibilityManager.prototype._onChar = function (char) {\n        var _this = this;\n        if (this._liveRegionLineCount < MAX_ROWS_TO_READ + 1) {\n            if (this._charsToConsume.length > 0) {\n                var shiftedChar = this._charsToConsume.shift();\n                if (shiftedChar !== char) {\n                    this._charsToAnnounce += char;\n                }\n            }\n            else {\n                this._charsToAnnounce += char;\n            }\n            if (char === '\\n') {\n                this._liveRegionLineCount++;\n                if (this._liveRegionLineCount === MAX_ROWS_TO_READ + 1) {\n                    this._liveRegion.textContent += Strings.tooMuchOutput;\n                }\n            }\n            if (Platform_1.isMac) {\n                if (this._liveRegion.textContent && this._liveRegion.textContent.length > 0 && !this._liveRegion.parentNode) {\n                    setTimeout(function () {\n                        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);\n                    }, 0);\n                }\n            }\n        }\n    };\n    AccessibilityManager.prototype._clearLiveRegion = function () {\n        this._liveRegion.textContent = '';\n        this._liveRegionLineCount = 0;\n        if (Platform_1.isMac) {\n            if (this._liveRegion.parentNode) {\n                this._accessibilityTreeRoot.removeChild(this._liveRegion);\n            }\n        }\n    };\n    AccessibilityManager.prototype._onKey = function (keyChar) {\n        this._clearLiveRegion();\n        this._charsToConsume.push(keyChar);\n    };\n    AccessibilityManager.prototype._refreshRows = function (start, end) {\n        this._renderRowsDebouncer.refresh(start, end, this._terminal.rows);\n    };\n    AccessibilityManager.prototype._renderRows = function (start, end) {\n        var buffer = this._terminal.buffer;\n        var setSize = buffer.lines.length.toString();\n        for (var i = start; i <= end; i++) {\n            var lineData = buffer.translateBufferLineToString(buffer.ydisp + i, true);\n            var posInSet = (buffer.ydisp + i + 1).toString();\n            var element = this._rowElements[i];\n            if (element) {\n                element.textContent = lineData.length === 0 ? Strings.blankLine : lineData;\n                element.setAttribute('aria-posinset', posInSet);\n                element.setAttribute('aria-setsize', setSize);\n            }\n        }\n        this._announceCharacters();\n    };\n    AccessibilityManager.prototype._refreshRowsDimensions = function () {\n        if (!this._dimensions.actualCellHeight) {\n            return;\n        }\n        if (this._rowElements.length !== this._terminal.rows) {\n            this._onResize(this._terminal.rows);\n        }\n        for (var i = 0; i < this._terminal.rows; i++) {\n            this._refreshRowDimensions(this._rowElements[i]);\n        }\n    };\n    AccessibilityManager.prototype.setDimensions = function (dimensions) {\n        this._dimensions = dimensions;\n        this._refreshRowsDimensions();\n    };\n    AccessibilityManager.prototype._refreshRowDimensions = function (element) {\n        element.style.height = this._dimensions.actualCellHeight + \"px\";\n    };\n    AccessibilityManager.prototype._announceCharacters = function () {\n        if (this._charsToAnnounce.length === 0) {\n            return;\n        }\n        this._liveRegion.textContent += this._charsToAnnounce;\n        this._charsToAnnounce = '';\n    };\n    return AccessibilityManager;\n}(Lifecycle_2.Disposable));\nexports.AccessibilityManager = AccessibilityManager;\n//# sourceMappingURL=AccessibilityManager.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DomRendererRowFactory_1 = require(\"./DomRendererRowFactory\");\nvar Types_1 = require(\"../atlas/Types\");\nvar Lifecycle_1 = require(\"../../common/Lifecycle\");\nvar TERMINAL_CLASS_PREFIX = 'xterm-dom-renderer-owner-';\nvar ROW_CONTAINER_CLASS = 'xterm-rows';\nvar FG_CLASS_PREFIX = 'xterm-fg-';\nvar BG_CLASS_PREFIX = 'xterm-bg-';\nvar FOCUS_CLASS = 'xterm-focus';\nvar SELECTION_CLASS = 'xterm-selection';\nvar nextTerminalId = 1;\nvar DomRenderer = (function (_super) {\n    __extends(DomRenderer, _super);\n    function DomRenderer(_terminal, _colors) {\n        var _this = _super.call(this) || this;\n        _this._terminal = _terminal;\n        _this._colors = _colors;\n        _this._terminalClass = nextTerminalId++;\n        _this._rowElements = [];\n        _this._rowContainer = document.createElement('div');\n        _this._rowContainer.classList.add(ROW_CONTAINER_CLASS);\n        _this._rowContainer.style.lineHeight = 'normal';\n        _this._rowContainer.setAttribute('aria-hidden', 'true');\n        _this._refreshRowElements(_this._terminal.cols, _this._terminal.rows);\n        _this._selectionContainer = document.createElement('div');\n        _this._selectionContainer.classList.add(SELECTION_CLASS);\n        _this._selectionContainer.setAttribute('aria-hidden', 'true');\n        _this.dimensions = {\n            scaledCharWidth: null,\n            scaledCharHeight: null,\n            scaledCellWidth: null,\n            scaledCellHeight: null,\n            scaledCharLeft: null,\n            scaledCharTop: null,\n            scaledCanvasWidth: null,\n            scaledCanvasHeight: null,\n            canvasWidth: null,\n            canvasHeight: null,\n            actualCellWidth: null,\n            actualCellHeight: null\n        };\n        _this._updateDimensions();\n        _this._injectCss();\n        _this._rowFactory = new DomRendererRowFactory_1.DomRendererRowFactory(_terminal.options, document);\n        _this._terminal.element.classList.add(TERMINAL_CLASS_PREFIX + _this._terminalClass);\n        _this._terminal.screenElement.appendChild(_this._rowContainer);\n        _this._terminal.screenElement.appendChild(_this._selectionContainer);\n        _this._terminal.linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });\n        _this._terminal.linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });\n        return _this;\n    }\n    DomRenderer.prototype.dispose = function () {\n        this._terminal.element.classList.remove(TERMINAL_CLASS_PREFIX + this._terminalClass);\n        this._terminal.screenElement.removeChild(this._rowContainer);\n        this._terminal.screenElement.removeChild(this._selectionContainer);\n        this._terminal.screenElement.removeChild(this._themeStyleElement);\n        this._terminal.screenElement.removeChild(this._dimensionsStyleElement);\n        _super.prototype.dispose.call(this);\n    };\n    DomRenderer.prototype._updateDimensions = function () {\n        var _this = this;\n        this.dimensions.scaledCharWidth = this._terminal.charMeasure.width * window.devicePixelRatio;\n        this.dimensions.scaledCharHeight = Math.ceil(this._terminal.charMeasure.height * window.devicePixelRatio);\n        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.options.letterSpacing);\n        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.options.lineHeight);\n        this.dimensions.scaledCharLeft = 0;\n        this.dimensions.scaledCharTop = 0;\n        this.dimensions.scaledCanvasWidth = this.dimensions.scaledCellWidth * this._terminal.cols;\n        this.dimensions.scaledCanvasHeight = this.dimensions.scaledCellHeight * this._terminal.rows;\n        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);\n        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);\n        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._terminal.cols;\n        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._terminal.rows;\n        this._rowElements.forEach(function (element) {\n            element.style.width = _this.dimensions.canvasWidth + \"px\";\n            element.style.height = _this.dimensions.actualCellHeight + \"px\";\n            element.style.lineHeight = _this.dimensions.actualCellHeight + \"px\";\n            element.style.overflow = 'hidden';\n        });\n        if (!this._dimensionsStyleElement) {\n            this._dimensionsStyleElement = document.createElement('style');\n            this._terminal.screenElement.appendChild(this._dimensionsStyleElement);\n        }\n        var styles = this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \" span {\" +\n            \" display: inline-block;\" +\n            \" height: 100%;\" +\n            \" vertical-align: top;\" +\n            (\" width: \" + this.dimensions.actualCellWidth + \"px\") +\n            \"}\";\n        this._dimensionsStyleElement.innerHTML = styles;\n        this._selectionContainer.style.height = this._terminal._viewportElement.style.height;\n        this._terminal.screenElement.style.width = this.dimensions.canvasWidth + \"px\";\n        this._terminal.screenElement.style.height = this.dimensions.canvasHeight + \"px\";\n    };\n    DomRenderer.prototype.setColors = function (colors) {\n        this._colors = colors;\n        this._injectCss();\n    };\n    DomRenderer.prototype._injectCss = function () {\n        var _this = this;\n        if (!this._themeStyleElement) {\n            this._themeStyleElement = document.createElement('style');\n            this._terminal.screenElement.appendChild(this._themeStyleElement);\n        }\n        var styles = this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \" {\" +\n            (\" color: \" + this._colors.foreground.css + \";\") +\n            (\" background-color: \" + this._colors.background.css + \";\") +\n            (\" font-family: \" + this._terminal.options.fontFamily + \";\") +\n            (\" font-size: \" + this._terminal.options.fontSize + \"px;\") +\n            \"}\";\n        styles +=\n            this._terminalSelector + \" span:not(.\" + DomRendererRowFactory_1.BOLD_CLASS + \") {\" +\n                (\" font-weight: \" + this._terminal.options.fontWeight + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" span.\" + DomRendererRowFactory_1.BOLD_CLASS + \" {\") +\n                (\" font-weight: \" + this._terminal.options.fontWeightBold + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" span.\" + DomRendererRowFactory_1.ITALIC_CLASS + \" {\") +\n                \" font-style: italic;\" +\n                \"}\";\n        styles +=\n            \"@keyframes blink {\" +\n                \" 0% { opacity: 1.0; }\" +\n                \" 50% { opacity: 0.0; }\" +\n                \" 100% { opacity: 1.0; }\" +\n                \"}\";\n        styles +=\n            this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \":not(.\" + FOCUS_CLASS + \") .\" + DomRendererRowFactory_1.CURSOR_CLASS + \" {\" +\n                (\" outline: 1px solid \" + this._colors.cursor.css + \";\") +\n                \" outline-offset: -1px;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_BLINK_CLASS + \" {\") +\n                \" animation: blink 1s step-end infinite;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + \" {\") +\n                (\" background-color: \" + this._colors.cursor.css + \";\") +\n                (\" color: \" + this._colors.cursorAccent.css + \";\") +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_BAR_CLASS + \" {\") +\n                (\" box-shadow: 1px 0 0 \" + this._colors.cursor.css + \" inset;\") +\n                \"}\" +\n                (this._terminalSelector + \" .\" + ROW_CONTAINER_CLASS + \".\" + FOCUS_CLASS + \" .\" + DomRendererRowFactory_1.CURSOR_CLASS + \".\" + DomRendererRowFactory_1.CURSOR_STYLE_UNDERLINE_CLASS + \" {\") +\n                (\" box-shadow: 0 -1px 0 \" + this._colors.cursor.css + \" inset;\") +\n                \"}\";\n        styles +=\n            this._terminalSelector + \" .\" + SELECTION_CLASS + \" {\" +\n                \" position: absolute;\" +\n                \" top: 0;\" +\n                \" left: 0;\" +\n                \" z-index: 1;\" +\n                \" pointer-events: none;\" +\n                \"}\" +\n                (this._terminalSelector + \" .\" + SELECTION_CLASS + \" div {\") +\n                \" position: absolute;\" +\n                (\" background-color: \" + this._colors.selection.css + \";\") +\n                \"}\";\n        this._colors.ansi.forEach(function (c, i) {\n            styles +=\n                _this._terminalSelector + \" .\" + FG_CLASS_PREFIX + i + \" { color: \" + c.css + \"; }\" +\n                    (_this._terminalSelector + \" .\" + BG_CLASS_PREFIX + i + \" { background-color: \" + c.css + \"; }\");\n        });\n        styles +=\n            this._terminalSelector + \" .\" + FG_CLASS_PREFIX + Types_1.INVERTED_DEFAULT_COLOR + \" { color: \" + this._colors.background.css + \"; }\" +\n                (this._terminalSelector + \" .\" + BG_CLASS_PREFIX + Types_1.INVERTED_DEFAULT_COLOR + \" { background-color: \" + this._colors.foreground.css + \"; }\");\n        this._themeStyleElement.innerHTML = styles;\n    };\n    DomRenderer.prototype.onDevicePixelRatioChange = function () {\n        this._updateDimensions();\n    };\n    DomRenderer.prototype._refreshRowElements = function (cols, rows) {\n        for (var i = this._rowElements.length; i <= rows; i++) {\n            var row = document.createElement('div');\n            this._rowContainer.appendChild(row);\n            this._rowElements.push(row);\n        }\n        while (this._rowElements.length > rows) {\n            this._rowContainer.removeChild(this._rowElements.pop());\n        }\n    };\n    DomRenderer.prototype.onResize = function (cols, rows) {\n        this._refreshRowElements(cols, rows);\n        this._updateDimensions();\n    };\n    DomRenderer.prototype.onCharSizeChanged = function () {\n        this._updateDimensions();\n    };\n    DomRenderer.prototype.onBlur = function () {\n        this._rowContainer.classList.remove(FOCUS_CLASS);\n    };\n    DomRenderer.prototype.onFocus = function () {\n        this._rowContainer.classList.add(FOCUS_CLASS);\n    };\n    DomRenderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        while (this._selectionContainer.children.length) {\n            this._selectionContainer.removeChild(this._selectionContainer.children[0]);\n        }\n        if (!start || !end) {\n            return;\n        }\n        var viewportStartRow = start[1] - this._terminal.buffer.ydisp;\n        var viewportEndRow = end[1] - this._terminal.buffer.ydisp;\n        var viewportCappedStartRow = Math.max(viewportStartRow, 0);\n        var viewportCappedEndRow = Math.min(viewportEndRow, this._terminal.rows - 1);\n        if (viewportCappedStartRow >= this._terminal.rows || viewportCappedEndRow < 0) {\n            return;\n        }\n        var documentFragment = document.createDocumentFragment();\n        if (columnSelectMode) {\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, start[0], end[0], viewportCappedEndRow - viewportCappedStartRow + 1));\n        }\n        else {\n            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;\n            var endCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : this._terminal.cols;\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, startCol, endCol));\n            var middleRowsCount = viewportCappedEndRow - viewportCappedStartRow - 1;\n            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow + 1, 0, this._terminal.cols, middleRowsCount));\n            if (viewportCappedStartRow !== viewportCappedEndRow) {\n                var endCol_1 = viewportEndRow === viewportCappedEndRow ? end[0] : this._terminal.cols;\n                documentFragment.appendChild(this._createSelectionElement(viewportCappedEndRow, 0, endCol_1));\n            }\n        }\n        this._selectionContainer.appendChild(documentFragment);\n    };\n    DomRenderer.prototype._createSelectionElement = function (row, colStart, colEnd, rowCount) {\n        if (rowCount === void 0) { rowCount = 1; }\n        var element = document.createElement('div');\n        element.style.height = rowCount * this.dimensions.actualCellHeight + \"px\";\n        element.style.top = row * this.dimensions.actualCellHeight + \"px\";\n        element.style.left = colStart * this.dimensions.actualCellWidth + \"px\";\n        element.style.width = this.dimensions.actualCellWidth * (colEnd - colStart) + \"px\";\n        return element;\n    };\n    DomRenderer.prototype.onCursorMove = function () {\n    };\n    DomRenderer.prototype.onOptionsChanged = function () {\n        this._updateDimensions();\n        this._injectCss();\n        this._terminal.refresh(0, this._terminal.rows - 1);\n    };\n    DomRenderer.prototype.clear = function () {\n        this._rowElements.forEach(function (e) { return e.innerHTML = ''; });\n    };\n    DomRenderer.prototype.renderRows = function (start, end) {\n        var terminal = this._terminal;\n        var cursorAbsoluteY = terminal.buffer.ybase + terminal.buffer.y;\n        var cursorX = this._terminal.buffer.x;\n        var cursorBlink = this._terminal.options.cursorBlink;\n        for (var y = start; y <= end; y++) {\n            var rowElement = this._rowElements[y];\n            rowElement.innerHTML = '';\n            var row = y + terminal.buffer.ydisp;\n            var lineData = terminal.buffer.lines.get(row);\n            var cursorStyle = terminal.options.cursorStyle;\n            rowElement.appendChild(this._rowFactory.createRow(lineData, row === cursorAbsoluteY, cursorStyle, cursorX, cursorBlink, this.dimensions.actualCellWidth, terminal.cols));\n        }\n    };\n    Object.defineProperty(DomRenderer.prototype, \"_terminalSelector\", {\n        get: function () {\n            return \".\" + TERMINAL_CLASS_PREFIX + this._terminalClass;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DomRenderer.prototype.registerCharacterJoiner = function (handler) { return -1; };\n    DomRenderer.prototype.deregisterCharacterJoiner = function (joinerId) { return false; };\n    DomRenderer.prototype._onLinkHover = function (e) {\n        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, true);\n    };\n    DomRenderer.prototype._onLinkLeave = function (e) {\n        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, false);\n    };\n    DomRenderer.prototype._setCellUnderline = function (x, x2, y, y2, cols, enabled) {\n        while (x !== x2 || y !== y2) {\n            var row = this._rowElements[y];\n            if (!row) {\n                return;\n            }\n            var span = row.children[x];\n            if (span) {\n                span.style.textDecoration = enabled ? 'underline' : 'none';\n            }\n            if (++x >= cols) {\n                x = 0;\n                y++;\n            }\n        }\n    };\n    return DomRenderer;\n}(Lifecycle_1.Disposable));\nexports.DomRenderer = DomRenderer;\n//# sourceMappingURL=DomRenderer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Types_1 = require(\"../atlas/Types\");\nvar BufferLine_1 = require(\"../../core/buffer/BufferLine\");\nexports.BOLD_CLASS = 'xterm-bold';\nexports.DIM_CLASS = 'xterm-dim';\nexports.ITALIC_CLASS = 'xterm-italic';\nexports.UNDERLINE_CLASS = 'xterm-underline';\nexports.CURSOR_CLASS = 'xterm-cursor';\nexports.CURSOR_BLINK_CLASS = 'xterm-cursor-blink';\nexports.CURSOR_STYLE_BLOCK_CLASS = 'xterm-cursor-block';\nexports.CURSOR_STYLE_BAR_CLASS = 'xterm-cursor-bar';\nexports.CURSOR_STYLE_UNDERLINE_CLASS = 'xterm-cursor-underline';\nvar DomRendererRowFactory = (function () {\n    function DomRendererRowFactory(_terminalOptions, _document) {\n        this._terminalOptions = _terminalOptions;\n        this._document = _document;\n        this._workCell = new BufferLine_1.CellData();\n    }\n    DomRendererRowFactory.prototype.createRow = function (lineData, isCursorRow, cursorStyle, cursorX, cursorBlink, cellWidth, cols) {\n        var fragment = this._document.createDocumentFragment();\n        var lineLength = 0;\n        for (var x = Math.min(lineData.length, cols) - 1; x >= 0; x--) {\n            if (lineData.loadCell(x, this._workCell).getCode() !== BufferLine_1.NULL_CELL_CODE || (isCursorRow && x === cursorX)) {\n                lineLength = x + 1;\n                break;\n            }\n        }\n        for (var x = 0; x < lineLength; x++) {\n            lineData.loadCell(x, this._workCell);\n            var width = this._workCell.getWidth();\n            if (width === 0) {\n                continue;\n            }\n            var charElement = this._document.createElement('span');\n            if (width > 1) {\n                charElement.style.width = cellWidth * width + \"px\";\n            }\n            if (isCursorRow && x === cursorX) {\n                charElement.classList.add(exports.CURSOR_CLASS);\n                if (cursorBlink) {\n                    charElement.classList.add(exports.CURSOR_BLINK_CLASS);\n                }\n                switch (cursorStyle) {\n                    case 'bar':\n                        charElement.classList.add(exports.CURSOR_STYLE_BAR_CLASS);\n                        break;\n                    case 'underline':\n                        charElement.classList.add(exports.CURSOR_STYLE_UNDERLINE_CLASS);\n                        break;\n                    default:\n                        charElement.classList.add(exports.CURSOR_STYLE_BLOCK_CLASS);\n                        break;\n                }\n            }\n            if (this._workCell.isBold() && this._terminalOptions.enableBold) {\n                charElement.classList.add(exports.BOLD_CLASS);\n            }\n            if (this._workCell.isItalic()) {\n                charElement.classList.add(exports.ITALIC_CLASS);\n            }\n            if (this._workCell.isDim()) {\n                charElement.classList.add(exports.DIM_CLASS);\n            }\n            if (this._workCell.isUnderline()) {\n                charElement.classList.add(exports.UNDERLINE_CLASS);\n            }\n            charElement.textContent = this._workCell.getChars() || BufferLine_1.WHITESPACE_CELL_CHAR;\n            var swapColor = this._workCell.isInverse();\n            if (this._workCell.isFgRGB()) {\n                var style = charElement.getAttribute('style') || '';\n                style += (swapColor ? 'background-' : '') + \"color:rgb(\" + (BufferLine_1.AttributeData.toColorRGB(this._workCell.getFgColor())).join(',') + \");\";\n                charElement.setAttribute('style', style);\n            }\n            else if (this._workCell.isFgPalette()) {\n                var fg = this._workCell.getFgColor();\n                if (this._workCell.isBold() && fg < 8 && !swapColor &&\n                    this._terminalOptions.enableBold && this._terminalOptions.drawBoldTextInBrightColors) {\n                    fg += 8;\n                }\n                charElement.classList.add(\"xterm-\" + (swapColor ? 'b' : 'f') + \"g-\" + fg);\n            }\n            else if (swapColor) {\n                charElement.classList.add(\"xterm-bg-\" + Types_1.INVERTED_DEFAULT_COLOR);\n            }\n            if (this._workCell.isBgRGB()) {\n                var style = charElement.getAttribute('style') || '';\n                style += (swapColor ? '' : 'background-') + \"color:rgb(\" + (BufferLine_1.AttributeData.toColorRGB(this._workCell.getBgColor())).join(',') + \");\";\n                charElement.setAttribute('style', style);\n            }\n            else if (this._workCell.isBgPalette()) {\n                charElement.classList.add(\"xterm-\" + (swapColor ? 'f' : 'b') + \"g-\" + this._workCell.getBgColor());\n            }\n            else if (swapColor) {\n                charElement.classList.add(\"xterm-fg-\" + Types_1.INVERTED_DEFAULT_COLOR);\n            }\n            fragment.appendChild(charElement);\n        }\n        return fragment;\n    };\n    return DomRendererRowFactory;\n}());\nexports.DomRendererRowFactory = DomRendererRowFactory;\n//# sourceMappingURL=DomRendererRowFactory.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EscapeSequences_1 = require(\"../../common/data/EscapeSequences\");\nvar KEYCODE_KEY_MAPPINGS = {\n    48: ['0', ')'],\n    49: ['1', '!'],\n    50: ['2', '@'],\n    51: ['3', '#'],\n    52: ['4', '$'],\n    53: ['5', '%'],\n    54: ['6', '^'],\n    55: ['7', '&'],\n    56: ['8', '*'],\n    57: ['9', '('],\n    186: [';', ':'],\n    187: ['=', '+'],\n    188: [',', '<'],\n    189: ['-', '_'],\n    190: ['.', '>'],\n    191: ['/', '?'],\n    192: ['`', '~'],\n    219: ['[', '{'],\n    220: ['\\\\', '|'],\n    221: [']', '}'],\n    222: ['\\'', '\"']\n};\nfunction evaluateKeyboardEvent(ev, applicationCursorMode, isMac, macOptionIsMeta) {\n    var result = {\n        type: 0,\n        cancel: false,\n        key: undefined\n    };\n    var modifiers = (ev.shiftKey ? 1 : 0) | (ev.altKey ? 2 : 0) | (ev.ctrlKey ? 4 : 0) | (ev.metaKey ? 8 : 0);\n    switch (ev.keyCode) {\n        case 0:\n            if (ev.key === 'UIKeyInputUpArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OA';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[A';\n                }\n            }\n            else if (ev.key === 'UIKeyInputLeftArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OD';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[D';\n                }\n            }\n            else if (ev.key === 'UIKeyInputRightArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OC';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[C';\n                }\n            }\n            else if (ev.key === 'UIKeyInputDownArrow') {\n                if (applicationCursorMode) {\n                    result.key = EscapeSequences_1.C0.ESC + 'OB';\n                }\n                else {\n                    result.key = EscapeSequences_1.C0.ESC + '[B';\n                }\n            }\n            break;\n        case 8:\n            if (ev.shiftKey) {\n                result.key = EscapeSequences_1.C0.BS;\n                break;\n            }\n            else if (ev.altKey) {\n                result.key = EscapeSequences_1.C0.ESC + EscapeSequences_1.C0.DEL;\n                break;\n            }\n            result.key = EscapeSequences_1.C0.DEL;\n            break;\n        case 9:\n            if (ev.shiftKey) {\n                result.key = EscapeSequences_1.C0.ESC + '[Z';\n                break;\n            }\n            result.key = EscapeSequences_1.C0.HT;\n            result.cancel = true;\n            break;\n        case 13:\n            result.key = EscapeSequences_1.C0.CR;\n            result.cancel = true;\n            break;\n        case 27:\n            result.key = EscapeSequences_1.C0.ESC;\n            result.cancel = true;\n            break;\n        case 37:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'D';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3D') {\n                    result.key = isMac ? EscapeSequences_1.C0.ESC + 'b' : EscapeSequences_1.C0.ESC + '[1;5D';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OD';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[D';\n            }\n            break;\n        case 39:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'C';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3C') {\n                    result.key = isMac ? EscapeSequences_1.C0.ESC + 'f' : EscapeSequences_1.C0.ESC + '[1;5C';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OC';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[C';\n            }\n            break;\n        case 38:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'A';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3A') {\n                    result.key = EscapeSequences_1.C0.ESC + '[1;5A';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OA';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[A';\n            }\n            break;\n        case 40:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'B';\n                if (result.key === EscapeSequences_1.C0.ESC + '[1;3B') {\n                    result.key = EscapeSequences_1.C0.ESC + '[1;5B';\n                }\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OB';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[B';\n            }\n            break;\n        case 45:\n            if (!ev.shiftKey && !ev.ctrlKey) {\n                result.key = EscapeSequences_1.C0.ESC + '[2~';\n            }\n            break;\n        case 46:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[3;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[3~';\n            }\n            break;\n        case 36:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'H';\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OH';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[H';\n            }\n            break;\n        case 35:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'F';\n            }\n            else if (applicationCursorMode) {\n                result.key = EscapeSequences_1.C0.ESC + 'OF';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[F';\n            }\n            break;\n        case 33:\n            if (ev.shiftKey) {\n                result.type = 2;\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[5~';\n            }\n            break;\n        case 34:\n            if (ev.shiftKey) {\n                result.type = 3;\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[6~';\n            }\n            break;\n        case 112:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'P';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OP';\n            }\n            break;\n        case 113:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'Q';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OQ';\n            }\n            break;\n        case 114:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'R';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OR';\n            }\n            break;\n        case 115:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'S';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + 'OS';\n            }\n            break;\n        case 116:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[15;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[15~';\n            }\n            break;\n        case 117:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[17;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[17~';\n            }\n            break;\n        case 118:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[18;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[18~';\n            }\n            break;\n        case 119:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[19;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[19~';\n            }\n            break;\n        case 120:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[20;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[20~';\n            }\n            break;\n        case 121:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[21;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[21~';\n            }\n            break;\n        case 122:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[23;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[23~';\n            }\n            break;\n        case 123:\n            if (modifiers) {\n                result.key = EscapeSequences_1.C0.ESC + '[24;' + (modifiers + 1) + '~';\n            }\n            else {\n                result.key = EscapeSequences_1.C0.ESC + '[24~';\n            }\n            break;\n        default:\n            if (ev.ctrlKey && !ev.shiftKey && !ev.altKey && !ev.metaKey) {\n                if (ev.keyCode >= 65 && ev.keyCode <= 90) {\n                    result.key = String.fromCharCode(ev.keyCode - 64);\n                }\n                else if (ev.keyCode === 32) {\n                    result.key = String.fromCharCode(0);\n                }\n                else if (ev.keyCode >= 51 && ev.keyCode <= 55) {\n                    result.key = String.fromCharCode(ev.keyCode - 51 + 27);\n                }\n                else if (ev.keyCode === 56) {\n                    result.key = String.fromCharCode(127);\n                }\n                else if (ev.keyCode === 219) {\n                    result.key = String.fromCharCode(27);\n                }\n                else if (ev.keyCode === 220) {\n                    result.key = String.fromCharCode(28);\n                }\n                else if (ev.keyCode === 221) {\n                    result.key = String.fromCharCode(29);\n                }\n            }\n            else if ((!isMac || macOptionIsMeta) && ev.altKey && !ev.metaKey) {\n                var keyMapping = KEYCODE_KEY_MAPPINGS[ev.keyCode];\n                var key = keyMapping && keyMapping[!ev.shiftKey ? 0 : 1];\n                if (key) {\n                    result.key = EscapeSequences_1.C0.ESC + key;\n                }\n                else if (ev.keyCode >= 65 && ev.keyCode <= 90) {\n                    var keyCode = ev.ctrlKey ? ev.keyCode - 64 : ev.keyCode + 32;\n                    result.key = EscapeSequences_1.C0.ESC + String.fromCharCode(keyCode);\n                }\n            }\n            else if (isMac && !ev.altKey && !ev.ctrlKey && ev.metaKey) {\n                if (ev.keyCode === 65) {\n                    result.type = 1;\n                }\n            }\n            else if (ev.key && !ev.ctrlKey && !ev.altKey && !ev.metaKey && ev.keyCode >= 48 && ev.key.length === 1) {\n                result.key = ev.key;\n            }\n            else if (ev.key && ev.ctrlKey) {\n                if (ev.key === '_') {\n                    result.key = EscapeSequences_1.C0.US;\n                }\n            }\n            break;\n    }\n    return result;\n}\nexports.evaluateKeyboardEvent = evaluateKeyboardEvent;\n//# sourceMappingURL=Keyboard.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction clone(val, depth) {\n    if (depth === void 0) { depth = 5; }\n    if (typeof val !== 'object') {\n        return val;\n    }\n    if (val === null) {\n        return null;\n    }\n    var clonedObject = Array.isArray(val) ? [] : {};\n    for (var key in val) {\n        clonedObject[key] = depth <= 1 ? val[key] : clone(val[key], depth - 1);\n    }\n    return clonedObject;\n}\nexports.clone = clone;\n//# sourceMappingURL=Clone.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BufferLine_1 = require(\"./core/buffer/BufferLine\");\nfunction applyWindowsMode(terminal) {\n    return terminal.onLineFeed(function () {\n        var line = terminal.buffer.lines.get(terminal.buffer.ybase + terminal.buffer.y - 1);\n        var lastChar = line.get(terminal.cols - 1);\n        var nextLine = terminal.buffer.lines.get(terminal.buffer.ybase + terminal.buffer.y);\n        nextLine.isWrapped = (lastChar[BufferLine_1.CHAR_DATA_CODE_INDEX] !== BufferLine_1.NULL_CELL_CODE && lastChar[BufferLine_1.CHAR_DATA_CODE_INDEX] !== BufferLine_1.WHITESPACE_CELL_CODE);\n    });\n}\nexports.applyWindowsMode = applyWindowsMode;\n//# sourceMappingURL=WindowsMode.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RenderDebouncer_1 = require(\"../ui/RenderDebouncer\");\nvar EventEmitter2_1 = require(\"../common/EventEmitter2\");\nvar Lifecycle_1 = require(\"../common/Lifecycle\");\nvar ScreenDprMonitor_1 = require(\"../ui/ScreenDprMonitor\");\nvar Lifecycle_2 = require(\"../ui/Lifecycle\");\nvar RenderCoordinator = (function (_super) {\n    __extends(RenderCoordinator, _super);\n    function RenderCoordinator(_renderer, _rowCount, screenElement) {\n        var _this = _super.call(this) || this;\n        _this._renderer = _renderer;\n        _this._rowCount = _rowCount;\n        _this._isPaused = false;\n        _this._needsFullRefresh = false;\n        _this._canvasWidth = 0;\n        _this._canvasHeight = 0;\n        _this._onDimensionsChange = new EventEmitter2_1.EventEmitter2();\n        _this._onRender = new EventEmitter2_1.EventEmitter2();\n        _this._onRefreshRequest = new EventEmitter2_1.EventEmitter2();\n        _this._renderDebouncer = new RenderDebouncer_1.RenderDebouncer(function (start, end) { return _this._renderRows(start, end); });\n        _this.register(_this._renderDebouncer);\n        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();\n        _this._screenDprMonitor.setListener(function () { return _this._renderer.onDevicePixelRatioChange(); });\n        _this.register(_this._screenDprMonitor);\n        _this.register(Lifecycle_2.addDisposableDomListener(window, 'resize', function () { return _this._renderer.onDevicePixelRatioChange(); }));\n        if ('IntersectionObserver' in window) {\n            var observer_1 = new IntersectionObserver(function (e) { return _this._onIntersectionChange(e[e.length - 1]); }, { threshold: 0 });\n            observer_1.observe(screenElement);\n            _this.register({ dispose: function () { return observer_1.disconnect(); } });\n        }\n        return _this;\n    }\n    Object.defineProperty(RenderCoordinator.prototype, \"onDimensionsChange\", {\n        get: function () { return this._onDimensionsChange.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RenderCoordinator.prototype, \"onRender\", {\n        get: function () { return this._onRender.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RenderCoordinator.prototype, \"onRefreshRequest\", {\n        get: function () { return this._onRefreshRequest.event; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RenderCoordinator.prototype, \"dimensions\", {\n        get: function () { return this._renderer.dimensions; },\n        enumerable: true,\n        configurable: true\n    });\n    RenderCoordinator.prototype._onIntersectionChange = function (entry) {\n        this._isPaused = entry.intersectionRatio === 0;\n        if (!this._isPaused && this._needsFullRefresh) {\n            this.refreshRows(0, this._rowCount - 1);\n            this._needsFullRefresh = false;\n        }\n    };\n    RenderCoordinator.prototype.refreshRows = function (start, end) {\n        if (this._isPaused) {\n            this._needsFullRefresh = true;\n            return;\n        }\n        this._renderDebouncer.refresh(start, end, this._rowCount);\n    };\n    RenderCoordinator.prototype._renderRows = function (start, end) {\n        this._renderer.renderRows(start, end);\n        this._onRender.fire({ start: start, end: end });\n    };\n    RenderCoordinator.prototype.resize = function (cols, rows) {\n        this._rowCount = rows;\n        this._fireOnCanvasResize();\n    };\n    RenderCoordinator.prototype.changeOptions = function () {\n        this._renderer.onOptionsChanged();\n        this._fireOnCanvasResize();\n    };\n    RenderCoordinator.prototype._fireOnCanvasResize = function () {\n        if (this._renderer.dimensions.canvasWidth === this._canvasWidth && this._renderer.dimensions.canvasHeight === this._canvasHeight) {\n            return;\n        }\n        this._onDimensionsChange.fire(this._renderer.dimensions);\n    };\n    RenderCoordinator.prototype.setRenderer = function (renderer) {\n        this._renderer.dispose();\n        this._renderer = renderer;\n    };\n    RenderCoordinator.prototype._fullRefresh = function () {\n        if (this._isPaused) {\n            this._needsFullRefresh = true;\n        }\n        else {\n            this.refreshRows(0, this._rowCount);\n        }\n    };\n    RenderCoordinator.prototype.setColors = function (colors) {\n        this._renderer.setColors(colors);\n        this._fullRefresh();\n    };\n    RenderCoordinator.prototype.onDevicePixelRatioChange = function () {\n        this._renderer.onDevicePixelRatioChange();\n    };\n    RenderCoordinator.prototype.onResize = function (cols, rows) {\n        this._renderer.onResize(cols, rows);\n        this._fullRefresh();\n    };\n    RenderCoordinator.prototype.onCharSizeChanged = function () {\n        this._renderer.onCharSizeChanged();\n    };\n    RenderCoordinator.prototype.onBlur = function () {\n        this._renderer.onBlur();\n    };\n    RenderCoordinator.prototype.onFocus = function () {\n        this._renderer.onFocus();\n    };\n    RenderCoordinator.prototype.onSelectionChanged = function (start, end, columnSelectMode) {\n        this._renderer.onSelectionChanged(start, end, columnSelectMode);\n    };\n    RenderCoordinator.prototype.onCursorMove = function () {\n        this._renderer.onCursorMove();\n    };\n    RenderCoordinator.prototype.onOptionsChanged = function () {\n        this._renderer.onOptionsChanged();\n    };\n    RenderCoordinator.prototype.clear = function () {\n        this._renderer.clear();\n    };\n    RenderCoordinator.prototype.registerCharacterJoiner = function (handler) {\n        return this._renderer.registerCharacterJoiner(handler);\n    };\n    RenderCoordinator.prototype.deregisterCharacterJoiner = function (joinerId) {\n        return this._renderer.deregisterCharacterJoiner(joinerId);\n    };\n    return RenderCoordinator;\n}(Lifecycle_1.Disposable));\nexports.RenderCoordinator = RenderCoordinator;\n//# sourceMappingURL=RenderCoordinator.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar AddonManager = (function () {\n    function AddonManager() {\n        this._addons = [];\n    }\n    AddonManager.prototype.dispose = function () {\n        for (var i = this._addons.length - 1; i >= 0; i--) {\n            this._addons[i].instance.dispose();\n        }\n    };\n    AddonManager.prototype.loadAddon = function (terminal, instance) {\n        var _this = this;\n        var loadedAddon = {\n            instance: instance,\n            dispose: instance.dispose,\n            isDisposed: false\n        };\n        this._addons.push(loadedAddon);\n        instance.dispose = function () { return _this._wrappedAddonDispose(loadedAddon); };\n        instance.activate(terminal);\n    };\n    AddonManager.prototype._wrappedAddonDispose = function (loadedAddon) {\n        if (loadedAddon.isDisposed) {\n            return;\n        }\n        var index = -1;\n        for (var i = 0; i < this._addons.length; i++) {\n            if (this._addons[i] === loadedAddon) {\n                index = i;\n                break;\n            }\n        }\n        if (index === -1) {\n            throw new Error('Could not dispose an addon that has not been loaded');\n        }\n        loadedAddon.isDisposed = true;\n        loadedAddon.dispose.apply(loadedAddon.instance);\n        this._addons.splice(index, 1);\n    };\n    return AddonManager;\n}());\nexports.AddonManager = AddonManager;\n//# sourceMappingURL=AddonManager.js.map","function t(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,c)}u((r=r.apply(t,e||[])).next())})}function e(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},\"function\"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}var n=[\"text/plain\",\"text/html\"];var r=function(){(console.warn||console.log).call(arguments)}.bind(console,\"[clipboard-polyfill]\"),o=!0;var i=function(){function t(){this.m={}}return t.prototype.setData=function(t,e){o&&-1===n.indexOf(t)&&r(\"Unknown data type: \"+t,\"Call clipboard.suppressWarnings() to suppress this warning.\"),this.m[t]=e},t.prototype.getData=function(t){return this.m[t]},t.prototype.forEach=function(t){for(var e in this.m)t(this.m[e],e)},t}(),a=function(t){},c=!0;var u=function(){(console.warn||console.log).apply(console,arguments)}.bind(\"[clipboard-polyfill]\"),s=\"text/plain\";function l(t){a=t}function d(){c=!1,o=!1}function f(n){return t(this,void 0,void 0,function(){var t;return e(this,function(e){if(c&&!n.getData(s)&&u(\"clipboard.write() was called without a `text/plain` data type. On some platforms, this may result in an empty clipboard. Call clipboard.suppressWarnings() to suppress this warning.\"),C()){if(function(t){var e=t.getData(s);if(void 0!==e)return window.clipboardData.setData(\"Text\",e);throw new Error(\"No `text/plain` value was specified.\")}(n))return[2];throw new Error(\"Copying failed, possibly because the user rejected it.\")}if(g(n))return a(\"regular execCopy worked\"),[2];if(navigator.userAgent.indexOf(\"Edge\")>-1)return a('UA \"Edge\" => assuming success'),[2];if(x(document.body,n))return a(\"copyUsingTempSelection worked\"),[2];if(function(t){var e=document.createElement(\"div\");e.setAttribute(\"style\",\"-webkit-user-select: text !important\"),e.textContent=\"temporary element\",document.body.appendChild(e);var n=x(e,t);return document.body.removeChild(e),n}(n))return a(\"copyUsingTempElem worked\"),[2];if(void 0!==(t=n.getData(s))&&function(t){a(\"copyTextUsingDOM\");var e=document.createElement(\"div\");e.setAttribute(\"style\",\"-webkit-user-select: text !important\");var n=e;e.attachShadow&&(a(\"Using shadow DOM.\"),n=e.attachShadow({mode:\"open\"}));var r=document.createElement(\"span\");r.innerText=t,n.appendChild(r),document.body.appendChild(e),D(r);var o=document.execCommand(\"copy\");return E(),document.body.removeChild(e),o}(t))return a(\"copyTextUsingDOM worked\"),[2];throw new Error(\"Copy command failed.\")})})}function p(n){return t(this,void 0,void 0,function(){return e(this,function(t){return navigator.clipboard&&navigator.clipboard.writeText?(a(\"Using `navigator.clipboard.writeText()`.\"),[2,navigator.clipboard.writeText(n)]):[2,f(T(n))]})})}function v(){return t(this,void 0,void 0,function(){var t;return e(this,function(e){switch(e.label){case 0:return t=T,[4,h()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})}function h(){return t(this,void 0,void 0,function(){return e(this,function(t){if(navigator.clipboard&&navigator.clipboard.readText)return a(\"Using `navigator.clipboard.readText()`.\"),[2,navigator.clipboard.readText()];if(C())return a(\"Reading text using IE strategy.\"),[2,k()];throw new Error(\"Read is not supported in your browser.\")})})}var b=!1;function m(){b||(c&&u('The deprecated default object of `clipboard-polyfill` was called. Please switch to `import * as clipboard from \"clipboard-polyfill\"` and see https://github.com/lgarron/clipboard-polyfill/issues/101 for more info.'),b=!0)}var w={DT:i,setDebugLog:function(t){return m(),l(t)},suppressWarnings:function(){return m(),d()},write:function(n){return t(this,void 0,void 0,function(){return e(this,function(t){return m(),[2,f(n)]})})},writeText:function(n){return t(this,void 0,void 0,function(){return e(this,function(t){return m(),[2,p(n)]})})},read:function(){return t(this,void 0,void 0,function(){return e(this,function(t){return m(),[2,v()]})})},readText:function(){return t(this,void 0,void 0,function(){return e(this,function(t){return m(),[2,h()]})})}},y=function(){this.success=!1};function g(t){var e=new y,n=function(t,e,n){a(\"listener called\"),t.success=!0,e.forEach(function(e,r){var o=n.clipboardData;o.setData(r,e),r===s&&o.getData(r)!==e&&(a(\"setting text/plain failed\"),t.success=!1)}),n.preventDefault()}.bind(this,e,t);document.addEventListener(\"copy\",n);try{document.execCommand(\"copy\")}finally{document.removeEventListener(\"copy\",n)}return e.success}function x(t,e){D(t);var n=g(e);return E(),n}function D(t){var e=document.getSelection();if(e){var n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}}function E(){var t=document.getSelection();t&&t.removeAllRanges()}function T(t){var e=new i;return e.setData(s,t),e}function C(){return\"undefined\"==typeof ClipboardEvent&&void 0!==window.clipboardData&&void 0!==window.clipboardData.setData}function k(){return t(this,void 0,void 0,function(){var t;return e(this,function(e){if(\"\"===(t=window.clipboardData.getData(\"Text\")))throw new Error(\"Empty clipboard or could not read plain text from clipboard\");return[2,t]})})}export default w;export{i as DT,v as read,h as readText,l as setDebugLog,d as suppressWarnings,f as write,p as writeText};\n//# sourceMappingURL=clipboard-polyfill.esm.js.map\n","/*!\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport './index.scss';\nimport {Terminal} from 'xterm';\nimport * as fit from 'xterm/lib/addons/fit/fit';\nimport * as attach from 'xterm/lib/addons/attach/attach';\nimport * as clipboard from 'clipboard-polyfill';\nimport osjs from 'osjs';\nimport {name as applicationName} from './metadata.json';\n\n\n/*\n * Creates a new Terminal connection\n */\nconst createConnection = async (core, proc, win, term) => {\n  const params = {\n    connection: {\n    },\n    size: {\n      cols: term.cols,\n      rows: term.rows\n    }\n  };\n\n  term.fit();\n  term.clear();\n  term.writeln('Requesting connection....');\n\n  const response = await proc.request('/create', {method: 'post', body: params});\n  const ws = proc.socket('/socket', {\n    socket: {\n      reconnect: false\n    }\n  });\n  const uuid = response.uuid;\n  let closed = false;\n  let pinged = false;\n  let pid = -1;\n\n  ws.on('open', () => ws.send(uuid));\n\n  ws.on('message', (ev) => {\n    if (!pinged) {\n      pinged = true;\n      pid = parseInt(ev.data, 10);\n      term.attach(ws.connection);\n    }\n  });\n\n  ws.on('close', () => {\n    term.writeln('... Disconnected. Press any key to close terminal ...');\n    closed = true;\n  });\n\n  term.on('key', () => {\n    if (closed) {\n      win.destroy();\n    }\n  });\n\n  term.on('resize', (size) => {\n    const {cols, rows} = size;\n    proc.request('/resize', {method: 'post', body: {size: {cols, rows}, pid, uuid}});\n  });\n\n  win.on('destroy', () => {\n    ws.destroy();\n    term.destroy();\n  });\n};\n\n/*\n * Creates a new Terminal and Window\n */\nconst createTerminal = (core, proc, index) => {\n  const term = new Terminal();\n\n  const fit = () => {\n    setTimeout(() => {\n      term.fit();\n      term.focus();\n    }, 100);\n  };\n\n  const render = ($content) => {\n    term.open($content);\n    term.fit();\n    term.focus();\n\n    $content.addEventListener('contextmenu', ev => {\n      ev.preventDefault();\n\n      core.make('osjs/contextmenu', {\n        position: ev,\n        menu: [{\n          label: 'Copy text selection',\n          onclick: () => clipboard.writeText(\n            term.getSelection()\n          )\n        }, {\n          label: 'Paste from clipboard',\n          onclick: () => clipboard.readText()\n            .then(data => term.write(data))\n        }]\n      });\n    });\n  };\n\n  proc.createWindow({\n    id: 'Xterm_' + String(index),\n    title: proc.metadata.title.en_EN,\n    icon: proc.resource(proc.metadata.icon),\n    dimension: {width: 960, height: 288},\n    attributes: {\n      classNames: ['Window_Xterm']\n    }\n  })\n    .on('resized', fit)\n    .on('maximize', fit)\n    .on('restore', fit)\n    .on('moved', () => term.focus())\n    .on('focus', () => term.focus())\n    .on('blur', () => term.blur())\n    .on('render', (win) => {\n      createConnection(core, proc, win, term);\n      win.focus();\n    })\n    .render(render);\n};\n\n//\n// Callback for launching application\n//\nosjs.register(applicationName, (core, args, options, metadata) => {\n  Terminal.applyAddon(fit);\n  Terminal.applyAddon(attach);\n\n  const proc = core.make('osjs/application', {\n    args,\n    options,\n    metadata\n  });\n\n  proc.on('destroy-window', () => {\n    if (!proc.windows.length) {\n      proc.destroy();\n    }\n  });\n\n  const createWindow = () => createTerminal(core, proc, proc.windows.length);\n\n  if (core.has('osjs/tray')) {\n    const tray = core.make('osjs/tray').create({\n      icon: proc.resource(metadata.icon),\n    }, (ev) => {\n      core.make('osjs/contextmenu').show({\n        position: ev,\n        menu: [\n          {label: 'New terminal', onclick: () => createWindow()}\n        ]\n      });\n    });\n\n    proc.on('destroy', () => tray.destroy());\n  }\n\n  createWindow();\n\n  proc.on('attention', () => createWindow());\n\n  return proc;\n});\n"],"sourceRoot":""}